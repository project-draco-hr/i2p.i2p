{
  writersWaiting++;
  while ((readers > 0) | writingInProgress) {
    try {
      wait();
    }
 catch (    InterruptedException ie) {
    }
  }
  writersWaiting--;
  writingInProgress=true;
}
