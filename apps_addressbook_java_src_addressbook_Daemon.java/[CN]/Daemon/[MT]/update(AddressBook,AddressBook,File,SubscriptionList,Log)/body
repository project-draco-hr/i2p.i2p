{
  String routerLocation=router.getLocation();
  master.merge(router);
  Iterator iter=subscriptions.iterator();
  while (iter.hasNext()) {
    master.merge((AddressBook)iter.next(),log);
  }
  master.write(new File(routerLocation));
  if (published != null)   master.write(published);
  subscriptions.write();
}
