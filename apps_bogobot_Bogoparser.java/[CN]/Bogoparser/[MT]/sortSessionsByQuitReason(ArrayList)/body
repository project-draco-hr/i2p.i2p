{
  ArrayList sortedSessionsByQuitReason=new ArrayList();
  while (sortedSessionsByNick.size() != 0) {
    String entry=(String)sortedSessionsByNick.get(1);
    Pattern p=Pattern.compile("^[^ ]+ [^ ]+ [^ ]+ (.*)$");
    Matcher m=p.matcher(entry);
    if (m.matches()) {
      String currentQuitReason=m.group(1);
      sortedSessionsByQuitReason.add(sortedSessionsByNick.get(0));
      sortedSessionsByQuitReason.add(entry);
      sortedSessionsByNick.remove(0);
      sortedSessionsByNick.remove(0);
      for (int i=0; i + 1 < sortedSessionsByNick.size(); i+=2) {
        String nextEntry=(String)sortedSessionsByNick.get(i + 1);
        Pattern p2=Pattern.compile("^[^ ]+ [^ ]+ [^ ]+ (.*)$");
        Matcher m2=p2.matcher(nextEntry);
        if (m2.matches()) {
          String nextQuitReason=m2.group(1);
          if (nextQuitReason.equals(currentQuitReason)) {
            sortedSessionsByQuitReason.add(sortedSessionsByNick.get(i));
            sortedSessionsByQuitReason.add(nextEntry);
            sortedSessionsByNick.remove(i);
            sortedSessionsByNick.remove(i);
            i-=2;
          }
        }
 else {
          System.out.println("\r\nError: Unexpected entry in logfile: " + nextEntry);
          System.exit(1);
        }
      }
    }
 else {
      System.out.println("\r\nError: Unexpected entry in logfile: " + entry);
      System.exit(1);
    }
  }
  return sortedSessionsByQuitReason;
}
