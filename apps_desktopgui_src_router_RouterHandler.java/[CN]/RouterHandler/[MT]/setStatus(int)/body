{
  if (status == SHUTDOWN_GRACEFULLY) {
    Thread t=new Thread(new Runnable(){
      public void run(){
        RouterContext context=RouterHelper.getContext();
        context.router().shutdownGracefully();
        while (context.router().getShutdownTimeRemaining() > 0)         try {
          Thread.sleep(context.router().getShutdownTimeRemaining());
        }
 catch (        InterruptedException ex) {
          Logger.getLogger(RouterHandler.class.getName()).log(Level.SEVERE,null,ex);
        }
        System.exit(0);
      }
    }
);
    t.start();
  }
}
