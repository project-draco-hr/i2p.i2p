{
  log.debug("Querying the DHT for index packets with key " + identity.getHash());
  Collection<DhtStorablePacket> packets=dht.findAll(identity.getHash(),IndexPacket.class);
  Collection<IndexPacket> indexPackets=new ArrayList<IndexPacket>();
  for (  DhtStorablePacket packet : packets)   if (packet instanceof IndexPacket)   indexPackets.add((IndexPacket)packet);
 else   log.error("DHT returned packet of class " + packet.getClass().getSimpleName() + ", expected IndexPacket.");
  IndexPacket mergedPacket=new IndexPacket(indexPackets);
  log.debug("Found " + mergedPacket.getDhtKeys().size() + " Email Packet keys.");
  return mergedPacket.getDhtKeys();
}
