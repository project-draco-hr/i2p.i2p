{
  this.identitiesFile=identitiesFile;
  identities=Collections.synchronizedList(new ArrayList<EmailIdentity>());
  if (!identitiesFile.exists()) {
    log.debug("Identities file does not exist: <" + identitiesFile.getAbsolutePath() + ">");
    return;
  }
  log.debug("Reading identities file: <" + identitiesFile.getAbsolutePath() + ">");
  BufferedReader input=null;
  try {
    input=new BufferedReader(new FileReader(identitiesFile));
    while (true) {
      String line=input.readLine();
      if (line == null)       break;
      EmailIdentity identity=parse(line);
      if (identity != null)       identities.add(identity);
    }
  }
 catch (  IOException e) {
    log.error("Can't read identities file.",e);
  }
 finally {
    if (input != null)     try {
      input.close();
    }
 catch (    IOException e) {
      log.error("Error closing input stream.",e);
    }
  }
}
