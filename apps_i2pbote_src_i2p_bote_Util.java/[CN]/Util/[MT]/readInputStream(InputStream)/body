{
  ByteArrayOutputStream byteStream=new ByteArrayOutputStream();
  byte[] buffer=new byte[32 * 1024];
  while (true) {
    int bytesToRead=Math.min(inputStream.available(),buffer.length);
    if (bytesToRead <= 0)     break;
 else {
      int bytesRead=inputStream.read(buffer,0,bytesToRead);
      byteStream.write(buffer,0,bytesRead);
    }
  }
  return byteStream.toByteArray();
}
