{
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  outputStream.write(getPacketTypeCode());
  try {
    outputStream.write((byte)getPacketTypeCode());
    destinationHash.writeBytes(outputStream);
    outputStream.write((byte)dhtKeys.size());
    for (    Hash dhtKey : dhtKeys)     dhtKey.writeBytes(outputStream);
  }
 catch (  DataFormatException e) {
    log.error("Invalid format for email destination.",e);
  }
catch (  IOException e) {
    log.error("Can't write to ByteArrayOutputStream.",e);
  }
  return outputStream.toByteArray();
}
