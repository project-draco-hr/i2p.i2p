{
  ByteArrayOutputStream arrayOutputStream=new ByteArrayOutputStream();
  DataOutputStream dataStream=new DataOutputStream(arrayOutputStream);
  try {
    dataStream.writeInt((int)earliestSendTime);
    dataStream.writeInt((int)latestSendTime);
    dataStream.write(xorKey);
    dataStream.write(nextDestination.toByteArray());
    dataStream.writeShort(payload.length);
    dataStream.write(payload);
  }
 catch (  IOException e) {
    log.error("Can't write to ByteArrayOutputStream.",e);
  }
  return arrayOutputStream.toByteArray();
}
