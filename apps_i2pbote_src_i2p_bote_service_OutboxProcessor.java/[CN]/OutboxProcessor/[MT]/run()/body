{
  while (true) {
synchronized (this) {
      checkForEmailSignal=new CountDownLatch(1);
    }
    log.info("Processing outgoing emails in directory '" + outbox.getStorageDirectory() + "'.");
    for (    Email email : outbox) {
      log.info("Processing outbox file: '" + email.getFile() + "'.");
      try {
        sendEmail(email);
      }
 catch (      Exception e) {
        log.error("Error sending email.",e);
      }
    }
    try {
      checkForEmailSignal.await(PAUSE,TimeUnit.MINUTES);
    }
 catch (    InterruptedException e) {
      log.error("OutboxProcessor received an InterruptedException.",e);
    }
  }
}
