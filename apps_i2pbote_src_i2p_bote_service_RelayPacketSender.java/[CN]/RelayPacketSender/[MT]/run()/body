{
  while (true) {
    if (log.shouldLog(Log.DEBUG))     log.debug("Deleting expired packets...");
    try {
      deleteExpiredPackets();
    }
 catch (    Exception e) {
      log.error("Error deleting expired packets",e);
    }
    log.info("Processing outgoing packets in directory '" + packetStore.getStorageDirectory().getAbsolutePath() + "'");
    for (    RelayPacket packet : packetStore) {
      log.info("Processing packet file: <" + packet.getFile() + ">");
      try {
        HashCash hashCash=null;
        long sendTime=getRandomSendTime(packet);
        sendQueue.sendRelayRequest(packet,hashCash,sendTime);
      }
 catch (      Exception e) {
        log.error("Error sending packet. ",e);
      }
    }
    try {
      Thread.sleep(PAUSE);
    }
 catch (    InterruptedException e) {
      log.error("RelayPacketSender received an InterruptedException.");
    }
  }
}
