{
  File tmpDir=new File(System.getProperty("java.io.tmpdir"));
  File testDir=new File(tmpDir,"I2PBote-Test_" + System.currentTimeMillis());
  testDir.mkdir();
  I2PClient i2pClient=I2PClientFactory.createClient();
  Destination firstNode=null;
  nodes=Collections.synchronizedList(new ArrayList<KademliaDHT>());
  for (int i=0; i < NUM_NODES; i++) {
    ByteArrayOutputStream arrayStream=new ByteArrayOutputStream();
    Destination destination=i2pClient.createDestination(arrayStream);
    byte[] destinationArray=arrayStream.toByteArray();
    I2PSession i2pSession=i2pClient.createSession(new ByteArrayInputStream(destinationArray),null);
    I2PPacketDispatcher packetDispatcher=new I2PPacketDispatcher();
    i2pSession.addSessionListener(packetDispatcher,I2PSession.PROTO_ANY,I2PSession.PORT_ANY);
    I2PSendQueue sendQueue=new I2PSendQueue(i2pSession,packetDispatcher);
    File peerFile=new File(testDir,"peers" + i);
    if (firstNode != null) {
      FileWriter writer=new FileWriter(peerFile);
      writer.write(firstNode.toBase64());
    }
 else     firstNode=destination;
    nodes.add(new KademliaDHT(destination,sendQueue,packetDispatcher,peerFile));
  }
}
