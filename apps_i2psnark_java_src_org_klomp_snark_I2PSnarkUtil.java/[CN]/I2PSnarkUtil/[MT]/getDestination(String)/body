{
  if (ip == null)   return null;
  if (ip.endsWith(".i2p")) {
    Destination dest=_context.namingService().lookup(ip);
    if (dest != null) {
      return dest;
    }
 else {
      try {
        return new Destination(ip.substring(0,ip.length() - 4));
      }
 catch (      DataFormatException dfe) {
        return null;
      }
    }
  }
 else {
    try {
      return new Destination(ip);
    }
 catch (    DataFormatException dfe) {
      return null;
    }
  }
}
