{
  PeerState s=state;
  if (s == null || s.bitfield == null)   return 0;
  int count=0;
  for (int i=0; i < s.bitfield.size(); i++)   if (s.bitfield.get(i))   count++;
  return count;
}
