{
  long rate=0;
  int i=0;
synchronized (array) {
    for (; i < RATE_DEPTH; i++) {
      if (array[i] < 0)       break;
      rate+=array[i];
    }
  }
  if (i == 0)   return 0;
  return rate / (i * CHECK_PERIOD / 1000);
}
