{
  if (savedRequest == null)   return null;
  if (!havePieces.get(savedRequest.piece)) {
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Peer doesn't have orphaned piece " + savedRequest);
    return null;
  }
synchronized (wantedPieces) {
    for (Iterator iter=wantedPieces.iterator(); iter.hasNext(); ) {
      Piece piece=(Piece)iter.next();
      if (piece.getId() == savedRequest.piece) {
        Request req=savedRequest;
        piece.setRequested(true);
        if (_log.shouldLog(Log.DEBUG))         _log.debug("Restoring orphaned partial piece " + req);
        savedRequest=null;
        return req;
      }
    }
  }
  if (_log.shouldLog(Log.DEBUG))   _log.debug("We no longer want orphaned piece " + savedRequest);
  savedRequest=null;
  return null;
}
