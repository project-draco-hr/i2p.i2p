{
  halted=true;
synchronized (peers) {
    timer.cancel();
    Iterator it=peers.iterator();
    while (it.hasNext()) {
      Peer peer=(Peer)it.next();
      peer.disconnect();
      it.remove();
    }
  }
}
