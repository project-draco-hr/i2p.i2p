{
synchronized (peers) {
    Iterator it=peers.iterator();
    while (it.hasNext()) {
      Peer p=(Peer)it.next();
      if (p.equals(peer))       continue;
      if (p.state == null)       continue;
      int[] arr=p.state.getRequestedPieces();
      for (int i=0; arr[i] >= 0; i++)       if (arr[i] == piece) {
        if (_log.shouldLog(Log.DEBUG))         _log.debug("Another peer is requesting piece " + piece);
        return;
      }
    }
  }
synchronized (wantedPieces) {
    Iterator it=wantedPieces.iterator();
    while (it.hasNext()) {
      Piece p=(Piece)it.next();
      if (p.getId() == piece) {
        p.setRequested(false);
        if (_log.shouldLog(Log.DEBUG))         _log.debug("Removing from request list piece " + piece);
        return;
      }
    }
  }
}
