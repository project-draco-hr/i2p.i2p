{
  if (halted)   return;
  Request req=state.getPartialRequest();
  if (req == null)   return;
  if (savedRequest == null || req.off > savedRequest.off || System.currentTimeMillis() > savedRequestTime + (15 * 60 * 1000)) {
    if (savedRequest == null || (req.piece != savedRequest.piece && req.off != savedRequest.off)) {
      if (_log.shouldLog(Log.DEBUG)) {
        _log.debug(" Saving orphaned partial piece " + req);
        if (savedRequest != null)         _log.debug(" (Discarding previously saved orphan) " + savedRequest);
      }
    }
    savedRequest=req;
    savedRequestTime=System.currentTimeMillis();
  }
 else {
    if (req.piece != savedRequest.piece)     if (_log.shouldLog(Log.DEBUG))     _log.debug(" Discarding orphaned partial piece " + req);
  }
}
