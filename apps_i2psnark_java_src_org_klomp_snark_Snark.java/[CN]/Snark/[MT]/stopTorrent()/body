{
  stopped=true;
  TrackerClient tc=trackerclient;
  if (tc != null)   tc.halt();
  PeerCoordinator pc=coordinator;
  if (pc != null)   pc.halt();
  Storage st=storage;
  if (st != null) {
    boolean changed=storage.isChanged();
    try {
      storage.close();
    }
 catch (    IOException ioe) {
      System.out.println("Error closing " + torrent);
      ioe.printStackTrace();
    }
    if (changed && completeListener != null)     completeListener.updateStatus(this);
  }
  if (pc != null && _peerCoordinatorSet != null)   _peerCoordinatorSet.remove(pc);
  if (_peerCoordinatorSet == null)   _util.disconnect();
}
