{
  long delay=60 * 1000 * getStartupDelayMinutes();
  if (delay > 0 && shouldAutoStart()) {
    _messages.add(_("Adding torrents in {0}",DataHelper.formatDuration2(delay)));
    try {
      Thread.sleep(delay);
    }
 catch (    InterruptedException ie) {
    }
synchronized (_messages) {
      if (_messages.size() == 1)       _messages.remove(0);
    }
  }
  getBWLimit();
  boolean doMagnets=true;
  while (_running) {
    File dir=getDataDir();
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Directory Monitor loop over " + dir.getAbsolutePath());
    try {
synchronized (_snarks) {
        monitorTorrents(dir);
      }
    }
 catch (    Exception e) {
      _log.error("Error in the DirectoryMonitor",e);
    }
    if (doMagnets) {
      try {
        addMagnets();
        doMagnets=false;
      }
 catch (      Exception e) {
        _log.error("Error in the DirectoryMonitor",e);
      }
    }
    try {
      Thread.sleep(60 * 1000);
    }
 catch (    InterruptedException ie) {
    }
  }
}
