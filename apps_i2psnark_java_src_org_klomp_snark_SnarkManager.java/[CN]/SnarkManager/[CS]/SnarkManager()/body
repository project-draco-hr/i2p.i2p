{
  _snarks=new HashMap();
  _addSnarkLock=new Object();
  _context=I2PAppContext.getGlobalContext();
  _log=_context.logManager().getLog(SnarkManager.class);
  _messages=new ArrayList(16);
  _util=new I2PSnarkUtil(_context);
  _peerCoordinatorSet=new PeerCoordinatorSet();
  _connectionAcceptor=new ConnectionAcceptor(_util);
  loadConfig("i2psnark.config");
  int minutes=getStartupDelayMinutes();
  _messages.add("Adding torrents in " + minutes + (minutes == 1 ? " minute" : " minutes"));
  I2PThread monitor=new I2PThread(new DirMonitor(),"Snark DirMonitor");
  monitor.setDaemon(true);
  monitor.start();
  if (_context instanceof RouterContext)   ((RouterContext)_context).router().addShutdownTask(new SnarkManagerShutdown());
}
