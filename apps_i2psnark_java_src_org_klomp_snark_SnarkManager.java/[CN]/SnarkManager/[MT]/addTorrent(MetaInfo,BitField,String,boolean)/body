{
synchronized (_snarks) {
    Snark snark=getTorrentByInfoHash(metainfo.getInfoHash());
    if (snark != null) {
      addMessage(_("Torrent with this info hash is already running: {0}",snark.getBaseName()));
      return;
    }
    saveTorrentStatus(metainfo,bitfield,null);
    try {
      locked_writeMetaInfo(metainfo,filename,areFilesPublic());
      addTorrent(filename,dontAutoStart);
    }
 catch (    IOException ioe) {
      addMessage(_("Failed to copy torrent file to {0}",filename));
      _log.error("Failed to write torrent file",ioe);
    }
  }
}
