{
  String fileNames[]=dir.list(TorrentFilenameFilter.instance());
  List foundNames=new ArrayList(0);
  if (fileNames != null) {
    for (int i=0; i < fileNames.length; i++) {
      try {
        foundNames.add(new File(dir,fileNames[i]).getCanonicalPath());
      }
 catch (      IOException ioe) {
        _log.error("Error resolving '" + fileNames[i] + "' in '"+ dir,ioe);
      }
    }
  }
  Set existingNames=listTorrentFiles();
  for (int i=0; i < foundNames.size(); i++) {
    if (existingNames.contains(foundNames.get(i))) {
    }
 else {
      if (shouldAutoStart() && !_util.connect())       addMessage("Unable to connect to I2P!");
      addTorrent((String)foundNames.get(i),!shouldAutoStart());
    }
  }
  for (Iterator iter=existingNames.iterator(); iter.hasNext(); ) {
    String name=(String)iter.next();
    if (foundNames.contains(name)) {
    }
 else {
      stopTorrent(name,true);
    }
  }
}
