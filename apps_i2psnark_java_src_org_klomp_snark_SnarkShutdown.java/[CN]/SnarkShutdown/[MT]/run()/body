{
  Snark.debug("Shutting down...",Snark.NOTICE);
  Snark.debug("Halting ConnectionAcceptor...",Snark.INFO);
  if (acceptor != null)   acceptor.halt();
  Snark.debug("Halting TrackerClient...",Snark.INFO);
  if (trackerclient != null)   trackerclient.halt();
  Snark.debug("Halting PeerCoordinator...",Snark.INFO);
  if (coordinator != null)   coordinator.halt();
  Snark.debug("Closing Storage...",Snark.INFO);
  if (storage != null) {
    try {
      storage.close();
    }
 catch (    IOException ioe) {
      I2PSnarkUtil.instance().debug("Couldn't properly close storage",Snark.ERROR,ioe);
      throw new RuntimeException("b0rking");
    }
  }
  try {
    Snark.debug("Waiting 5 seconds...",Snark.INFO);
    Thread.sleep(5 * 1000);
  }
 catch (  InterruptedException ie) {
  }
  listener.shutdown();
}
