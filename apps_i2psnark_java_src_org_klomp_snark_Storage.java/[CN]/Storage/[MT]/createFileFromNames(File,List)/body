{
  File f=null;
  Iterator it=names.iterator();
  while (it.hasNext()) {
    String name=filterName((String)it.next());
    if (it.hasNext()) {
      f=new File(base,name);
      if (!f.mkdir() && !f.isDirectory())       throw new IOException("Could not create directory " + f);
      base=f;
    }
 else {
      f=new SecureFile(base,name);
      if (!f.createNewFile() && !f.exists())       throw new IOException("Could not create file " + f);
    }
  }
  return f;
}
