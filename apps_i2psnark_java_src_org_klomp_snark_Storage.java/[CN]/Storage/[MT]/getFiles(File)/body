{
  ArrayList files=new ArrayList();
  addFiles(files,base);
  int size=files.size();
  names=new String[size];
  lengths=new long[size];
  rafs=new RandomAccessFile[size];
  RAFlock=new Object[size];
  RAFtime=new long[size];
  RAFfile=new File[size];
  priorities=new int[size];
  isSparse=new boolean[size];
  int i=0;
  Iterator it=files.iterator();
  while (it.hasNext()) {
    File f=(File)it.next();
    names[i]=f.getPath();
    if (base.isDirectory() && names[i].startsWith(base.getPath()))     names[i]=names[i].substring(base.getPath().length() + 1);
    lengths[i]=f.length();
    RAFlock[i]=new Object();
    RAFfile[i]=f;
    i++;
  }
}
