{
  super.init(cfg);
  _contextPath=getServletContext().getContextPath();
  _nonce=_context.random().nextLong();
  _manager=new SnarkManager(_context);
  String configFile=_context.getProperty(PROP_CONFIG_FILE);
  if ((configFile == null) || (configFile.trim().length() <= 0))   configFile="i2psnark.config";
  _manager.loadConfig(configFile);
  _manager.start();
  loadMimeMap("org/klomp/snark/web/mime");
  setResourceBase(_manager.getDataDir());
  setWarBase("/.icons/");
}
