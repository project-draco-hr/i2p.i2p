{
  _context=I2PAppContext.getGlobalContext();
  _log=_context.logManager().getLog(I2PSnarkServlet.class);
  _nonce=_context.random().nextLong();
  _manager=new SnarkManager(_context);
  String configFile=_context.getProperty(PROP_CONFIG_FILE);
  if ((configFile == null) || (configFile.trim().length() <= 0))   configFile="i2psnark.config";
  _manager.loadConfig(configFile);
  _manager.start();
  _umgr=_context.updateManager();
  if (_umgr != null) {
    _uhandler=new UpdateHandler(_context,_umgr,_manager);
    _umgr.register(_uhandler,UpdateType.ROUTER_SIGNED,UpdateMethod.TORRENT,10);
  }
  try {
    _resourceBase=Resource.newResource(_manager.getDataDir().getAbsolutePath());
  }
 catch (  IOException ioe) {
  }
  super.init(cfg);
}
