{
  if (!open)   return true;
synchronized (sockLock) {
    if (sockMgr != null) {
      mySockets.retainAll(sockMgr.listSockets());
      if (!forced && mySockets.size() != 0) {
        l.log("There are still active connections!");
        _log.debug("can't close: there are still active connections!");
        for (Iterator it=mySockets.iterator(); it.hasNext(); ) {
          l.log("->" + it.next());
        }
        return false;
      }
      if (!chained) {
        I2PSession session=sockMgr.getSession();
        if (session != null) {
          getTunnel().removeSession(session);
        }
      }
    }
    l.log("Closing client " + toString());
    open=false;
    try {
      if (ss != null)       ss.close();
    }
 catch (    IOException ex) {
      ex.printStackTrace();
      return false;
    }
    l.log("Client closed.");
  }
synchronized (_waitingSockets) {
    _waitingSockets.notifyAll();
  }
  return true;
}
