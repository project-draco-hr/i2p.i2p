{
  I2PSocket i2ps;
  if (sockMgr == null) {
synchronized (sockLock) {
      sockMgr=getSocketManager();
    }
  }
 else   if (Boolean.valueOf(getTunnel().getClientOptions().getProperty("i2cp.closeOnIdle")).booleanValue() && Boolean.valueOf(getTunnel().getClientOptions().getProperty("i2cp.newDestOnResume")).booleanValue()) {
synchronized (sockLock) {
      I2PSocketManager oldSockMgr=sockMgr;
      sockMgr=getSocketManager();
      if (oldSockMgr != sockMgr) {
        _log.warn("Built a new destination on resume");
      }
    }
  }
  i2ps=sockMgr.connect(dest,opt);
synchronized (sockLock) {
    mySockets.add(i2ps);
  }
  return i2ps;
}
