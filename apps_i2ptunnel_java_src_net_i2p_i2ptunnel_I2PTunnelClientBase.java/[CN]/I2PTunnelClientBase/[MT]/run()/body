{
  try {
    InetAddress addr=getListenHost(l);
    if (addr == null) {
      open=false;
synchronized (this) {
        notifyAll();
      }
synchronized (_waitingSockets) {
        _waitingSockets.notifyAll();
      }
      return;
    }
    ss=new ServerSocket(localPort,0,addr);
    if (localPort == 0) {
      localPort=ss.getLocalPort();
    }
    notifyEvent("clientLocalPort",new Integer(ss.getLocalPort()));
    l.log("Listening for clients on port " + localPort + " of "+ getTunnel().listenHost);
synchronized (this) {
      listenerReady=true;
      notify();
    }
synchronized (startLock) {
      while (!startRunning) {
        try {
          startLock.wait();
        }
 catch (        InterruptedException ie) {
        }
      }
    }
    while (true) {
      Socket s=ss.accept();
      long before=System.currentTimeMillis();
      manageConnection(s);
      long total=System.currentTimeMillis() - before;
      _context.statManager().addRateData("i2ptunnel.client.manageTime",total,total);
    }
  }
 catch (  IOException ex) {
    if (open) {
      _log.error("Error listening for connections on " + localPort,ex);
      notifyEvent("openBaseClientResult","error");
    }
synchronized (sockLock) {
      mySockets.clear();
    }
    open=false;
synchronized (this) {
      notifyAll();
    }
  }
synchronized (_waitingSockets) {
    _waitingSockets.notifyAll();
  }
}
