{
  if (_log.shouldLog(Log.DEBUG))   _log.debug("got a connection.");
  Destination clientDest=pickDestination();
  I2PSocket i2ps=null;
  try {
    i2ps=createI2PSocket(clientDest);
    i2ps.setReadTimeout(readTimeout);
    StringBuffer expectedPong=new StringBuffer();
    Thread in=new I2PAppThread(new IrcInboundFilter(s,i2ps,expectedPong,_log,this),"IRC Client " + __clientId + " in",true);
    in.start();
    Thread out=new I2PAppThread(new IrcOutboundFilter(s,i2ps,expectedPong,_log,this),"IRC Client " + __clientId + " out",true);
    out.start();
  }
 catch (  Exception ex) {
    if (_log.shouldLog(Log.ERROR))     _log.error("Error connecting",ex);
    closeSocket(s);
    if (i2ps != null) {
synchronized (sockLock) {
        mySockets.remove(sockLock);
      }
    }
  }
}
