{
  if (!open)   return true;
synchronized (lock) {
    if (!forced && sockMgr.listSockets().size() != 0) {
      l.log("There are still active connections!");
      for (Iterator it=sockMgr.listSockets().iterator(); it.hasNext(); ) {
        l.log("->" + it.next());
      }
      return false;
    }
    l.log("Shutting down server " + toString());
    try {
      if (i2pss != null)       i2pss.close();
      getTunnel().removeSession(sockMgr.getSession());
      sockMgr.getSession().destroySession();
    }
 catch (    I2PException ex) {
      _log.error("Error destroying the session",ex);
      System.exit(1);
    }
    l.log("Server shut down.");
    open=false;
    return true;
  }
}
