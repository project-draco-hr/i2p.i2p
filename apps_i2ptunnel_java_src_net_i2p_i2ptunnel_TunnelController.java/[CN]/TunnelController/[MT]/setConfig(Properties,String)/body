{
  Properties props=new Properties();
  for (  Map.Entry<Object,Object> e : config.entrySet()) {
    String key=(String)e.getKey();
    if (key.startsWith(prefix)) {
      key=key.substring(prefix.length());
      String val=(String)e.getValue();
      props.setProperty(key,val);
    }
  }
  _config=props;
  String type=getType();
  if (type != null) {
    if (type.equals("httpserver") || type.equals("streamrserver")) {
      if (!_config.containsKey("option.shouldBundleReplyInfo"))       _config.setProperty("option.shouldBundleReplyInfo","false");
    }
 else     if (type.contains("irc") || type.equals("streamrclient")) {
      if (!_config.containsKey("option.crypto.tagsToSend"))       _config.setProperty("option.crypto.tagsToSend","20");
      if (!_config.containsKey("option.crypto.lowTagThreshold"))       _config.setProperty("option.crypto.lowTagThreshold","14");
    }
  }
  setSessionOptions();
  if (_running && _sessions != null) {
    for (    I2PSession s : _sessions) {
      if (!s.isClosed()) {
        s.updateOptions(_tunnel.getClientOptions());
      }
    }
  }
}
