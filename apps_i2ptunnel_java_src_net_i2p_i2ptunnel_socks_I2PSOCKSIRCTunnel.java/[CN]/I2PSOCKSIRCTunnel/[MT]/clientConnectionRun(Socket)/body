{
  try {
    SOCKSServer serv=SOCKSServerFactory.createSOCKSServer(s,getTunnel().getClientOptions());
    Socket clientSock=serv.getClientSocket();
    I2PSocket destSock=serv.getDestinationI2PSocket(this);
    StringBuffer expectedPong=new StringBuffer();
    int id=__clientId.incrementAndGet();
    Thread in=new I2PAppThread(new IrcInboundFilter(clientSock,destSock,expectedPong,_log),"SOCKS IRC Client " + id + " in",true);
    in.start();
    Thread out=new I2PAppThread(new IrcOutboundFilter(clientSock,destSock,expectedPong,_log),"SOCKS IRC Client " + id + " out",true);
    out.start();
  }
 catch (  SOCKSException e) {
    if (_log.shouldLog(Log.WARN))     _log.warn("Error from SOCKS connection",e);
    closeSocket(s);
  }
}
