{
  Properties config=new Properties();
  updateConfigGeneric(config);
  if ((isClient(_type) && !"streamrclient".equals(_type)) || "streamrserver".equals(_type)) {
    if (_reachableBy != null)     config.setProperty("interface",_reachableBy);
 else     config.setProperty("interface","");
  }
 else {
    if (_targetHost != null)     config.setProperty("targetHost",_targetHost);
  }
  if (isClient(_type)) {
    if (_port != null)     config.setProperty("listenPort",_port);
    config.setProperty("sharedClient",_sharedClient + "");
    for (    String p : _booleanClientOpts)     config.setProperty("option." + p,"" + _booleanOptions.contains(p));
    for (    String p : _otherClientOpts)     if (_otherOptions.containsKey(p))     config.setProperty("option." + p,_otherOptions.get(p));
  }
 else {
    if (_targetPort != null)     config.setProperty("targetPort",_targetPort);
    for (    String p : _booleanServerOpts)     config.setProperty("option." + p,"" + _booleanOptions.contains(p));
    for (    String p : _otherServerOpts)     if (_otherOptions.containsKey(p))     config.setProperty("option." + p,_otherOptions.get(p));
  }
  if ("httpclient".equals(_type) || "connectclient".equals(_type) || "sockstunnel".equals(_type)|| "socksirctunnel".equals(_type)) {
    for (    String p : _booleanProxyOpts)     config.setProperty("option." + p,"" + _booleanOptions.contains(p));
    if (_proxyList != null)     config.setProperty("proxyList",_proxyList);
  }
  if ("ircclient".equals(_type) || "client".equals(_type) || "streamrclient".equals(_type)) {
    if (_targetDestination != null)     config.setProperty("targetDestination",_targetDestination);
  }
 else   if ("httpserver".equals(_type) || "httpbidirserver".equals(_type)) {
    if (_spoofedHost != null)     config.setProperty("spoofedHost",_spoofedHost);
  }
  if ("httpbidirserver".equals(_type)) {
    if (_port != null)     config.setProperty("listenPort",_port);
    if (_reachableBy != null)     config.setProperty("interface",_reachableBy);
 else     if (_targetHost != null)     config.setProperty("interface",_targetHost);
 else     config.setProperty("interface","");
  }
  if ("ircclient".equals(_type)) {
    boolean dcc=_booleanOptions.contains(I2PTunnelIRCClient.PROP_DCC);
    config.setProperty("option." + I2PTunnelIRCClient.PROP_DCC,"" + dcc);
    if (dcc) {
      config.setProperty("options." + PROP_MAX_CONNS_MIN,"3");
      config.setProperty("options." + PROP_MAX_CONNS_HOUR,"10");
      config.setProperty("options." + PROP_MAX_TOTAL_CONNS_MIN,"5");
      config.setProperty("options." + PROP_MAX_TOTAL_CONNS_HOUR,"25");
    }
  }
  return config;
}
