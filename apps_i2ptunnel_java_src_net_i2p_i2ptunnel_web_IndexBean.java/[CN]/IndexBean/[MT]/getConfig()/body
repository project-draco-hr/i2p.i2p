{
  Properties config=new Properties();
  updateConfigGeneric(config);
  if ("httpclient".equals(_type)) {
    if (_port != null)     config.setProperty("listenPort",_port);
    if (_reachableByOther != null)     config.setProperty("interface",_reachableByOther);
 else     config.setProperty("interface",_reachableBy);
    if (_proxyList != null)     config.setProperty("proxyList",_proxyList);
    config.setProperty("option.inbound.nickname",CLIENT_NICKNAME);
    config.setProperty("option.outbound.nickname",CLIENT_NICKNAME);
    if (_name != null && !_sharedClient) {
      config.setProperty("option.inbound.nickname",_name);
      config.setProperty("option.outbound.nickname",_name);
    }
    config.setProperty("sharedClient",_sharedClient + "");
  }
 else   if ("ircclient".equals(_type)) {
    if (_port != null)     config.setProperty("listenPort",_port);
    if (_reachableByOther != null)     config.setProperty("interface",_reachableByOther);
 else     config.setProperty("interface",_reachableBy);
    if (_targetDestination != null)     config.setProperty("targetDestination",_targetDestination);
    config.setProperty("option.inbound.nickname",CLIENT_NICKNAME);
    config.setProperty("option.outbound.nickname",CLIENT_NICKNAME);
    if (_name != null && !_sharedClient) {
      config.setProperty("option.inbound.nickname",_name);
      config.setProperty("option.outbound.nickname",_name);
    }
    config.setProperty("sharedClient",_sharedClient + "");
  }
 else   if ("client".equals(_type)) {
    if (_port != null)     config.setProperty("listenPort",_port);
    if (_reachableByOther != null)     config.setProperty("interface",_reachableByOther);
 else     config.setProperty("interface",_reachableBy);
    if (_targetDestination != null)     config.setProperty("targetDestination",_targetDestination);
    config.setProperty("option.inbound.nickname",CLIENT_NICKNAME);
    config.setProperty("option.outbound.nickname",CLIENT_NICKNAME);
    if (_name != null && !_sharedClient) {
      config.setProperty("option.inbound.nickname",_name);
      config.setProperty("option.outbound.nickname",_name);
    }
    config.setProperty("sharedClient",_sharedClient + "");
  }
 else   if ("server".equals(_type)) {
    if (_targetHost != null)     config.setProperty("targetHost",_targetHost);
    if (_targetPort != null)     config.setProperty("targetPort",_targetPort);
    if (_privKeyFile != null)     config.setProperty("privKeyFile",_privKeyFile);
  }
 else   if ("httpserver".equals(_type)) {
    if (_targetHost != null)     config.setProperty("targetHost",_targetHost);
    if (_targetPort != null)     config.setProperty("targetPort",_targetPort);
    if (_privKeyFile != null)     config.setProperty("privKeyFile",_privKeyFile);
    if (_spoofedHost != null)     config.setProperty("spoofedHost",_spoofedHost);
  }
 else {
    return null;
  }
  return config;
}
