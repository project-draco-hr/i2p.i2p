{
  FileResource r=null;
  if (!isDirectory()) {
    r=(FileResource)super.addPath(path);
  }
 else {
    path=org.mortbay.util.URI.canonicalPath(path);
    String rel=path;
    if (path.startsWith("/"))     rel=path.substring(1);
    File newFile=new File(_file,rel.replace('/',File.separatorChar));
    r=new FileResource(newFile.toURI().toURL(),null,newFile);
  }
  String encoded=org.mortbay.util.URI.encodePath(path);
  int expected=r._urlString.length() - encoded.length();
  int index=r._urlString.lastIndexOf(encoded,expected);
  if (expected != index && ((expected - 1) != index || path.endsWith("/") || !r.isDirectory())) {
    r._alias=r._url;
    r._aliasChecked=true;
  }
  return r;
}
