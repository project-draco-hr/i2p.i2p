{
  if (_log.shouldLog(Log.DEBUG))   _log.debug("waitIncoming() called, pending: " + pendingSockets.size());
  boolean isTimed=(timeoutMs >= 0);
  if (isTimed) {
    Clock clock=I2PAppContext.getGlobalContext().clock();
    long now=clock.now();
    long end=now + timeoutMs;
    while (pendingSockets.size() <= 0 && now < end) {
      if (closing)       throw new ConnectException("I2PServerSocket closed");
      try {
synchronized (socketAddedLock) {
          socketAddedLock.wait(end - now);
        }
      }
 catch (      InterruptedException ie) {
      }
      now=clock.now();
    }
  }
 else {
    while (pendingSockets.size() <= 0) {
      if (closing)       throw new ConnectException("I2PServerSocket closed");
      try {
synchronized (socketAddedLock) {
          socketAddedLock.wait();
        }
      }
 catch (      InterruptedException ie) {
      }
    }
  }
  return (pendingSockets.size() > 0);
}
