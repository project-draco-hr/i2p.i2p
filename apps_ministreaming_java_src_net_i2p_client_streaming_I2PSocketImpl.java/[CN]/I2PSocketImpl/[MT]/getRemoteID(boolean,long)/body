{
  long dieAfter=System.currentTimeMillis() + maxWait;
synchronized (remoteIDWaiter) {
    if (wait) {
      try {
        if (maxWait >= 0)         remoteIDWaiter.wait(maxWait);
 else         remoteIDWaiter.wait();
      }
 catch (      InterruptedException ex) {
      }
      long now=System.currentTimeMillis();
      if ((maxWait >= 0) && (now >= dieAfter)) {
        long waitedExcess=now - dieAfter;
        throw new InterruptedIOException("Timed out waiting for remote ID (waited " + waitedExcess + "ms too long ["+ maxWait+ "ms])");
      }
      if (_log.shouldLog(Log.DEBUG))       _log.debug("TIMING: RemoteID set to " + I2PSocketManager.getReadableForm(remoteID) + " for "+ this.hashCode());
    }
    return remoteID;
  }
}
