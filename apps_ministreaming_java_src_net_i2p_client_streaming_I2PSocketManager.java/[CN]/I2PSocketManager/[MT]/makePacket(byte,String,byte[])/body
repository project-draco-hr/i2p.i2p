{
  byte[] packet=new byte[payload.length + 4];
  packet[0]=type;
  byte[] temp=toBytes(id);
  if (temp.length != 3)   throw new RuntimeException("Incorrect ID length: " + temp.length);
  System.arraycopy(temp,0,packet,1,3);
  System.arraycopy(payload,0,packet,4,payload.length);
  return packet;
}
