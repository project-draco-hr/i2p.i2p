{
  String localId=sock.getLocalID();
  boolean removed=false;
synchronized (lock) {
    removed=(null != _inSockets.remove(localId));
    removed=removed || (null != _outSockets.remove(localId));
    lock.notify();
  }
  long now=_context.clock().now();
  long lifetime=now - sock.getCreatedOn();
  long timeSinceClose=now - sock.getClosedOn();
  long sent=sock.getBytesSent();
  long recv=sock.getBytesReceived();
  if (_log.shouldLog(Log.DEBUG)) {
    _log.debug(getName() + ": Removing socket \"" + getReadableForm(localId)+ "\" ["+ sock+ ", send: "+ sent+ ", recv: "+ recv+ ", lifetime: "+ lifetime+ "ms, time since close: "+ timeSinceClose+ " removed? "+ removed+ ")]",new Exception("removeSocket called"));
  }
  _context.statManager().addRateData("streaming.lifetime",lifetime,lifetime);
  _context.statManager().addRateData("streaming.sent",sent,lifetime);
  _context.statManager().addRateData("streaming.received",recv,lifetime);
  if (sent > recv) {
    _context.statManager().addRateData("streaming.transferBalance",1,lifetime);
  }
 else   if (recv > sent) {
    _context.statManager().addRateData("streaming.transferBalance",-1,lifetime);
  }
 else {
  }
}
