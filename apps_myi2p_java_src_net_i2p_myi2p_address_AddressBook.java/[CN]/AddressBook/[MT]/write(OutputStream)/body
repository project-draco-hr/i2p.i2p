{
  try {
synchronized (_entries) {
      DataHelper.writeLong(out,2,_entries.size());
      for (Iterator iter=_entries.values().iterator(); iter.hasNext(); ) {
        AddressBookEntry entry=(AddressBookEntry)iter.next();
        entry.write(out);
      }
    }
synchronized (_conflictingReferences) {
      DataHelper.writeLong(out,2,_conflictingReferences.size());
      for (int i=0; i < _conflictingReferences.size(); i++) {
        NameReference ref=(NameReference)_conflictingReferences.get(i);
        ref.write(out);
      }
    }
  }
 catch (  DataFormatException dfe) {
    throw new IOException("Corrupt address book - " + dfe.getMessage());
  }
}
