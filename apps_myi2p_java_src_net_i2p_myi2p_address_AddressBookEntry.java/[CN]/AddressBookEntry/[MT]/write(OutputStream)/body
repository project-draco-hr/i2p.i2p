{
  try {
    if ((_localName != null) && (_localName.trim().length() > 0)) {
      DataHelper.writeBoolean(out,Boolean.TRUE);
      DataHelper.writeString(out,_localName);
    }
 else {
      DataHelper.writeBoolean(out,Boolean.FALSE);
    }
    DataHelper.writeDate(out,new Date(_addedOn));
synchronized (_options) {
      DataHelper.writeProperties(out,_options);
    }
    if (_reference != null) {
      DataHelper.writeBoolean(out,Boolean.TRUE);
      _reference.write(out);
    }
 else {
      DataHelper.writeBoolean(out,Boolean.FALSE);
    }
    if (_subscription != null) {
      DataHelper.writeBoolean(out,Boolean.TRUE);
      _subscription.write(out);
    }
 else {
      DataHelper.writeBoolean(out,Boolean.FALSE);
    }
  }
 catch (  DataFormatException dfe) {
    throw new IOException("Corrupt subscription: " + dfe.getMessage());
  }
}
