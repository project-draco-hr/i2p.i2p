{
  FileInputStream fis=null;
  try {
    fis=new FileInputStream(from);
    AddressBook addressBook=new AddressBook(_context);
    addressBook.read(fis);
    _addressBook=addressBook;
    Properties props=DataHelper.readProperties(fis);
    Map log=new HashMap(props.size());
    for (Iterator iter=props.keySet().iterator(); iter.hasNext(); ) {
      String key=(String)iter.next();
      String event=props.getProperty(key);
      long when=0;
      try {
        when=Long.parseLong(key);
        while (log.containsKey(new Long(when)))         when++;
        log.put(new Long(when),event);
      }
 catch (      NumberFormatException nfe) {
        if (_log.shouldLog(Log.WARN))         _log.warn("Corrupt activity log entry: when=" + key,nfe);
      }
    }
    _activityLog=log;
  }
 catch (  Exception e) {
    _error=e;
    _errorMessage="Error reading the address book from " + from;
  }
}
