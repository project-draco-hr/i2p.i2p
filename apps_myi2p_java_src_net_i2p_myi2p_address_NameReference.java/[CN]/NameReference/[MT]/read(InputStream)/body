{
  byte versionBuf[]=new byte[VERSION_PREFIX.length];
  int len=DataHelper.read(in,versionBuf);
  if (len != versionBuf.length)   throw new IllegalArgumentException("Version length too short (" + len + ")");
  if (!DataHelper.eq(versionBuf,VERSION_PREFIX))   throw new IllegalArgumentException("Version mismatch (" + new String(versionBuf) + ")");
  Destination dest=new Destination();
  dest.readBytes(in);
  long seq=DataHelper.readLong(in,4);
  String name=DataHelper.readString(in);
  String type=DataHelper.readString(in);
  Properties opts=DataHelper.readProperties(in);
  Signature sig=new Signature();
  sig.readBytes(in);
  _destination=dest;
  _sequenceNum=seq;
  _preferredName=name;
  _serviceType=type;
  _options=opts;
  _signature=sig;
}
