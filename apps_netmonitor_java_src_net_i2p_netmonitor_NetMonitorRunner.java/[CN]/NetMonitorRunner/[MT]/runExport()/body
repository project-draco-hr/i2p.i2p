{
  _log.info("Export");
  List peers=_monitor.getPeers();
  File exportDir=new File(_monitor.getExportDir());
  if (!exportDir.exists())   exportDir.mkdirs();
  for (int i=0; i < peers.size(); i++) {
    String peerName=(String)peers.get(i);
    PeerSummary summary=(PeerSummary)_monitor.getSummary(peerName);
    FileOutputStream fos=null;
    try {
      File summaryFile=new File(exportDir,peerName + ".txt");
      fos=new FileOutputStream(summaryFile);
      PeerSummaryWriter.getInstance().write(summary,fos);
      _log.debug("Peer summary written to " + summaryFile.getAbsolutePath());
    }
 catch (    IOException ioe) {
      _log.error("Error exporting the peer summary for " + peerName,ioe);
    }
catch (    Throwable t) {
      _log.error("Unhandled exception exporting the data",t);
    }
 finally {
      if (fos != null)       try {
        fos.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
}
