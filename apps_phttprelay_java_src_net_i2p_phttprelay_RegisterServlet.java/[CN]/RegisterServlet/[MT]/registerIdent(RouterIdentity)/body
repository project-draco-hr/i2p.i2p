{
  File identDir=getIdentDir(ident.getHash().toBase64());
  boolean created=identDir.mkdirs();
  File identFile=new File(identDir,"identity.dat");
  FileOutputStream fos=null;
  try {
    fos=new FileOutputStream(identFile);
    ident.writeBytes(fos);
  }
  finally {
    if (fos != null)     try {
      fos.close();
    }
 catch (    IOException ioe) {
    }
  }
  log("Identity registered into " + identFile.getAbsolutePath());
  return true;
}
