{
  if (name == null)   throw new NullPointerException("parameter name cannot be null");
  if (!Util.isNameChar(name)) {
    throw new IllegalArgumentException("parameter name " + "may only contain letters, digits, ., /, +, " + "-, _");
  }
  if (name.startsWith("__") && name.endsWith("__"))   throw new IllegalArgumentException("parameter name " + "may not start and end with a double " + "underscore");
  if (die_on_bad_params && !__template__.contains(name))   throw new IllegalArgumentException(name + "is not a valid template entity");
  if (value == null)   value="";
  String type=value.getClass().getName();
  if (type.indexOf(".") > 0)   type=type.substring(type.lastIndexOf(".") + 1);
  String valid_types=",String,Vector,Boolean,Integer,Template";
  if (valid_types.indexOf(type) < 0)   throw new ClassCastException("value is neither scalar nor list nor Template");
  name=case_sensitive ? name : name.toLowerCase();
  if (!case_sensitive && type.equals("Vector")) {
    value=lowerCaseAll((Vector)value);
  }
  Util.debug_print("setting: " + name);
  params.put(name,value);
  dirty=true;
  return value;
}
