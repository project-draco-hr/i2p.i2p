{
  StringBuffer s=new StringBuffer();
  String no_escape="./-_";
  for (int i=0; i < url.length(); i++) {
    char c=url.charAt(i);
    if (!Character.isLetterOrDigit(c) && no_escape.indexOf(c) < 0) {
      String h=Integer.toHexString((int)c);
      s.append("%");
      if (h.length() < 2)       s.append("0");
      s.append(h);
    }
 else {
      s.append(c);
    }
  }
  return s.toString();
}
