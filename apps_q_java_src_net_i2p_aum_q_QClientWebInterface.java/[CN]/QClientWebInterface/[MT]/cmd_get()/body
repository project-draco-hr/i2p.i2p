{
  Hashtable result=null;
  String status=null;
  Hashtable metadata=null;
  String mimetype=null;
  if (node == null) {
    return false;
  }
  if (!allVars.containsKey("uri")) {
    return false;
  }
  String uri=allVars.get("uri",0);
  if (!uri.startsWith("Q:")) {
    uri="Q:" + uri;
  }
  result=node.getItem(uri);
  status=(String)result.get("status");
  if (status.equals("ok")) {
    metadata=(Hashtable)result.get("metadata");
    mimetype=(String)metadata.get("mimetype");
    boolean isIE=false;
    for (Enumeration e=headerVars.get("User-Agent").elements(); e.hasMoreElements(); ) {
      String val=((String)e.nextElement()).toLowerCase();
      if (val.matches(".*(msie|windows|\\.net).*")) {
        Template warning=loadTemplate("msiealert");
        addToMainPane(warning);
        return false;
      }
    }
    if (isRunningOverTcp) {
      if (mimetype.startsWith("text")) {
        Template warning=loadTemplate("anonalert");
        warning.setParam("dest",node.destStr);
        addToMainPane(warning);
        return false;
      }
      setContentType("application/octet-stream");
    }
 else {
      setContentType(mimetype);
    }
    setRawOutput((byte[])result.get("data"));
    return true;
  }
 else {
    tmplt.setParam("show_404","1");
    tmplt.setParam("404_uri",uri);
    return false;
  }
}
