{
  findNode();
  determineIfNodeIsRunning();
  Hashtable vars=parseVars(request.getQueryString());
  response.setContentType("text/html");
  PrintWriter out=response.getWriter();
  out.println("<html>");
  out.println("<head>");
  out.println("<title>QConsole</title>");
  out.println("</head>");
  out.println("<body>");
  out.println("<h1>Q Node Manager</h1>");
  if (vars.containsKey("startnode") && !nodeIsRunning) {
    startNode();
    if (!nodeIsRunning) {
      out.println("Failed to start node :(<br><br>");
    }
  }
 else   if (vars.containsKey("stopnode") && nodeIsRunning) {
    stopNode();
    nodeIsRunning=false;
  }
  if (nodeIsRunning) {
    out.println("Q Node is running<br><br>");
    out.print("<a href=\"http://localhost:7651\">Node Console</a>");
    out.print(" | ");
    out.println("<a href=\"/q?stopnode\">Stop Node</a>");
  }
 else {
    out.println("Q Node is not running<br><br>");
    out.println("<a href=\"/q?startnode\">Start Node</a>");
  }
  out.println("</body>");
  out.println("</html>");
  out.close();
}
