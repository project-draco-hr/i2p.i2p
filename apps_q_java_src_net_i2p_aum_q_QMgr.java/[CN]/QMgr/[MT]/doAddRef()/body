{
  if (argi < argc) {
    String path=args[argi];
    String raw;
    try {
      raw=new SimpleFile(path,"r").read().trim();
    }
 catch (    IOException e) {
      e.printStackTrace();
      System.out.println("addref: failed to open file '" + path + "'");
      return 1;
    }
    String[] lines=raw.split("\\s+");
    for (int i=0; i < lines.length; i++) {
      String line=lines[i];
      if (line.substring(0,1).equals("#")) {
        continue;
      }
      if (!doAddOneRef(line)) {
        return 1;
      }
    }
  }
 else {
    InputStreamReader rIn=new InputStreamReader(System.in);
    BufferedReader brIn=new BufferedReader(rIn);
    String line;
    while (true) {
      try {
        line=brIn.readLine();
      }
 catch (      IOException e) {
        e.printStackTrace();
        return 1;
      }
      if (line == null) {
        break;
      }
      if (!doAddOneRef(line)) {
        return 1;
      }
    }
  }
  return 0;
}
