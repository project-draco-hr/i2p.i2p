{
  String[] startForegroundArgs;
  int i;
  Hashtable customProps=new Hashtable();
  Properties sysprops=System.getProperties();
  for (i=0; i < commonI2PSystemPropertyKeys.length; i++) {
    String key=commonI2PSystemPropertyKeys[i];
    if (sysprops.containsKey(key)) {
      customProps.put(key,sysprops.get(key));
    }
  }
  args[cmdIdx]="foreground";
  startForegroundArgs=new String[argc + 2 + customProps.size()];
  startForegroundArgs[0]="java";
  i=1;
  Enumeration keys=customProps.keys();
  while (keys.hasMoreElements()) {
    String key=(String)keys.nextElement();
    String val=(String)customProps.get(key);
    startForegroundArgs[i++]="-D" + key + "="+ val;
  }
  startForegroundArgs[i++]="net.i2p.aum.q.QMgr";
  for (int j=0; j < args.length; j++) {
    startForegroundArgs[i + j]=args[j];
  }
  try {
    runtime.exec(startForegroundArgs,null);
    for (i=0; i < startForegroundArgs.length; i++) {
      System.out.println("start: arg[" + i + "]="+ startForegroundArgs[i]);
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
    return 1;
  }
  return 0;
}
