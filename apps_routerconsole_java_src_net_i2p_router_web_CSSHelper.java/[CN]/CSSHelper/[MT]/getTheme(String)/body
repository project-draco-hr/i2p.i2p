{
  String url=BASE_THEME_PATH;
  if (userAgent != null && userAgent.contains("MSIE")) {
    url+=FORCE + "/";
  }
 else {
    if (_context == null)     throw new IllegalStateException("No contexts. This is usually because the router is either starting up or shutting down.");
    String theme=_context.readConfigFile(THEME_CONFIG_FILE).getProperty(PROP_THEME_NAME,DEFAULT_THEME);
    url+=theme + "/";
  }
  return url;
}
