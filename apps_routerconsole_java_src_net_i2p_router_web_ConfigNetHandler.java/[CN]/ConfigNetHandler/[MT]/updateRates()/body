{
  boolean updated=false;
  if (_sharePct != null) {
    String old=_context.router().getConfigSetting(Router.PROP_BANDWIDTH_SHARE_PERCENTAGE);
    if ((old == null) || (!old.equalsIgnoreCase(_sharePct))) {
      _context.router().setConfigSetting(Router.PROP_BANDWIDTH_SHARE_PERCENTAGE,_sharePct);
      addFormNotice("Updating bandwidth share percentage");
      updated=true;
    }
  }
  if ((_inboundRate != null) && (_inboundRate.length() > 0) && !_inboundRate.equals(_context.getProperty(FIFOBandwidthRefiller.PROP_INBOUND_BANDWIDTH,"" + FIFOBandwidthRefiller.DEFAULT_INBOUND_BANDWIDTH))) {
    _context.router().setConfigSetting(FIFOBandwidthRefiller.PROP_INBOUND_BANDWIDTH,_inboundRate);
    updated=true;
  }
  if ((_outboundRate != null) && (_outboundRate.length() > 0) && !_outboundRate.equals(_context.getProperty(FIFOBandwidthRefiller.PROP_OUTBOUND_BANDWIDTH,"" + FIFOBandwidthRefiller.DEFAULT_OUTBOUND_BANDWIDTH))) {
    _context.router().setConfigSetting(FIFOBandwidthRefiller.PROP_OUTBOUND_BANDWIDTH,_outboundRate);
    updated=true;
  }
  if ((_inboundBurstRate != null) && (_inboundBurstRate.length() > 0) && !_inboundBurstRate.equals(_context.getProperty(FIFOBandwidthRefiller.PROP_INBOUND_BURST_BANDWIDTH,"" + FIFOBandwidthRefiller.DEFAULT_INBOUND_BURST_BANDWIDTH))) {
    _context.router().setConfigSetting(FIFOBandwidthRefiller.PROP_INBOUND_BURST_BANDWIDTH,_inboundBurstRate);
    updated=true;
  }
  if ((_outboundBurstRate != null) && (_outboundBurstRate.length() > 0) && !_outboundBurstRate.equals(_context.getProperty(FIFOBandwidthRefiller.PROP_OUTBOUND_BURST_BANDWIDTH,"" + FIFOBandwidthRefiller.DEFAULT_OUTBOUND_BURST_BANDWIDTH))) {
    _context.router().setConfigSetting(FIFOBandwidthRefiller.PROP_OUTBOUND_BURST_BANDWIDTH,_outboundBurstRate);
    updated=true;
  }
  String inBurstRate=_context.router().getConfigSetting(FIFOBandwidthRefiller.PROP_INBOUND_BURST_BANDWIDTH);
  if (_inboundBurst != null) {
    int rateKBps=0;
    int burstSeconds=0;
    try {
      rateKBps=Integer.parseInt(inBurstRate);
      burstSeconds=Integer.parseInt(_inboundBurst);
    }
 catch (    NumberFormatException nfe) {
    }
    if ((rateKBps > 0) && (burstSeconds > 0)) {
      int kb=rateKBps * burstSeconds;
      _context.router().setConfigSetting(FIFOBandwidthRefiller.PROP_INBOUND_BANDWIDTH_PEAK,"" + kb);
      updated=true;
    }
  }
  String outBurstRate=_context.router().getConfigSetting(FIFOBandwidthRefiller.PROP_OUTBOUND_BURST_BANDWIDTH);
  if (_outboundBurst != null) {
    int rateKBps=0;
    int burstSeconds=0;
    try {
      rateKBps=Integer.parseInt(outBurstRate);
      burstSeconds=Integer.parseInt(_outboundBurst);
    }
 catch (    NumberFormatException nfe) {
    }
    if ((rateKBps > 0) && (burstSeconds > 0)) {
      int kb=rateKBps * burstSeconds;
      _context.router().setConfigSetting(FIFOBandwidthRefiller.PROP_OUTBOUND_BANDWIDTH_PEAK,"" + kb);
      updated=true;
    }
  }
  if (updated && !_ratesOnly) {
    _context.bandwidthLimiter().reinitialize();
    addFormNotice("Updated bandwidth limits");
  }
}
