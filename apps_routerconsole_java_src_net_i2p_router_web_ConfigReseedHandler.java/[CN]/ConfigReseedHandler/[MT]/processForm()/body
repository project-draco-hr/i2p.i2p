{
  if (_action.equals(_("Save changes and reseed now"))) {
    saveChanges();
    if (!_context.netDb().reseedChecker().requestReseed()) {
      addFormError(_("Reseeding is already in progress"));
    }
 else {
      addFormNotice(_("Starting reseed process"));
    }
  }
 else   if (_action.equals(_("Reseed from URL"))) {
    String val=getJettyString("url");
    if (val != null)     val=val.trim();
    if (val == null || val.length() == 0) {
      addFormError(_("You must enter a URL"));
      return;
    }
    URL url;
    try {
      url=new URL(val);
    }
 catch (    MalformedURLException mue) {
      addFormError(_("Bad URL {0}",val));
      return;
    }
    try {
      if (!_context.netDb().reseedChecker().requestReseed(url)) {
        addFormError(_("Reseeding is already in progress"));
      }
 else {
        for (int i=0; i < 40; i++) {
          try {
            Thread.sleep(500);
          }
 catch (          InterruptedException ie) {
          }
          if (!_context.netDb().reseedChecker().inProgress())           break;
        }
        String status=_context.netDb().reseedChecker().getStatus();
        String error=_context.netDb().reseedChecker().getError();
        if (error.length() > 0) {
          addFormErrorNoEscape(error);
        }
 else         if (status.length() > 0) {
          addFormNoticeNoEscape(status);
        }
 else         if (_context.netDb().reseedChecker().inProgress()) {
          addFormNotice(_("Reseed in progress, check summary bar for status"));
        }
 else {
          addFormNotice(_("Reseed complete, check summary bar for status"));
        }
      }
    }
 catch (    IllegalArgumentException iae) {
      addFormError(_("Bad URL {0}",val) + " - " + iae.getMessage());
    }
  }
 else   if (_action.equals(_("Reseed from file"))) {
    InputStream in=_requestWrapper.getInputStream("file");
    try {
      if (in == null || in.available() <= 0) {
        addFormError(_("You must enter a file"));
        return;
      }
      int count=_context.netDb().reseedChecker().requestReseed(in);
      if (count <= 0) {
        addFormError(_("Reseed from file failed"));
      }
 else {
        addFormNotice(ngettext("Reseed successful, loaded {0} router info from file","Reseed successful, loaded {0} router infos from file",count));
      }
    }
 catch (    IOException ioe) {
      addFormError(_("Reseed from file failed") + " - " + ioe);
    }
 finally {
      if (in != null)       try {
        in.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
 else   if (_action.equals(_("Save changes"))) {
    saveChanges();
  }
 else   if (_action.equals(_("Reset URL list"))) {
    resetUrlList();
  }
}
