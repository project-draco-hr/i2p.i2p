{
  if (_action.equals(_("Save changes and reseed now"))) {
    saveChanges();
    if (!_context.netDb().reseedChecker().requestReseed()) {
      addFormError(_("Reseeding is already in progress"));
    }
 else {
      addFormNotice(_("Starting reseed process"));
    }
  }
 else   if (_action.equals(_("Reseed from URL"))) {
    String val=getJettyString("url");
    if (val != null)     val=val.trim();
    if (val == null || val.length() == 0) {
      addFormError(_("You must enter a URL"));
      return;
    }
    URL url;
    try {
      url=new URL(val);
    }
 catch (    MalformedURLException mue) {
      addFormError(_("Bad URL {0}",val));
      return;
    }
    try {
      if (!_context.netDb().reseedChecker().requestReseed(url)) {
        addFormError(_("Reseeding is already in progress"));
      }
 else {
        for (int i=0; i < 20; i++) {
          try {
            Thread.sleep(1000);
          }
 catch (          InterruptedException ie) {
          }
          if (!_context.netDb().reseedChecker().inProgress()) {
            String status=_context.netDb().reseedChecker().getStatus();
            if (status.length() > 0)             addFormNotice(status);
 else             addFormNotice(_("Ressed complete, check summary bar for status"));
            return;
          }
        }
        if (_context.netDb().reseedChecker().inProgress()) {
          String status=_context.netDb().reseedChecker().getStatus();
          if (status.length() > 0)           addFormNotice(status);
 else           addFormNotice(_("Ressed in progress, check summary bar for status"));
        }
      }
    }
 catch (    IllegalArgumentException iae) {
      addFormError(_("Bad URL {0}",val) + " - " + iae.getMessage());
    }
  }
 else   if (_action.equals(_("Reseed from file"))) {
    String val=getJettyString("file");
    if (val == null || val.length() == 0) {
      addFormError(_("You must enter a file"));
      return;
    }
    ByteArrayInputStream bais=new ByteArrayInputStream(DataHelper.getASCII(val));
    try {
      int count=_context.netDb().reseedChecker().requestReseed(bais);
      if (count <= 0) {
        addFormError(_("Reseed from file failed"));
      }
 else {
        addFormNotice(ngettext("Reseed successful, loaded {0} router info from file","Reseed successful, loaded {0} router infos from file",count));
      }
    }
 catch (    IOException ioe) {
      addFormError(_("Reseed from file failed") + " - " + ioe);
    }
  }
 else   if (_action.equals(_("Save changes"))) {
    saveChanges();
  }
}
