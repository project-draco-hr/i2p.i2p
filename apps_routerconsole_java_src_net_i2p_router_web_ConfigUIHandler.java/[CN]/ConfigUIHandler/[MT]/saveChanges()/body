{
  if (_config == null)   return;
  Map<String,String> changes=new HashMap();
  List<String> removes=new ArrayList();
  String oldTheme=_context.getProperty(CSSHelper.PROP_THEME_NAME,CSSHelper.DEFAULT_THEME);
  boolean oldForceMobileConsole=_context.getBooleanProperty(CSSHelper.PROP_FORCE_MOBILE_CONSOLE);
  if (_config.equals("default"))   removes.add(CSSHelper.PROP_THEME_NAME);
 else   changes.put(CSSHelper.PROP_THEME_NAME,_config);
  if (_universalTheming)   changes.put(CSSHelper.PROP_UNIVERSAL_THEMING,"true");
 else   removes.add(CSSHelper.PROP_UNIVERSAL_THEMING);
  if (_forceMobileConsole)   changes.put(CSSHelper.PROP_FORCE_MOBILE_CONSOLE,"true");
 else   removes.add(CSSHelper.PROP_FORCE_MOBILE_CONSOLE);
  boolean ok=_context.router().saveConfig(changes,removes);
  if (ok) {
    if (!oldTheme.equals(_config))     addFormNotice(_("Theme change saved.") + " <a href=\"configui\">" + _("Refresh the page to view.")+ "</a>");
    if (oldForceMobileConsole != _forceMobileConsole)     addFormNotice(_("Mobile console option saved.") + " <a href=\"configui\">" + _("Refresh the page to view.")+ "</a>");
  }
 else {
    addFormError(_("Error saving the configuration (applied but not saved) - please see the error logs."));
  }
}
