{
  if ("true".equals(System.getProperty(PROP_UPDATE_IN_PROGRESS))) {
    _log.error("Update already running");
    return;
  }
synchronized (UpdateHandler.class) {
    Properties props=PluginStarter.pluginProperties(_context,appName);
    String oldVersion=props.getProperty("version");
    String xpi2pURL=props.getProperty("updateURL");
    if (oldVersion == null || xpi2pURL == null) {
      updateStatus("<b>" + _("Cannot check, plugin {0} is not installed",appName) + "</b>");
      return;
    }
    if (_pluginUpdateCheckerRunner == null)     _pluginUpdateCheckerRunner=new PluginUpdateCheckerRunner();
    if (_pluginUpdateCheckerRunner.isRunning())     return;
    _xpi2pURL=xpi2pURL;
    _appName=appName;
    _oldVersion=oldVersion;
    System.setProperty(PROP_UPDATE_IN_PROGRESS,"true");
    I2PAppThread update=new I2PAppThread(_pluginUpdateCheckerRunner,"AppChecker",true);
    update.start();
  }
}
