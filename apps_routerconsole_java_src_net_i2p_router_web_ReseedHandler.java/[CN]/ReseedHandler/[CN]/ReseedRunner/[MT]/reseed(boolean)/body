{
  String seedURL=_context.getProperty("i2p.reseedURL",DEFAULT_SEED_URL);
  if ((seedURL == null) || (seedURL.trim().length() <= 0))   seedURL=DEFAULT_SEED_URL;
  try {
    System.setProperty("net.i2p.router.web.ReseedHandler.errorMessage","");
    System.setProperty("net.i2p.router.web.ReseedHandler.statusMessage","Reseeding: fetching seed URL.");
    URL dir=new URL(seedURL);
    byte contentRaw[]=readURL(dir);
    if (contentRaw == null) {
      System.setProperty("net.i2p.router.web.ReseedHandler.errorMessage","Last reseed failed fully (failed reading seed URL). " + "Ensure that nothing blocks outbound HTTP, check <a href=logs.jsp>logs</a> " + "and if nothing helps, read FAQ about reseeding manually.");
      _log.debug("Failed reading seed URL: " + seedURL);
      return;
    }
    String content=new String(contentRaw);
    Set urls=new HashSet();
    int cur=0;
    while (true) {
      int start=content.indexOf("href=\"routerInfo-",cur);
      if (start < 0)       break;
      int end=content.indexOf(".dat\">",start);
      String name=content.substring(start + "href=\"routerInfo-".length(),end);
      urls.add(name);
      cur=end + 1;
    }
    if (urls.size() <= 0) {
      _log.error("Read " + contentRaw.length + " bytes from seed "+ seedURL+ ", but found no routerInfo URLs.");
      System.setProperty("net.i2p.router.web.ReseedHandler.errorMessage","Last reseed failed fully (no routerInfo URLs at seed URL). " + "Ensure that nothing blocks outbound HTTP, check <a href=logs.jsp>logs</a> " + "and if nothing helps, read FAQ about reseeding manually.");
      return;
    }
    int fetched=0;
    int errors=0;
    for (Iterator iter=urls.iterator(); iter.hasNext(); ) {
      try {
        System.setProperty("net.i2p.router.web.ReseedHandler.statusMessage","Reseeding: fetching router info from seed URL (" + fetched + " successful, "+ errors+ " errors, "+ urls.size()+ " total).");
        fetchSeed(seedURL,(String)iter.next());
        fetched++;
        if (echoStatus) {
          System.out.print(".");
          if (fetched % 60 == 0)           System.out.println();
        }
      }
 catch (      Exception e) {
        errors++;
      }
    }
    if (echoStatus)     System.out.println();
    if (errors > 0) {
      System.setProperty("net.i2p.router.web.ReseedHandler.errorMessage","Last reseed failed partly (" + errors + " of "+ urls.size()+ "). "+ "Ensure that nothing blocks outbound HTTP, check <a href=logs.jsp>logs</a> "+ "and if nothing helps, read FAQ about reseeding manually.");
    }
  }
 catch (  Throwable t) {
    System.setProperty("net.i2p.router.web.ReseedHandler.errorMessage","Last reseed failed fully (exception caught). " + "Ensure that nothing blocks outbound HTTP, check <a href=logs.jsp>logs</a> " + "and if nothing helps, read FAQ about reseeding manually.");
    _log.error("Error reseeding",t);
  }
}
