{
  if (_context.commSystem().isDummy())   return "VM Comm System";
  if (_context.router().getUptime() > 60 * 1000 && (!_context.router().gracefulShutdownInProgress()) && !_context.clientManager().isAlive())   return _("ERR-Client Manager I2CP Error - check logs");
  long skew=_context.commSystem().getFramedAveragePeerClockSkew(33);
  if (Math.abs(skew) > 30 * 1000)   return _("ERR-Clock Skew of {0}",DataHelper.formatDuration2(Math.abs(skew)));
  if (_context.router().isHidden())   return _("Hidden");
  RouterInfo routerInfo=_context.router().getRouterInfo();
  if (routerInfo == null)   return _("Testing");
  int status=_context.commSystem().getReachabilityStatus();
switch (status) {
case CommSystemFacade.STATUS_OK:
    RouterAddress ra=routerInfo.getTargetAddress("NTCP");
  if (ra == null || TransportUtil.isPubliclyRoutable(ra.getIP(),true))   return _("OK");
return _("ERR-Private TCP Address");
case CommSystemFacade.STATUS_DIFFERENT:
return _("ERR-SymmetricNAT");
case CommSystemFacade.STATUS_REJECT_UNSOLICITED:
if (routerInfo.getTargetAddress("NTCP") != null) return _("WARN-Firewalled with Inbound TCP Enabled");
if (((FloodfillNetworkDatabaseFacade)_context.netDb()).floodfillEnabled()) return _("WARN-Firewalled and Floodfill");
return _("Firewalled");
case CommSystemFacade.STATUS_DISCONNECTED:
return _("Disconnected - check network cable");
case CommSystemFacade.STATUS_HOSED:
return _("ERR-UDP Port In Use - Set i2np.udp.internalPort=xxxx in advanced config and restart");
case CommSystemFacade.STATUS_UNKNOWN:
default :
ra=routerInfo.getTargetAddress("SSU");
if (ra == null && _context.router().getUptime() > 5 * 60 * 1000) {
if (getActivePeers() <= 0) return _("ERR-No Active Peers, Check Network Connection and Firewall");
 else if (_context.getProperty(ConfigNetHelper.PROP_I2NP_NTCP_HOSTNAME) == null || _context.getProperty(ConfigNetHelper.PROP_I2NP_NTCP_PORT) == null) return _("ERR-UDP Disabled and Inbound TCP host/port not set");
 else return _("WARN-Firewalled with UDP Disabled");
}
return _("Testing");
}
}
