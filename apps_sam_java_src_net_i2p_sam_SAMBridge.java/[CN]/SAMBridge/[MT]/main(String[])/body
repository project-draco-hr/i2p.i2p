{
  String keyfile=DEFAULT_SAM_KEYFILE;
  int port=SAM_LISTENPORT;
  String host="0.0.0.0";
  Properties opts=null;
  if (args.length > 0) {
    keyfile=args[0];
    int portIndex=1;
    try {
      port=Integer.parseInt(args[portIndex]);
    }
 catch (    NumberFormatException nfe) {
      host=args[1];
      portIndex++;
      try {
        port=Integer.parseInt(args[portIndex]);
      }
 catch (      NumberFormatException nfe1) {
        usage();
        return;
      }
    }
    opts=parseOptions(args,portIndex + 1);
  }
  SAMBridge bridge=new SAMBridge(host,port,opts,keyfile);
  I2PAppThread t=new I2PAppThread(bridge,"SAMListener");
  if (Boolean.valueOf(System.getProperty("sam.shutdownOnOOM","false")).booleanValue()) {
    t.addOOMEventThreadListener(new I2PAppThread.OOMEventListener(){
      public void outOfMemory(      OutOfMemoryError err){
        err.printStackTrace();
        System.err.println("OOMed, die die die");
        System.exit(-1);
      }
    }
);
  }
  t.start();
}
