{
synchronized (nameToPrivKeys) {
    FileOutputStream out=null;
    try {
      out=new FileOutputStream(persistFilename);
      for (      Map.Entry<String,String> entry : nameToPrivKeys.entrySet()) {
        String name=entry.getKey();
        String privKeys=entry.getValue();
        out.write(name.getBytes("UTF-8"));
        out.write('=');
        out.write(privKeys.getBytes("UTF-8"));
        out.write('\n');
      }
      if (_log.shouldInfo())       _log.info("Saved " + nameToPrivKeys.size() + " private keys to "+ persistFilename);
    }
 catch (    IOException ioe) {
      _log.error("Error writing out the SAM keys to " + persistFilename,ioe);
    }
 finally {
      if (out != null)       try {
        out.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
}
