{
  Integer id;
  Set keySet;
  Iterator iter;
synchronized (handlersMapLock) {
    keySet=handlersMap.keySet();
    iter=keySet.iterator();
    while (iter.hasNext()) {
      id=(Integer)iter.next();
      handlersMap.get(id).stopRunning();
      sendersMap.get(id).shutDownGracefully();
    }
    handlersMap.clear();
    sendersMap.clear();
  }
}
