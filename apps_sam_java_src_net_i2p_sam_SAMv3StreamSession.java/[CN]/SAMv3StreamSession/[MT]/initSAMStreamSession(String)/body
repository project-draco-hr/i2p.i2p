{
  SAMv3Handler.SessionRecord rec=getDB().get(login);
  String dest=rec.getDest();
  ByteArrayInputStream ba_dest=new ByteArrayInputStream(Base64.decode(dest));
  this.recv=rec.getHandler();
  _log.debug("SAM STREAM session instantiated");
  Properties allprops=(Properties)System.getProperties().clone();
  allprops.putAll(rec.getProps());
  String i2cpHost=allprops.getProperty(I2PClient.PROP_TCP_HOST,"127.0.0.1");
  int i2cpPort;
  String port=allprops.getProperty(I2PClient.PROP_TCP_PORT,"7654");
  try {
    i2cpPort=Integer.parseInt(port);
  }
 catch (  NumberFormatException nfe) {
    throw new SAMException("Invalid I2CP port specified [" + port + "]");
  }
  _log.debug("Creating I2PSocketManager...");
  socketMgr=I2PSocketManagerFactory.createManager(ba_dest,i2cpHost,i2cpPort,allprops);
  if (socketMgr == null) {
    throw new SAMException("Error creating I2PSocketManager towards " + i2cpHost + ":"+ i2cpPort);
  }
  socketMgr.addDisconnectListener(new DisconnectListener());
  this.nick=login;
}
