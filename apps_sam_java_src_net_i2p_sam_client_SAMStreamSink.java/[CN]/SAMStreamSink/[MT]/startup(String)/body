{
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Starting up");
  try {
    Socket sock=connect();
    _reader=new SAMReader(_context,sock.getInputStream(),_eventHandler);
    _reader.startReading();
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Reader created");
    OutputStream out=sock.getOutputStream();
    String ourDest=handshake(out,version,true);
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Handshake complete.  we are " + ourDest);
    if (ourDest != null) {
      writeDest(ourDest);
    }
 else {
      _reader.stopReading();
    }
  }
 catch (  IOException e) {
    _log.error("Unable to connect to SAM at " + _samHost + ":"+ _samPort,e);
  }
}
