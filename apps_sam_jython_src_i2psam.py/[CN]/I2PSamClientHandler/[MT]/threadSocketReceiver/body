def threadSocketReceiver(self, sock, id):
    '\n        One of these gets launched each time a new stream connection\n        is created. Due to the lack of callback mechanism within the\n        ministreaming API, we have to actively poll for and send back\n        received data\n        '
    while 1:
        try:
            buf = sock.recv(1)
        except:
            logException(4, 'Exception reading first byte')
        if (buf == ''):
            log(4, 'stream closed')
            self.samSend('STREAM', 'CLOSED', ID=id)
            return
        navail = sock.available()
        if (navail > 0):
            rest = sock.recv(navail)
            buf += rest
        log(4, ('got from peer: %s' % repr(buf)))
        self.samSend('STREAM', 'RECEIVED', buf, ID=id)
