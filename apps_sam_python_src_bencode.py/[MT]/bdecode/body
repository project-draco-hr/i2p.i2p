def bdecode(x):
    try:
        (r, l) = bdecode_rec(x, 0)
    except IndexError:
        raise ValueError
    if (l != len(x)):
        raise ValueError
    return r
