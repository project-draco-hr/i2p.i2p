def recv(self, bufsize, flags=0):
    timeout = self.timeout
    (peek, waitall, dontwait) = ((flags & MSG_PEEK), (flags & MSG_WAITALL), (flags & MSG_DONTWAIT))
    if dontwait:
        timeout = 0.0
    if (self.type == SOCK_STREAM):
        self._verify_connected()
        return self.sessobj.recv(bufsize, timeout, peek, waitall)
    else:
        return self.recvfrom(bufsize, flags)[0]
