def __getitem__(self, idx):
    '\n        Allow the table to be indexed by any of:\n            - KPeerQueryRecord\n            - integer index\n            - long string - treated as dest\n            - short string - treated as peer id hash string\n            - KHash - finds peer with that id\n            - KPeer - returns peer with that peer\n        '
    if (type(idx) == type(0)):
        return self.peers[idx]
    elif isinstance(idx, KPeer):
        for peer in self.peers:
            if (peer.peer == idx):
                return peer
        raise IndexError(('Query table has no peer %s' % idx))
    elif isinstance(idx, str):
        if (len(str) > 512):
            for peer in self.peers:
                if (peer.peer.dest == idx):
                    return peer
            raise IndexError(('No peer with dest %s' % idx))
        else:
            for peer in self.peers:
                if (peer.peer.id.value == idx):
                    return peer
            raise IndexError(('No peer with dest hash %s' % idx))
    elif isinstance(idx, KHash):
        for peer in self.peers:
            if (peer.peer.id == idx):
                return peer
            raise IndexError(('No peer with id %s' % idx))
    else:
        raise IndexError(('Invalid selector %s' % repr(idx)))
