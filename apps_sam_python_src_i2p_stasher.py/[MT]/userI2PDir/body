def userI2PDir(nodeName=None):
    "\n    Returns a directory under user's home dir into which\n    stasher files can be written\n\n    If nodename is given, a subdirectory will be found/created\n    \n    Return value is toplevel storage dir if nodename not given, \n    otherwise absolute path including node dir\n    "
    if (dataDir != None):
        if (not os.path.isdir(dataDir)):
            os.makedirs(dataDir)
        return dataDir
    if (sys.platform == 'win32'):
        home = os.getenv('APPDATA')
        if home:
            topDir = os.path.join(home, 'stasher')
        else:
            topDir = os.path.join(os.getcwd(), 'stasher')
    else:
        topDir = os.path.join(os.path.expanduser('~'), '.stasher')
    if (not os.path.isdir(topDir)):
        os.makedirs(topDir)
    if (nodeName == None):
        return topDir
    else:
        nodeDir = os.path.join(topDir, nodeName)
        if (not os.path.isdir(nodeDir)):
            os.makedirs(nodeDir)
        return nodeDir
