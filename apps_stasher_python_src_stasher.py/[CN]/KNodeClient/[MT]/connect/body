def connect(self):
    self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.sock.connect((self.host, self.port))
    self.rfile = self.sock.makefile('rb')
    self.read = self.rfile.read
    self.readline = self.rfile.readline
    self.wfile = self.sock.makefile('wb')
    self.write = self.wfile.write
    self.flush = self.wfile.flush
    greeting = self.readline()
    parts = re.split('\\s+', greeting)
    if (parts[0] != 'Stasher'):
        self.close()
        raise Exception('Not connected to valid stasher interface')
