def messageEncode(params):
    "\n    Serialise the dict 'params' for sending\n    \n    Temporarily using bencode - replace later with a more\n    efficient struct-based impl.\n    "
    try:
        return bencode.bencode(params)
    except:
        log(1, ('encoder failed to encode: %s' % repr(params)))
        raise
