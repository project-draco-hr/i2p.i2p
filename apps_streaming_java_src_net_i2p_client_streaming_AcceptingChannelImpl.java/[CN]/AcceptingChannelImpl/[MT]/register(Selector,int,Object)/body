{
  this.sel=sel;
  this.provider=sel.provider();
  this.lock=lock;
  this._isRegistered=true;
  final AcceptingChannel that=this;
  SelectionKey key=new AbstractSelectionKey(){
    int operations=ops;
    @Override public SelectableChannel channel(){
      return that;
    }
    @Override public Selector selector(){
      return sel;
    }
    @Override public int interestOps(){
      return this.operations;
    }
    @Override public SelectionKey interestOps(    int ops){
      this.operations=ops;
      return this;
    }
    @Override public int readyOps(){
      if ((operations & OP_ACCEPT) != 0)       if (next != null) {
        return OP_ACCEPT;
      }
 else {
        try {
          accept();
        }
 catch (        I2PException ex) {
        }
catch (        ConnectException ex) {
        }
        if (next != null)         return OP_ACCEPT;
      }
      return 0;
    }
  }
;
  key.attach(lock);
  sel.keys().add(key);
  return key;
}
