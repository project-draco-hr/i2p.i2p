{
  if (!_connected)   return;
  _connected=false;
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Disconnecting " + toString(),new Exception("discon"));
  if (cleanDisconnect) {
    try {
      _outputStream.close();
      _inputStream.close();
    }
 catch (    IOException ioe) {
      if (_log.shouldLog(Log.WARN))       _log.warn("Error on clean disconnect",ioe);
    }
  }
 else {
    doClose();
synchronized (_outboundPackets) {
      _outboundPackets.clear();
      _outboundPackets.notifyAll();
    }
    if (removeFromConMgr)     _connectionManager.removeConnection(this);
  }
}
