{
  if (false)   return true;
  long writeExpire=timeoutMs;
  while (true) {
    long timeLeft=writeExpire - _context.clock().now();
synchronized (_outboundPackets) {
      if (_outboundPackets.size() >= _options.getWindowSize()) {
        if (writeExpire > 0) {
          if (timeLeft <= 0) {
            _log.error("Outbound window is full of " + _outboundPackets.size() + " and we've waited too long ("+ writeExpire+ "ms)");
            return false;
          }
          if (_log.shouldLog(Log.DEBUG))           _log.debug("Outbound window is full (" + _outboundPackets.size() + "/"+ _options.getWindowSize()+ "), waiting "+ timeLeft);
          try {
            _outboundPackets.wait(timeLeft);
          }
 catch (          InterruptedException ie) {
          }
        }
 else {
          if (_log.shouldLog(Log.DEBUG))           _log.debug("Outbound window is full (" + _outboundPackets.size() + "), waiting indefinitely");
          try {
            _outboundPackets.wait();
          }
 catch (          InterruptedException ie) {
          }
        }
      }
 else {
        return true;
      }
    }
  }
}
