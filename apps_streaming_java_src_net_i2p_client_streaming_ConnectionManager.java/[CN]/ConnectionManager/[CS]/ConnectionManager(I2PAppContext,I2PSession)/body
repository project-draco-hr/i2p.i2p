{
  _context=context;
  _log=context.logManager().getLog(ConnectionManager.class);
  _connectionByInboundId=new HashMap(32);
  _pendingPings=new HashMap(4);
  _connectionLock=new Object();
  _messageHandler=new MessageHandler(context,this);
  _packetHandler=new PacketHandler(context,this);
  _connectionHandler=new ConnectionHandler(context,this);
  _schedulerChooser=new SchedulerChooser(context);
  _conPacketHandler=new ConnectionPacketHandler(context);
  _session=session;
  session.setSessionListener(_messageHandler);
  _outboundQueue=new PacketQueue(context,session);
  _allowIncoming=false;
}
