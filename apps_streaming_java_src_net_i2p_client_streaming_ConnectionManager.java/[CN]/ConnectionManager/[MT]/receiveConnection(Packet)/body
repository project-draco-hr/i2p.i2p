{
  Connection con=new Connection(_context,this,_schedulerChooser,_outboundQueue,_conPacketHandler);
  byte receiveId[]=new byte[4];
  _context.random().nextBytes(receiveId);
synchronized (_connectionLock) {
    while (true) {
      Connection oldCon=(Connection)_connectionByInboundId.put(new ByteArray(receiveId),con);
      if (oldCon == null) {
        break;
      }
 else {
        _connectionByInboundId.put(new ByteArray(receiveId),oldCon);
        _context.random().nextBytes(receiveId);
      }
    }
  }
  con.setReceiveStreamId(receiveId);
  try {
    con.getPacketHandler().receivePacket(synPacket,con);
  }
 catch (  I2PException ie) {
synchronized (_connectionLock) {
      _connectionByInboundId.remove(new ByteArray(receiveId));
    }
    return null;
  }
  return con;
}
