{
  _accessListEnabled=getBool(opts,PROP_ENABLE_ACCESS_LIST,false);
  _blackListEnabled=getBool(opts,PROP_ENABLE_BLACKLIST,false);
  if (_accessListEnabled)   _accessList=new HashSet();
 else   _accessList=Collections.EMPTY_SET;
  if (_blackListEnabled)   _blackList=new HashSet();
 else   _blackList=Collections.EMPTY_SET;
  if (!(_accessListEnabled || _blackListEnabled))   return;
  String hashes=opts.getProperty(PROP_ACCESS_LIST);
  if (hashes == null)   return;
  StringTokenizer tok=new StringTokenizer(hashes,", ");
  while (tok.hasMoreTokens()) {
    String hashstr=tok.nextToken();
    Hash h=ConvertToHash.getHash(hashstr);
    if (h == null)     error("bad list hash: " + hashstr);
 else     if (_blackListEnabled)     _blackList.add(h);
 else     _accessList.add(h);
  }
  if (_accessListEnabled && _accessList.isEmpty())   error("Connection access list enabled but no valid entries; no peers can connect");
 else   if (_blackListEnabled && _blackList.isEmpty())   error("Connection blacklist enabled but no valid entries; all peers can connect");
}
