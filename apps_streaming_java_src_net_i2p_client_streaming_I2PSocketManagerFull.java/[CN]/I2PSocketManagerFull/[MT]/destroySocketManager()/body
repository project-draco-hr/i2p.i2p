{
  if (!_isDestroyed.compareAndSet(false,true)) {
    if (_log.shouldLog(Log.WARN)) {
      String log="over-destroying manager " + getName();
      _log.log(Log.WARN,log,new Exception("check stack trace"));
    }
    return;
  }
  _connectionManager.setAllowIncomingConnections(false);
  _connectionManager.shutdown();
  if ((_session != null) && (!_session.isClosed())) {
    try {
      _session.destroySession();
    }
 catch (    I2PSessionException ise) {
      _log.warn("Unable to destroy the session",ise);
    }
    PcapWriter pcap=null;
synchronized (_pcapInitLock) {
      pcap=pcapWriter;
    }
    if (pcap != null)     pcap.flush();
  }
}
