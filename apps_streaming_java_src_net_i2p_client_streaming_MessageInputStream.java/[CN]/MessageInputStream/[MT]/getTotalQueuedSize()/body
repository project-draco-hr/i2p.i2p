{
synchronized (_dataLock) {
    if (_locallyClosed)     return 0;
    int numBytes=0;
    for (int i=0; i < _readyDataBlocks.size(); i++) {
      ByteArray cur=(ByteArray)_readyDataBlocks.get(i);
      if (i == 0)       numBytes+=cur.getValid() - _readyDataBlockIndex;
 else       numBytes+=cur.getValid();
    }
    for (Iterator iter=_notYetReadyBlocks.values().iterator(); iter.hasNext(); ) {
      ByteArray cur=(ByteArray)iter.next();
      numBytes+=cur.getValid();
    }
    return numBytes;
  }
}
