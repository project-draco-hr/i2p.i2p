{
  _closed=true;
  _streamError=new IOException("Closed internally");
synchronized (_dataLock) {
    if (_valid > 0) {
      _dataReceiver.writeData(_buf,0,_valid);
      _written+=_valid;
      _valid=0;
    }
    _dataLock.notifyAll();
  }
  if (_buf != null) {
    _dataCache.release(new ByteArray(_buf));
    _buf=null;
  }
}
