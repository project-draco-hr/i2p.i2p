{
  WriteStatus ws=null;
synchronized (_dataLock) {
    ws=_dataReceiver.writeData(_buf,0,_valid);
    _written+=_valid;
    _valid=0;
    _dataLock.notifyAll();
  }
  ws.waitForCompletion(_writeTimeout);
  if (ws.writeFailed() && (_writeTimeout > 0))   throw new InterruptedIOException("Timed out during write");
 else   if (ws.writeFailed())   throw new IOException("Write failed");
  throwAnyError();
}
