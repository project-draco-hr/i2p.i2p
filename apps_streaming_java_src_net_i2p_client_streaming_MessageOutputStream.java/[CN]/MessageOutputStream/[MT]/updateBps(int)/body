{
  long now=_context.clock().now();
  int periods=(int)Math.floor((now - _sendPeriodBeginTime) / 1000d);
  if (periods > 0) {
    _sendBps=(int)(((float)0.9f * ((float)_sendBps / (float)periods)) + ((float)0.1f * ((float)_sendPeriodBytes / (float)periods)));
    _sendPeriodBytes=len;
    _sendPeriodBeginTime=now;
    _context.statManager().addRateData("stream.sendBps",_sendBps,0);
  }
 else {
    _sendPeriodBytes+=len;
  }
}
