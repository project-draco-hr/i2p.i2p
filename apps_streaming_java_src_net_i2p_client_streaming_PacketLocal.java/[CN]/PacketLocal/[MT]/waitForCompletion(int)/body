{
  long expiration=_context.clock().now() + maxWaitMs;
  while ((maxWaitMs <= 0) || (expiration < _context.clock().now())) {
synchronized (this) {
      if (_ackOn > 0)       return;
      if (_cancelledOn > 0)       return;
      try {
        wait();
      }
 catch (      InterruptedException ie) {
      }
    }
  }
}
