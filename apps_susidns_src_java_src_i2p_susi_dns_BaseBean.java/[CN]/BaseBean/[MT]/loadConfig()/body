{
  long currentTime=System.currentTimeMillis();
  if (!properties.isEmpty() && currentTime - configLastLoaded < 10000)   return;
  FileInputStream fis=null;
  try {
    properties.clear();
    fis=new FileInputStream(ConfigBean.configFileName);
    properties.load(fis);
    if (properties.getProperty(PRIVATE_BOOK) == null)     properties.setProperty(PRIVATE_BOOK,DEFAULT_PRIVATE_BOOK);
    Properties themeProps=_context.readConfigFile(THEME_CONFIG_FILE);
    _theme=themeProps.getProperty(PROP_THEME_NAME);
    String[] themes=getThemes();
    boolean themeExists=false;
    for (int i=0; i < themes.length; i++) {
      if (themes[i].equals(_theme))       themeExists=true;
    }
    if (_theme == null || !themeExists) {
      _theme=DEFAULT_THEME;
      themeProps.put(PROP_THEME_NAME,_theme);
      _context.writeConfigFile(THEME_CONFIG_FILE,themeProps);
    }
    configLastLoaded=currentTime;
  }
 catch (  Exception e) {
    Debug.debug(e.getClass().getName() + ": " + e.getMessage());
  }
 finally {
    if (fis != null)     try {
      fis.close();
    }
 catch (    IOException ioe) {
    }
  }
}
