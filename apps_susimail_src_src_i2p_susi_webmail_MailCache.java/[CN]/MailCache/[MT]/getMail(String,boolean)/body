{
  Mail mail=null, newMail=null;
synchronized (mails) {
    mail=mails.get(uidl);
    if (mail == null) {
      newMail=new Mail(uidl);
      mails.put(uidl,newMail);
    }
  }
  if (mail == null) {
    mail=newMail;
    mail.size=mailbox.getSize(uidl);
  }
  if (mail.size <= FETCH_ALL_SIZE)   headerOnly=false;
  if (headerOnly) {
    if (!mail.hasHeader())     mail.setHeader(mailbox.getHeader(uidl));
  }
 else {
    if (!mail.hasBody()) {
      mail.setBody(mailbox.getBody(uidl));
    }
  }
  if (mail != null && mail.deleted)   mail=null;
  return mail;
}
