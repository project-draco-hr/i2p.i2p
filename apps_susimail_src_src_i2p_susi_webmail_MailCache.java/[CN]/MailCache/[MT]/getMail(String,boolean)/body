{
  Mail mail=null, newMail=null;
synchronized (mails) {
    mail=mails.get(uidl);
    if (mail == null) {
      newMail=new Mail(uidl);
      mails.put(uidl,newMail);
    }
  }
  if (mail == null) {
    mail=newMail;
    mail.setSize(mailbox.getSize(uidl));
  }
  if (mail.markForDeletion)   return null;
  int sz=mail.getSize();
  if (sz > 0 && sz <= FETCH_ALL_SIZE)   headerOnly=false;
  if (headerOnly) {
    if (!mail.hasHeader())     mail.setHeader(mailbox.getHeader(uidl));
  }
 else {
    if (!mail.hasBody()) {
      mail.setBody(mailbox.getBody(uidl));
    }
  }
  if (disk != null) {
    if (disk.saveMail(mail) && mail.hasBody()) {
    }
  }
  return mail;
}
