{
synchronized (synchronizer) {
    Debug.debug(Debug.DEBUG,"close()");
    if (socket != null && socket.isConnected()) {
      try {
        if (shouldWait)         sendCmd1a("QUIT");
 else         sendCmd1aNoWait("QUIT");
        socket.close();
      }
 catch (      IOException e) {
        Debug.debug(Debug.DEBUG,"Error while closing connection: " + e);
      }
    }
    socket=null;
    connected=false;
  }
}
