{
synchronized (synchronizer) {
    ReadBuffer readBuffer=null;
    uidlToID.clear();
    uidlList.clear();
    uidls=null;
    readBuffer=sendCmdNa("UIDL",DEFAULT_BUFSIZE);
    if (readBuffer != null) {
      String[] lines=new String(readBuffer.toString()).split("\r\n");
      for (int i=0; i < lines.length; i++) {
        int j=lines[i].indexOf(" ");
        if (j != -1) {
          try {
            int n=Integer.parseInt(lines[i].substring(0,j));
            String uidl=lines[i].substring(j + 1);
            uidlToID.put(uidl,new Integer(n));
            uidlList.add(n - 1,uidl);
          }
 catch (          NumberFormatException nfe) {
          }
        }
      }
      uidls=uidlList.toArray();
    }
 else {
      System.err.println("Error getting UIDL list from pop3 server.");
    }
  }
}
