{
  _context=ctx;
  _log=ctx.logManager().getLog(BlogManager.class);
  _rootDir=new File(rootDir);
  _rootDir.mkdirs();
  readConfig();
  _blogKeyDir=new File(_rootDir,"blogkeys");
  _privKeyDir=new File(_rootDir,"privkeys");
  String archiveDir=_context.getProperty("syndie.archiveDir");
  if (archiveDir != null)   _archiveDir=new File(archiveDir);
 else   _archiveDir=new File(_rootDir,"archive");
  _userDir=new File(_rootDir,"users");
  _cacheDir=new File(_rootDir,"cache");
  _tempDir=new File(_rootDir,"temp");
  _blogKeyDir.mkdirs();
  _privKeyDir.mkdirs();
  _archiveDir.mkdirs();
  _cacheDir.mkdirs();
  _userDir.mkdirs();
  _tempDir.mkdirs();
  _archive=new Archive(ctx,_archiveDir.getAbsolutePath(),_cacheDir.getAbsolutePath(),this);
  if (regenIndex)   _archive.regenerateIndex();
}
