{
  if (!user.getAuthenticated() || !user.getAllowAccessRemote())   return "<span class=\"b_addrMsgErr\">Not authorized to export the hosts</span>";
  PetNameDB userDb=user.getPetNameDB();
  PetNameDB routerDb=_context.petnameDb();
  for (Iterator iter=userDb.iterator(); iter.hasNext(); ) {
    PetName pn=(PetName)iter.next();
    if (pn == null)     continue;
    Destination existing=_context.namingService().lookup(pn.getName());
    if (existing == null && pn.getNetwork().equalsIgnoreCase("i2p")) {
      routerDb.add(pn);
      try {
        routerDb.store();
      }
 catch (      IOException ioe) {
        _log.error("Error exporting the hosts",ioe);
        return "<span class=\"b_addrMsgErr\">Error exporting the hosts: " + ioe.getMessage() + "</span>";
      }
    }
  }
  return "<span class=\"b_addrMsgOk\">Hosts exported</span>";
}
