{
  if (isSingleUser()) {
    Hash userHash=_context.sha().calculateHash(DataHelper.getUTF8(getDefaultLogin()));
    File userFile=new File(_userDir,Base64.encode(userHash.getData()));
    if (_log.shouldLog(Log.INFO))     _log.info("Attempting to login to the default user: " + userFile.getAbsolutePath());
    if (userFile.exists()) {
      Properties props=loadUserProps(userFile);
      if (props == null) {
        user.invalidate();
        _log.error("Error reading the default user file: " + userFile);
        return;
      }
      String ok=user.login(getDefaultLogin(),getDefaultPass(),props);
      if (User.LOGIN_OK.equals(ok)) {
        return;
      }
 else {
        user.invalidate();
        _log.error("Error logging into the default user: " + ok);
        return;
      }
    }
 else {
      String ok=register(user,getDefaultLogin(),getDefaultPass(),"","default","Default Syndie blog","");
      if (User.LOGIN_OK.equals(ok)) {
        _log.info("Default user created: " + user);
        for (int i=0; i < DEFAULT_SINGLE_USER_ARCHIVES.length; i++)         user.getPetNameDB().add(new PetName("DefaultArchive" + i,"syndie","syndiearchive",DEFAULT_SINGLE_USER_ARCHIVES[i]));
        scheduleSyndication(DEFAULT_SINGLE_USER_ARCHIVES);
        saveUser(user);
        return;
      }
 else {
        user.invalidate();
        _log.error("Error registering the default user: " + ok);
        return;
      }
    }
  }
 else {
    return;
  }
}
