{
  String subject;
  String feedHash=sha1(urlToLoad);
  String itemHash=sha1(e.getTitle() + e.getDescription());
  Date d=e.getPublishedDate();
  String time;
  if (d != null)   time="" + d.getTime();
 else   time="" + new Date().getTime();
  String outputFileName=outputDir + "/" + messageNumber;
  String messageId=feedHash + ":" + itemHash+ ":"+ time+ ":"+ outputFileName;
  if (existsInHistory(messageId))   return null;
  debugLog("new: " + messageId);
  try {
    String sml="";
    subject=e.getTitle();
    List cats=e.getCategories();
    Iterator iter=cats.iterator();
    String tags=feedTag;
    while (iter.hasNext()) {
      SyndCategory c=(SyndCategory)iter.next();
      debugLog("Name: " + c.getName());
      debugLog("uri:" + c.getTaxonomyUri());
      String tag=c.getName();
      tag=tag.replaceAll("[^a-zA-z.-_:]","_");
      tags+="\t" + feedTag + "."+ tag;
    }
    SyndContent content;
    List l=e.getContents();
    if (l != null) {
      debugLog("There is content");
      iter=l.iterator();
      while (iter.hasNext()) {
        content=(SyndContent)iter.next();
        String c=content.getValue();
        debugLog("Content: " + c);
        sml+=htmlToSml(c);
        sml+="\n";
      }
    }
    String source=e.getUri();
    if (source.indexOf("http") < 0)     source=baseUrl + source;
    sml+="[link schema=\"web\" location=\"" + source + "\"]source[/link]\n";
    if (pushToSyndie) {
      debugLog("user.blog: " + user.getBlogStr());
      debugLog("user.id: " + bm.getNextBlogEntry(user));
      debugLog("subject: " + subject);
      debugLog("tags: " + tags);
      debugLog("sml: " + sml);
      debugLog("");
      BlogURI uri=bm.createBlogEntry(user,false,subject,tags,null,sml,fileNames,fileStreams,fileTypes);
      if (uri == null) {
        debugLog("pushToSyndie failure.");
        return null;
      }
 else       debugLog("pushToSyndie success, uri: " + uri.toString());
    }
 else {
      FileOutputStream fos;
      fos=new FileOutputStream(messagePath);
      sml=subject + "\nTags: " + tags+ "\n\n"+ sml;
      fos.write(sml.getBytes());
      if (pushScript != null) {
        if (!execPushScript("" + messageNumber,time)) {
          debugLog("################## push failed");
        }
 else {
          debugLog("push success");
        }
      }
    }
    messageNumber++;
    return messageId;
  }
 catch (  FileNotFoundException e1) {
    e1.printStackTrace();
  }
catch (  IOException e2) {
    e2.printStackTrace();
  }
  return null;
}
