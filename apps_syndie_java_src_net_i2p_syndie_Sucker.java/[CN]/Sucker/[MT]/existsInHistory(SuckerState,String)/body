{
  int idx;
  idx=messageId.lastIndexOf(":");
  String lineToCompare=messageId.substring(0,idx - 1);
  idx=lineToCompare.lastIndexOf(":");
  lineToCompare=lineToCompare.substring(0,idx - 1);
  Iterator iter=_state.history.iterator();
  while (iter.hasNext()) {
    String line=(String)iter.next();
    idx=line.lastIndexOf(":");
    if (idx < 0)     return false;
    line=line.substring(0,idx - 1);
    idx=line.lastIndexOf(":");
    if (idx < 0)     return false;
    line=line.substring(0,idx - 1);
    if (line.equals(lineToCompare))     return true;
  }
  return false;
}
