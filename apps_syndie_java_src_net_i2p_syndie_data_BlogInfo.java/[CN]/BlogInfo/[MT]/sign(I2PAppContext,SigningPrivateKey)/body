{
  try {
    ByteArrayOutputStream out=new ByteArrayOutputStream(512);
    write(out,false);
    byte data[]=out.toByteArray();
    Signature sig=ctx.dsa().sign(data,priv);
    if (sig == null)     throw new IOException("wtf, why is the signature null? data.len = " + data.length + " priv: "+ priv);
    setProperty(SIGNATURE,Base64.encode(sig.getData()));
    _signature=sig;
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
}
