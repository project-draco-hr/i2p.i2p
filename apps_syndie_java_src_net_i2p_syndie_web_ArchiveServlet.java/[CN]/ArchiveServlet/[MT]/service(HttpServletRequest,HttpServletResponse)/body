{
  String path=req.getPathInfo();
  if ((path == null) || (path.trim().length() <= 1)) {
    renderRootIndex(resp);
    return;
  }
 else   if (path.endsWith(Archive.INDEX_FILE)) {
    renderSummary(req.getHeader("If-None-Match"),resp);
  }
 else   if (path.indexOf("export.zip") != -1) {
    ExportServlet.export(req,resp);
  }
 else {
    String blog=getBlog(path);
    if (path.endsWith(Archive.METADATA_FILE)) {
      renderMetadata(blog,resp);
    }
 else     if (path.endsWith(".snd")) {
      renderEntry(blog,getEntry(path),resp);
    }
 else {
      renderBlogIndex(blog,resp);
    }
  }
}
