{
  String blogStr=getString(parameters,PARAM_BLOG);
  Hash blog=null;
  if (blogStr != null)   blog=new Hash(Base64.decode(blogStr));
  long entryId=-1;
  if (blogStr != null) {
    String entryIdStr=getString(parameters,PARAM_ENTRY);
    try {
      entryId=Long.parseLong(entryIdStr);
    }
 catch (    NumberFormatException nfe) {
    }
  }
  int attachment=getInt(parameters,PARAM_ATTACHMENT,-1);
  Archive archive=BlogManager.instance().getArchive();
  EntryContainer entry=archive.getEntry(new BlogURI(blog,entryId));
  if ((entry != null) && (attachment >= 0) && (attachment < entry.getAttachments().length)) {
    return entry.getAttachments()[attachment];
  }
  return null;
}
