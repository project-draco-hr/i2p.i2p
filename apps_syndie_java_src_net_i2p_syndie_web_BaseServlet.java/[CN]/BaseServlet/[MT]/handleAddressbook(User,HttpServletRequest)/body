{
  if ((!user.getAuthenticated()) || (empty(AddressesServlet.PARAM_ACTION))) {
    return false;
  }
  String action=req.getParameter(AddressesServlet.PARAM_ACTION);
  if (AddressesServlet.ACTION_ADD_TAG.equals(action)) {
    String name=req.getParameter(AddressesServlet.PARAM_NAME);
    if (!user.getPetNameDB().containsName(name)) {
      PetName pn=new PetName(name,AddressesServlet.NET_SYNDIE,AddressesServlet.PROTO_TAG,name);
      user.getPetNameDB().add(pn);
      BlogManager.instance().saveUser(user);
    }
    return false;
  }
 else   if ((AddressesServlet.ACTION_ADD_ARCHIVE.equals(action)) || (AddressesServlet.ACTION_ADD_BLOG.equals(action)) || (AddressesServlet.ACTION_ADD_EEPSITE.equals(action))|| (AddressesServlet.ACTION_ADD_OTHER.equals(action))|| (AddressesServlet.ACTION_ADD_PEER.equals(action))) {
    PetName pn=buildNewAddress(req);
    if ((pn != null) && (pn.getName() != null) && (pn.getLocation() != null)&& (!user.getPetNameDB().containsName(pn.getName()))) {
      user.getPetNameDB().add(pn);
      BlogManager.instance().saveUser(user);
      updateSyndication(user,pn.getLocation(),!empty(req,AddressesServlet.PARAM_SYNDICATE));
      if (pn.isMember(FilteredThreadIndex.GROUP_FAVORITE) || pn.isMember(FilteredThreadIndex.GROUP_IGNORE))       return true;
 else       return false;
    }
 else {
      return false;
    }
  }
 else   if ((AddressesServlet.ACTION_UPDATE_ARCHIVE.equals(action)) || (AddressesServlet.ACTION_UPDATE_BLOG.equals(action)) || (AddressesServlet.ACTION_UPDATE_EEPSITE.equals(action))|| (AddressesServlet.ACTION_UPDATE_OTHER.equals(action))|| (AddressesServlet.ACTION_UPDATE_PEER.equals(action))) {
    return updateAddress(user,req);
  }
 else   if (AddressesServlet.ACTION_PURGE_AND_BAN_BLOG.equals(action)) {
    String name=req.getParameter(AddressesServlet.PARAM_NAME);
    PetName pn=user.getPetNameDB().getByName(name);
    if (pn != null) {
      boolean purged=false;
      if (BlogManager.instance().authorizeRemote(user)) {
        Hash h=null;
        BlogURI uri=new BlogURI(pn.getLocation());
        if (uri.getKeyHash() != null) {
          h=uri.getKeyHash();
        }
        if (h == null) {
          byte b[]=Base64.decode(pn.getLocation());
          if ((b != null) && (b.length == Hash.HASH_LENGTH))           h=new Hash(b);
        }
        if (h != null) {
          BlogManager.instance().purgeAndBan(h);
          purged=true;
        }
      }
      if (purged)       return true;
 else       return false;
    }
 else {
      return false;
    }
  }
 else   if ((AddressesServlet.ACTION_DELETE_ARCHIVE.equals(action)) || (AddressesServlet.ACTION_DELETE_BLOG.equals(action)) || (AddressesServlet.ACTION_DELETE_EEPSITE.equals(action))|| (AddressesServlet.ACTION_DELETE_OTHER.equals(action))|| (AddressesServlet.ACTION_DELETE_TAG.equals(action))|| (AddressesServlet.ACTION_DELETE_PEER.equals(action))) {
    String name=req.getParameter(AddressesServlet.PARAM_NAME);
    PetName pn=user.getPetNameDB().getByName(name);
    if (pn != null) {
      user.getPetNameDB().remove(pn);
      BlogManager.instance().saveUser(user);
      updateSyndication(user,pn.getLocation(),false);
      if (pn.isMember(FilteredThreadIndex.GROUP_FAVORITE) || pn.isMember(FilteredThreadIndex.GROUP_IGNORE))       return true;
 else       return false;
    }
 else {
      return false;
    }
  }
 else {
    return false;
  }
}
