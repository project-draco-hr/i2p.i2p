{
  if (BlogManager.instance().authorizeRemote(user)) {
    String action=req.getParameter("action");
    if ((action != null) && ("Save config".equals(action))) {
      boolean wantSingle=!empty(req,"singleuser");
      String defaultUser=req.getParameter("defaultUser");
      String defaultPass=req.getParameter("defaultPass");
      String regPass=req.getParameter("regpass");
      String remotePass=req.getParameter("remotepass");
      String proxyHost=req.getParameter("proxyhost");
      String proxyPort=req.getParameter("proxyport");
      if ((!empty(defaultUser)) && (defaultPass != null) && (regPass != null)&& (remotePass != null)&& (proxyHost != null)&& (proxyPort != null)) {
        int port=4444;
        try {
          port=Integer.parseInt(proxyPort);
        }
 catch (        NumberFormatException nfe) {
        }
        BlogManager.instance().configure(regPass,remotePass,null,null,proxyHost,port,wantSingle,null,defaultUser,defaultPass);
      }
    }
  }
}
