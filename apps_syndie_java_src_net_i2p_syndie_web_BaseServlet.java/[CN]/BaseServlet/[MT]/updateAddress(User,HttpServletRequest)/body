{
  PetName pn=user.getPetNameDB().getByName(req.getParameter(AddressesServlet.PARAM_NAME));
  if (pn != null) {
    boolean wasIgnored=pn.isMember(FilteredThreadIndex.GROUP_IGNORE);
    boolean wasFavorite=pn.isMember(FilteredThreadIndex.GROUP_FAVORITE);
    pn.setIsPublic(!empty(req,AddressesServlet.PARAM_IS_PUBLIC));
    pn.setLocation(req.getParameter(AddressesServlet.PARAM_LOC));
    pn.setNetwork(req.getParameter(AddressesServlet.PARAM_NET));
    pn.setProtocol(req.getParameter(AddressesServlet.PARAM_PROTO));
    if (empty(req,AddressesServlet.PARAM_FAVORITE))     pn.removeGroup(FilteredThreadIndex.GROUP_FAVORITE);
 else     pn.addGroup(FilteredThreadIndex.GROUP_FAVORITE);
    if (empty(req,AddressesServlet.PARAM_IGNORE))     pn.removeGroup(FilteredThreadIndex.GROUP_IGNORE);
 else     pn.addGroup(FilteredThreadIndex.GROUP_IGNORE);
    BlogManager.instance().saveUser(user);
    if (AddressesServlet.PROTO_ARCHIVE.equals(pn.getProtocol()))     updateSyndication(user,pn.getLocation(),!empty(req,AddressesServlet.PARAM_SYNDICATE));
    return (wasIgnored != pn.isMember(FilteredThreadIndex.GROUP_IGNORE)) || (wasFavorite != pn.isMember(FilteredThreadIndex.GROUP_IGNORE));
  }
 else {
    return false;
  }
}
