{
  StringBuffer buf=new StringBuffer();
  req.setAttribute(getClass().getName() + ".output",buf);
  String action=req.getParameter("action");
  if ("Publish blog configuration".equals(action)) {
    if (bean.publishChanges()) {
      buf.append("Changes published<br />\n");
    }
 else {
      buf.append("Changes could not be published (please check the log)<br />\n");
    }
  }
 else {
    if ("Save changes".equals(action)) {
      String newGroup=req.getParameter("new.group");
      if ((newGroup == null) || (newGroup.trim().length() <= 0))       newGroup=req.getParameter("new.groupOther");
      if ((newGroup != null) && (newGroup.trim().length() > 0)) {
        addElement(req,user,newGroup,buf,bean);
      }
 else {
      }
    }
 else {
    }
    handleDelete(req,user,bean,buf);
    handleReorderGroup(req,user,bean,buf);
    handleReorderRef(req,user,bean,buf);
  }
  return buf;
}
