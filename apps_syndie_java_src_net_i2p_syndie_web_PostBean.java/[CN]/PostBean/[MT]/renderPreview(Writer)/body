{
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Subject: " + _subject);
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Text: " + _text);
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Headers: " + _headers);
  cacheAttachments();
  String smlContent=renderSMLContent();
  HTMLPreviewRenderer r=new HTMLPreviewRenderer(_context,_filenames,_fileTypes,_localFiles);
  r.render(_user,BlogManager.instance().getArchive(),null,smlContent,out,false,true);
  _previewed=true;
}
