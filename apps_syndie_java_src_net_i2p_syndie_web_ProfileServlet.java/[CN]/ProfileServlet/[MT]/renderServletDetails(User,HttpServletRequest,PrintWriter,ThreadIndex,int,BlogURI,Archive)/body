{
  Hash author=null;
  String str=req.getParameter(ThreadedHTMLRenderer.PARAM_AUTHOR);
  if (str != null) {
    try {
      author=new Hash();
      author.fromBase64(str);
    }
 catch (    DataFormatException dfe) {
      author=null;
    }
  }
 else {
    author=user.getBlog();
  }
  String uri=req.getRequestURI();
  if (author == null) {
    renderInvalidProfile(out);
  }
 else   if ((user.getBlog() != null) && (user.getBlog().equals(author))) {
    renderMyProfile(user,uri,out,archive);
  }
 else {
    renderProfile(user,uri,out,author,archive);
  }
}
