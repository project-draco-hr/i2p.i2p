{
  List files=new ArrayList(blogURIs.size() + 1);
  Set meta=new HashSet(4);
  Map uploads=new HashMap(files.size());
  String importURL=getImportURL();
  _statusMessages.add("Uploading through " + HTMLRenderer.sanitizeString(importURL));
  for (int i=0; i < blogURIs.size(); i++) {
    BlogURI uri=(BlogURI)blogURIs.get(i);
    File blogDir=new File(BlogManager.instance().getArchive().getArchiveDir(),uri.getKeyHash().toBase64());
    BlogInfo info=BlogManager.instance().getArchive().getBlogInfo(uri);
    if (!meta.contains(uri.getKeyHash())) {
      uploads.put("blogmeta" + meta.size(),new File(blogDir,Archive.METADATA_FILE));
      meta.add(uri.getKeyHash());
      _statusMessages.add("Scheduling upload of the blog metadata for " + HTMLRenderer.sanitizeString(info.getProperty(BlogInfo.NAME)));
    }
    uploads.put("blogpost" + i,new File(blogDir,uri.getEntryId() + ".snd"));
    _statusMessages.add("Scheduling upload of " + HTMLRenderer.sanitizeString(info.getProperty(BlogInfo.NAME)) + ": "+ getEntryDate(uri.getEntryId()));
  }
  EepPost post=new EepPost();
  post.postFiles(importURL,_proxyHost,_proxyPort,uploads,new Runnable(){
    public void run(){
      _statusMessages.add("Upload complete");
    }
  }
);
}
