{
  Archive archive=BlogManager.instance().getArchive();
  Hash blog=null;
  String name=req.getParameter(PARAM_BLOG);
  if ((name == null) || (name.trim().length() <= 0)) {
    blog=user.getBlog();
  }
 else {
    byte val[]=Base64.decode(name);
    if ((val != null) && (val.length == Hash.HASH_LENGTH))     blog=new Hash(val);
  }
  BlogInfo info=null;
  if (blog != null)   info=archive.getBlogInfo(blog);
  int offset=0;
  String off=req.getParameter(PARAM_OFFSET);
  if (off != null)   try {
    offset=Integer.parseInt(off);
  }
 catch (  NumberFormatException nfe) {
  }
  List posts=getPosts(user,archive,info,req,index);
  render(user,req,out,archive,info,posts,offset);
}
