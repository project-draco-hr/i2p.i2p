{
  BlogConfigBean bean=BlogConfigServlet.getConfigBean(req);
  if ((bean != null) && (bean.isUpdated()) && (bean.getLogo() != null)) {
    User u=bean.getUser();
    if (u != null) {
      String reqBlog=req.getParameter(PARAM_BLOG);
      if ((reqBlog == null) || (u.getBlog().toBase64().equals(reqBlog))) {
        if (BlogInfoData.ATTACHMENT_LOGO.equals(requestedImage)) {
          File logo=bean.getLogo();
          if (logo != null) {
            byte buf[]=new byte[4096];
            resp.setContentType("image/png");
            resp.setContentLength((int)logo.length());
            OutputStream out=resp.getOutputStream();
            FileInputStream in=null;
            try {
              in=new FileInputStream(logo);
              int read=0;
              while ((read=in.read(buf)) != -1)               out.write(buf,0,read);
              _log.debug("Done writing the updated full length logo");
            }
  finally {
              if (in != null)               try {
                in.close();
              }
 catch (              IOException ioe) {
              }
              if (out != null)               try {
                out.close();
              }
 catch (              IOException ioe) {
              }
            }
            _log.debug("Returning from writing the updated full length logo");
            return true;
          }
        }
 else {
        }
      }
    }
  }
  return false;
}
