{
  try {
    BufferedReader br=new BufferedReader(new InputStreamReader(s.getInputStream()));
    String line;
    int index;
    while ((line=br.readLine()) != null) {
      if ((index=line.indexOf(" ")) == -1)       continue;
      long now, packetNumber, packetTime;
      now=System.currentTimeMillis();
      try {
        packetNumber=Long.parseLong(line.substring(0,index));
        packetTime=Long.parseLong(line.substring(index + 1));
      }
 catch (      NumberFormatException ex) {
        System.out.println(ex.toString());
        continue;
      }
synchronized (lock) {
        while (packetNumber > nextUnreceived) {
          nextUnreceived++;
          eta.packetLossOccurred(false);
        }
        if (nextUnreceived > packetNumber) {
          System.out.println("*** DOUBLE PACKET!");
        }
 else {
          nextUnreceived++;
        }
      }
      eta.successOccurred(now - packetTime);
    }
  }
 catch (  SocketException ex) {
  }
catch (  IOException ex) {
    ex.printStackTrace();
    System.exit(0);
  }
synchronized (lock) {
    readerRunning=false;
  }
}
