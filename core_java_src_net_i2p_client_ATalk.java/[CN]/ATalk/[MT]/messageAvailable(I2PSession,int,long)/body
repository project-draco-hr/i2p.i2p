{
  _log.debug("Message available: id = " + msgId + " size = "+ size);
  try {
    byte msg[]=session.receiveMessage(msgId);
    BufferedReader reader=new BufferedReader(new InputStreamReader(new ByteArrayInputStream(msg)));
    String line=reader.readLine();
    if (line.startsWith(FILE_COMMAND)) {
      handleRecieveFile(line,msg);
    }
 else {
      _out.write(now() + " --> " + new String(msg));
      _out.write(NL);
      _out.flush();
    }
  }
 catch (  I2PSessionException ise) {
    _log.error("Error fetching available message",ise);
  }
catch (  IOException ioe) {
    _log.error("Error writing out the message",ioe);
  }
}
