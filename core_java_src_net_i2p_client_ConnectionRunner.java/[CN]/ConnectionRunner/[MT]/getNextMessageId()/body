{
synchronized (_messageIdLock) {
    int id=(++_messageId) % 32767;
    _messageId=id;
    return id;
  }
}
