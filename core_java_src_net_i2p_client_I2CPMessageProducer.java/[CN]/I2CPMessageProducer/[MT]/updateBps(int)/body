{
  long now=_context.clock().now();
  float period=((float)now - _sendPeriodBeginTime) / 1000f;
  if (period >= 1f) {
    _sendBps=(int)(((float)0.9f * (float)_sendBps) + ((float)0.1f * ((float)_sendPeriodBytes) / period));
    _sendPeriodBytes=len;
    _sendPeriodBeginTime=now;
    _context.statManager().addRateData("client.sendBpsRaw",_sendBps,0);
  }
 else {
    _sendPeriodBytes+=len;
  }
}
