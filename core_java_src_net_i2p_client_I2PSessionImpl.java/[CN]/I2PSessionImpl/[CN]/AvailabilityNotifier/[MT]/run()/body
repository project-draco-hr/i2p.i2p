{
  _alive=true;
  while (_alive) {
    Integer msgId=null;
    Integer size=null;
synchronized (AvailabilityNotifier.this) {
      if (_pendingIds.size() <= 0) {
        try {
          AvailabilityNotifier.this.wait();
        }
 catch (        InterruptedException ie) {
        }
      }
      if (_pendingIds.size() > 0) {
        msgId=(Integer)_pendingIds.remove(0);
        size=(Integer)_pendingSizes.remove(0);
      }
    }
    if ((msgId != null) && (size != null)) {
      if (_sessionListener != null) {
        try {
          _sessionListener.messageAvailable(I2PSessionImpl.this,msgId.intValue(),size.intValue());
        }
 catch (        Exception e) {
          _log.log(Log.CRIT,"Error notifying app of message availability",e);
        }
      }
 else {
        _log.log(Log.CRIT,"Unable to notify an app that " + msgId + " of size "+ size+ " is available!");
      }
    }
  }
}
