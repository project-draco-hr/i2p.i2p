{
  _options=new Properties();
  _options.putAll(filter(options));
  if (_context.isRouterContext()) {
    _hostname="[internal connection]";
  }
 else {
    _hostname=_options.getProperty(I2PClient.PROP_TCP_HOST,"127.0.0.1");
    String portNum=_options.getProperty(I2PClient.PROP_TCP_PORT,LISTEN_PORT + "");
    try {
      _portNum=Integer.parseInt(portNum);
    }
 catch (    NumberFormatException nfe) {
      if (_log.shouldLog(Log.WARN))       _log.warn(getPrefix() + "Invalid port number specified, defaulting to " + LISTEN_PORT,nfe);
      _portNum=LISTEN_PORT;
    }
  }
  if ((!_context.isRouterContext()) && _context.getBooleanProperty("i2cp.auth") && ((!options.containsKey("i2cp.username")) || (!options.containsKey("i2cp.password")))) {
    String configUser=_context.getProperty("i2cp.username");
    String configPW=_context.getProperty("i2cp.password");
    if (configUser != null && configPW != null) {
      _options.setProperty("i2cp.username",configUser);
      _options.setProperty("i2cp.password",configPW);
    }
  }
}
