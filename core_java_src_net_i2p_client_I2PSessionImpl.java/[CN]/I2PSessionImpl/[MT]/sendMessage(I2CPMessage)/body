{
  if (isClosed())   throw new I2PSessionException("Already closed");
  long beforeSync=_context.clock().now();
  long inSync=0;
  try {
synchronized (_out) {
      inSync=_context.clock().now();
      message.writeMessage(_out);
      _out.flush();
    }
  }
 catch (  I2CPMessageException ime) {
    throw new I2PSessionException(getPrefix() + "Error writing out the message",ime);
  }
catch (  IOException ioe) {
    throw new I2PSessionException(getPrefix() + "Error writing out the message",ioe);
  }
  long afterSync=_context.clock().now();
  if (_log.shouldLog(Log.DEBUG))   _log.debug(getPrefix() + "Message written out and flushed w/ " + (inSync - beforeSync)+ "ms to sync and "+ (afterSync - inSync)+ "ms to send");
}
