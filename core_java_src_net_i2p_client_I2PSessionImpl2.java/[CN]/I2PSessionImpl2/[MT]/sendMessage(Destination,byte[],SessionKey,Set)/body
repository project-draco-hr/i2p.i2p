{
  if (isClosed())   throw new I2PSessionException("Already closed");
  if (SHOULD_COMPRESS)   payload=DataHelper.compress(payload);
  if (isGuaranteed()) {
    return sendGuaranteed(dest,payload,keyUsed,tagsSent);
  }
 else {
    return sendBestEffort(dest,payload,keyUsed,tagsSent);
  }
}
