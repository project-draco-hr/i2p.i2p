{
  if (_log.shouldLog(Log.DEBUG))   _log.debug("sending message");
  if (isClosed())   throw new I2PSessionException("Already closed");
  if (SHOULD_COMPRESS)   payload=DataHelper.compress(payload,offset,size);
 else   throw new IllegalStateException("we need to update sendGuaranteed to support partial send");
  if (_log.shouldLog(Log.DEBUG))   _log.debug("message compressed");
  if (isGuaranteed() || false) {
    return sendGuaranteed(dest,payload,keyUsed,tagsSent);
  }
  return sendBestEffort(dest,payload,keyUsed,tagsSent);
}
