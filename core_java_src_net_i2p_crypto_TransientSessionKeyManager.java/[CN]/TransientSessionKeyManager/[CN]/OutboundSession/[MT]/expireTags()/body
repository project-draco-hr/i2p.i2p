{
  long now=Clock.getInstance().now();
  Set toRemove=new HashSet(64);
synchronized (_tagSets) {
    for (int i=0; i < _tagSets.size(); i++) {
      TagSet set=(TagSet)_tagSets.get(i);
      if (set.getDate() + SESSION_TAG_DURATION_MS <= now) {
        toRemove.add(set);
      }
    }
    _tagSets.removeAll(toRemove);
  }
  return toRemove.size();
}
