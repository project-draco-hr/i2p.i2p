{
synchronized (_inboundTagSets) {
    TagSet tagSet=(TagSet)_inboundTagSets.remove(tag);
    if (tagSet == null) {
      if (_log.shouldLog(Log.DEBUG))       _log.debug("Cannot consume IB " + tag + " as it is not known");
      return null;
    }
    tagSet.consume(tag);
    SessionKey key=tagSet.getAssociatedKey();
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Consuming IB " + tag + " for "+ key+ " on: "+ tagSet);
    return key;
  }
}
