{
  ctx=context;
  long maxMemory=Runtime.getRuntime().maxMemory();
  if (maxMemory == Long.MAX_VALUE)   maxMemory=127 * 1024 * 1024l;
  int factor=(int)Math.max(1l,Math.min(8l,1 + (maxMemory / (128 * 1024 * 1024l))));
  int defaultMin=DEFAULT_YK_PRECALC_MIN * factor;
  int defaultMax=DEFAULT_YK_PRECALC_MAX * factor;
  MIN_NUM_BUILDERS=ctx.getProperty(PROP_YK_PRECALC_MIN,defaultMin);
  MAX_NUM_BUILDERS=ctx.getProperty(PROP_YK_PRECALC_MAX,defaultMax);
  CALC_DELAY=ctx.getProperty(PROP_YK_PRECALC_DELAY,DEFAULT_YK_PRECALC_DELAY);
  _values=new LinkedBlockingQueue(MAX_NUM_BUILDERS);
  ctx.statManager().createRateStat("crypto.YKUsed","Need a YK from the queue","Encryption",new long[]{60 * 60 * 1000});
  ctx.statManager().createRateStat("crypto.YKEmpty","YK queue empty","Encryption",new long[]{60 * 60 * 1000});
  _precalcThread=new I2PThread(new YKPrecalcRunner(MIN_NUM_BUILDERS,MAX_NUM_BUILDERS),"YK Precalc",true);
  _precalcThread.setPriority(Thread.MIN_PRIORITY);
  _isRunning=true;
  _precalcThread.start();
}
