{
  String cmd=args[0].toLowerCase(Locale.US);
  if ("encodestring".equals(cmd)) {
    System.out.println(encode(args[1].getBytes()));
    return;
  }
  if ("decodestring".equals(cmd)) {
    byte[] dec=decode(args[1]);
    if (dec != null) {
      try {
        System.out.write(dec);
      }
 catch (      IOException ioe) {
        System.err.println("output error " + ioe);
      }
    }
 else {
      System.err.println("decode error");
    }
    return;
  }
  InputStream in=System.in;
  OutputStream out=System.out;
  try {
    if (args.length >= 3) {
      out=new FileOutputStream(args[2]);
    }
    if (args.length >= 2) {
      in=new FileInputStream(args[1]);
    }
    if ("encode".equals(cmd)) {
      encode(in,out);
      return;
    }
    if ("decode".equals(cmd)) {
      decode(in,out);
      return;
    }
  }
 catch (  IOException ioe) {
    ioe.printStackTrace(System.err);
  }
 finally {
    try {
      in.close();
    }
 catch (    IOException e) {
    }
    try {
      out.close();
    }
 catch (    IOException e) {
    }
  }
}
