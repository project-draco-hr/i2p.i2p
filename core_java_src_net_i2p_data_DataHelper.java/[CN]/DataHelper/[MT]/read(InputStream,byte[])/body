{
  int cur=0;
  while (cur < target.length) {
    int numRead=in.read(target,cur,target.length - cur);
    if (numRead == -1) {
      if (cur == 0)       return -1;
 else       return cur;
    }
    cur+=numRead;
  }
  return cur;
}
