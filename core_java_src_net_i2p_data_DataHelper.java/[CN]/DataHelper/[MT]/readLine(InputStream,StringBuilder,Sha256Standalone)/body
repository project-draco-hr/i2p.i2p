{
  int c=-1;
  while ((c=in.read()) != -1) {
    if (hash != null)     hash.update((byte)c);
    if (c == '\n')     break;
    buf.append((char)c);
  }
  return c != -1;
}
