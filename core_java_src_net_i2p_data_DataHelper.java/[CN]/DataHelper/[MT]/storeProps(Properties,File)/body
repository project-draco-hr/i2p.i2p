{
  PrintWriter out=null;
  try {
    out=new PrintWriter(new BufferedWriter(new OutputStreamWriter(new SecureFileOutputStream(file),"UTF-8")));
    out.println("# NOTE: This I2P config file must use UTF-8 encoding");
    for (Iterator iter=props.keySet().iterator(); iter.hasNext(); ) {
      String name=(String)iter.next();
      String val=props.getProperty(name);
      out.println(name + "=" + val);
    }
    out.flush();
    out.close();
  }
  finally {
    if (out != null)     out.close();
  }
}
