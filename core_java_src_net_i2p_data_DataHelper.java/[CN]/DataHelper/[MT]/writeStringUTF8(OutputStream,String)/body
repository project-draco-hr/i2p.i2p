{
  if (string == null) {
    writeLong(out,1,0);
  }
 else {
    byte[] raw=string.getBytes("UTF-8");
    int len=raw.length;
    if (len > 255)     throw new DataFormatException("The I2P data spec limits strings to 255 bytes or less, but this is " + len + " ["+ string+ "]");
    writeLong(out,1,len);
    out.write(raw);
  }
}
