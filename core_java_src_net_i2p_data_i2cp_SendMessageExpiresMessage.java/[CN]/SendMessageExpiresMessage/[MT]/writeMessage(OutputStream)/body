{
  if (_sessionId == null)   throw new I2CPMessageException("No session ID");
  if (_destination == null)   throw new I2CPMessageException("No dest");
  if (_payload == null)   throw new I2CPMessageException("No payload");
  if (_nonce < 0)   throw new I2CPMessageException("No nonce");
  int len=2 + _destination.size() + _payload.getSize()+ 4+ 4+ DataHelper.DATE_LENGTH;
  try {
    DataHelper.writeLong(out,4,len);
    DataHelper.writeLong(out,1,MESSAGE_TYPE);
    _sessionId.writeBytes(out);
    _destination.writeBytes(out);
    _payload.writeBytes(out);
    DataHelper.writeLong(out,4,_nonce);
    _daf.writeBytes(out);
  }
 catch (  DataFormatException dfe) {
    throw new I2CPMessageException("Error writing the msg",dfe);
  }
}
