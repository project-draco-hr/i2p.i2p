{
  if ((getSessionId() == null) || (getDestination() == null) || (getPayload() == null)|| (getNonce() <= 0)|| (_expiration == null))   throw new I2CPMessageException("Unable to write out the message as there is not enough data");
  int len=2 + getDestination().size() + getPayload().getSize()+ 4+ 4+ DataHelper.DATE_LENGTH;
  try {
    DataHelper.writeLong(out,4,len);
    DataHelper.writeLong(out,1,getType());
    getSessionId().writeBytes(out);
    getDestination().writeBytes(out);
    getPayload().writeBytes(out);
    DataHelper.writeLong(out,4,getNonce());
    DataHelper.writeDate(out,_expiration);
  }
 catch (  DataFormatException dfe) {
    throw new I2CPMessageException("Error writing the msg",dfe);
  }
}
