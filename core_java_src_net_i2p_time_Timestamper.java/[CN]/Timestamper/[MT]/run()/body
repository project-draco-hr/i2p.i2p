{
  try {
    Thread.sleep(1000);
  }
 catch (  InterruptedException ie) {
  }
  _log=_context.logManager().getLog(Timestamper.class);
  if (_log.shouldLog(Log.INFO))   _log.info("Starting timestamper");
  if (_log.shouldLog(Log.INFO))   _log.info("Starting up timestamper");
  boolean alreadyBitched=false;
  try {
    while (true) {
      updateConfig();
      if (!_disabled) {
        String serverList[]=null;
synchronized (_servers) {
          serverList=new String[_servers.size()];
          for (int i=0; i < serverList.length; i++)           serverList[i]=(String)_servers.get(i);
        }
        if (_log.shouldLog(Log.DEBUG))         _log.debug("Querying servers " + _servers);
        try {
          long now=NtpClient.currentTime(serverList);
          if (_log.shouldLog(Log.DEBUG))           _log.debug("Stamp time");
          stampTime(now);
        }
 catch (        IllegalArgumentException iae) {
          if (!alreadyBitched)           _log.log(Log.CRIT,"Unable to reach any of the NTP servers - network disconnected?");
          alreadyBitched=true;
        }
      }
      try {
        Thread.sleep(_queryFrequency);
      }
 catch (      InterruptedException ie) {
      }
    }
  }
 catch (  Throwable t) {
    _log.log(Log.CRIT,"Timestamper died!",t);
  }
}
