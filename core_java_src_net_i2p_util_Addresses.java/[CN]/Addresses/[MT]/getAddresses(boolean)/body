{
  Set<String> rv=new HashSet(4);
  try {
    InetAddress localhost=InetAddress.getLocalHost();
    InetAddress[] allMyIps=InetAddress.getAllByName(localhost.getCanonicalHostName());
    if (allMyIps != null) {
      for (int i=0; i < allMyIps.length; i++) {
        if (all)         addAll(rv,allMyIps[i]);
 else         add(rv,allMyIps[i]);
      }
    }
  }
 catch (  UnknownHostException e) {
  }
  try {
    for (Enumeration<NetworkInterface> ifcs=NetworkInterface.getNetworkInterfaces(); ifcs.hasMoreElements(); ) {
      NetworkInterface ifc=ifcs.nextElement();
      for (Enumeration<InetAddress> addrs=ifc.getInetAddresses(); addrs.hasMoreElements(); ) {
        InetAddress addr=addrs.nextElement();
        if (all)         addAll(rv,addr);
 else         add(rv,addr);
      }
    }
  }
 catch (  SocketException e) {
  }
  String[] rva=rv.toArray(new String[rv.size()]);
  Arrays.sort(rva);
  return rva;
}
