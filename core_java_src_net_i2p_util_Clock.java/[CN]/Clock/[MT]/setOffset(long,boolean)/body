{
  long delta=offsetMs - _offset;
  if (!force) {
    if ((offsetMs > MAX_OFFSET) || (offsetMs < 0 - MAX_OFFSET)) {
      getLog().error("Maximum offset shift exceeded [" + offsetMs + "], NOT HONORING IT");
      return;
    }
    if (_alreadyChanged && (System.currentTimeMillis() - _startedOn > 10 * 60 * 1000)) {
      if ((delta > MAX_LIVE_OFFSET) || (delta < 0 - MAX_LIVE_OFFSET)) {
        getLog().log(Log.CRIT,"The clock has already been updated, but you want to change it by " + delta + " to "+ offsetMs+ "?  Did something break?");
        return;
      }
    }
    if ((delta < MIN_OFFSET_CHANGE) && (delta > 0 - MIN_OFFSET_CHANGE)) {
      getLog().debug("Not changing offset since it is only " + delta + "ms");
      return;
    }
  }
  if (_alreadyChanged)   getLog().log(Log.CRIT,"Updating clock offset to " + offsetMs + "ms from "+ _offset+ "ms");
 else   getLog().log(Log.INFO,"Initializing clock offset to " + offsetMs + "ms from "+ _offset+ "ms");
  _alreadyChanged=true;
  _offset=offsetMs;
  fireOffsetChanged(delta);
}
