{
  int messages=60 * 10 * kbps;
  Random r=new Random();
  DecayingBloomFilter filter=new DecayingBloomFilter(I2PAppContext.getGlobalContext(),600 * 1000,8);
  int falsePositives=0;
  long totalTime=0;
  double fpr=0d;
  for (int j=0; j < numRuns; j++) {
    long start=System.currentTimeMillis();
    for (int i=0; i < messages; i++) {
      if (filter.add(r.nextLong())) {
        falsePositives++;
        System.out.println("False positive " + falsePositives + " (testByLong j="+ j+ " i="+ i+ ")");
      }
    }
    totalTime+=System.currentTimeMillis() - start;
    fpr=filter.getFalsePositiveRate();
    filter.clear();
  }
  filter.stopDecaying();
  System.out.println("False postive rate should be " + fpr);
  System.out.println("After " + numRuns + " runs pushing "+ messages+ " entries in "+ DataHelper.formatDuration(totalTime / numRuns)+ " per run, there were "+ falsePositives+ " false positives");
}
