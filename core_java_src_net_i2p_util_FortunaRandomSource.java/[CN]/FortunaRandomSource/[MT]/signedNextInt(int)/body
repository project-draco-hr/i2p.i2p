{
  if (n <= 0)   throw new IllegalArgumentException("n must be positive");
  int numBits=0;
  int remaining=n;
  int rv=0;
  while (remaining > 0) {
    remaining>>=1;
    rv+=nextBits(8) << numBits * 8;
    numBits++;
  }
  if (rv < 0)   rv+=n;
  return rv % n;
}
