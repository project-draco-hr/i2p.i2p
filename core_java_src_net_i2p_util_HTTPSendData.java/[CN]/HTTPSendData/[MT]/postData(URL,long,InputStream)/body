{
  try {
    HttpURLConnection con=(HttpURLConnection)url.openConnection();
    con.setDoInput(true);
    con.setDoOutput(true);
    con.setUseCaches(false);
    con.setRequestMethod("POST");
    con.setRequestProperty("Content-length","" + length);
    OutputStream out=con.getOutputStream();
    byte buf[]=new byte[64 * 1024];
    int read;
    long sent=0;
    GZIPOutputStream zipOut=new GZIPOutputStream(out);
    while ((read=dataToSend.read(buf)) != -1) {
      zipOut.write(buf,0,read);
      sent+=read;
      if (sent >= length)       break;
    }
    zipOut.flush();
    zipOut.finish();
    zipOut.close();
    out.close();
    int rv=con.getResponseCode();
    _log.debug("Posted " + sent + " bytes: "+ rv);
    return length == sent;
  }
 catch (  IOException ioe) {
    _log.error("Error posting the data",ioe);
    return false;
  }
}
