{
  boolean rv=true;
  File oldSnark=new File(olddir,"i2psnark");
  File newSnark=new File(todir,"i2psnark");
  File oldSnarkConfig=new File(olddir,"i2psnark.config");
  File newSnarkConfig=new File(todir,"i2psnark.config");
  boolean hasData=oldSnark.exists();
  if (hasData) {
    File children[]=oldSnark.listFiles();
    hasData=children != null && children.length > 0;
  }
  if (oldSnarkConfig.exists()) {
    if (hasData) {
      try {
        Properties props=new Properties();
        DataHelper.loadProps(props,oldSnarkConfig);
        String dir=props.getProperty("i2psnark.dir");
        if (dir == null)         dir="i2psnark";
        File f=new File(dir);
        props.setProperty("i2psnark.dir",f.getAbsolutePath());
        DataHelper.storeProps(props,newSnarkConfig);
        System.err.println("Copied i2psnark.config with modifications");
      }
 catch (      IOException ioe) {
        System.err.println("FAILED copy i2psnark.config");
        rv=false;
      }
    }
 else {
      copy(newSnarkConfig,todir);
      System.err.println("Copied i2psnark.config");
    }
  }
 else {
    if (hasData) {
      try {
        Properties props=new Properties();
        File f=new File("i2psnark");
        props.setProperty("i2psnark.dir",f.getAbsolutePath());
        DataHelper.storeProps(props,newSnarkConfig);
      }
 catch (      IOException ioe) {
      }
    }
  }
  if (hasData) {
    System.err.println("NOT moving the i2psnark data directory " + oldSnark.getAbsolutePath() + " to the new directory "+ newSnark.getAbsolutePath()+ ". You may move the directory contents manually WHILE I2P IS NOT RUNNING,"+ " and edit the file "+ newSnarkConfig.getAbsolutePath()+ " to configure i2psnark to use a different location by editing the i2psnark.dir configuration to be"+ " i2psnark.dir="+ oldSnark.getAbsolutePath()+ " and restart, or you may leave the i2psnark directory in its old location.");
  }
  return true;
}
