{
  byte[] temp=null;
  DataStructure orig;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  orig=createDataStructure();
  orig.writeBytes(baos);
  temp=baos.toByteArray();
  DataStructure ds;
  ByteArrayInputStream bais=new ByteArrayInputStream(temp);
  ds=createStructureToRead();
  ds.readBytes(bais);
  ((SendMessageMessage)ds).getPayload().setUnencryptedData(((SendMessageMessage)ds).getPayload().getEncryptedData());
  assertEquals(orig,ds);
}
