{
  try {
    if (_configFile != null && _config != null) {
      throw new BuildException("Specify configFile or config");
    }
 else     if (_configFile != null) {
      ConfigPersister.getInstance().load(_configFile);
      Config c=ConfigPersister.getInstance().getConfig();
      if (jar != null) {
        c.setJar(jar);
      }
      if (outfile != null) {
        c.setOutfile(outfile);
      }
      if (fileVersion != null) {
        c.getVersionInfo().setFileVersion(fileVersion);
      }
      if (txtFileVersion != null) {
        c.getVersionInfo().setTxtFileVersion(txtFileVersion);
      }
      if (productVersion != null) {
        c.getVersionInfo().setProductVersion(productVersion);
      }
      if (txtProductVersion != null) {
        c.getVersionInfo().setTxtProductVersion(txtProductVersion);
      }
    }
 else     if (_config != null) {
      ConfigPersister.getInstance().setAntConfig(_config,getProject().getBaseDir());
    }
 else {
      throw new BuildException("Specify configFile or config");
    }
    final Builder b=new Builder(Log.getAntLog());
    b.build();
  }
 catch (  ConfigPersisterException e) {
    throw new BuildException(e);
  }
catch (  BuilderException e) {
    throw new BuildException(e);
  }
}
