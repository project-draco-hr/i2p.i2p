{
  if (job == null)   return;
  if (job instanceof JobImpl)   ((JobImpl)job).addedToQueue();
  long numReady=0;
  boolean alreadyExists=false;
synchronized (_jobLock) {
    if (_readyJobs.contains(job))     alreadyExists=true;
    numReady=_readyJobs.size();
    if (!alreadyExists) {
      if (_timedJobs.contains(job))       alreadyExists=true;
    }
    _context.statManager().addRateData("jobQueue.readyJobs",numReady,0);
    if (shouldDrop(job,numReady)) {
      if (_log.shouldLog(Log.WARN))       _log.warn("Dropping job due to overload!  # ready jobs: " + numReady + ": job = "+ job);
      job.dropped();
      _context.statManager().addRateData("jobQueue.droppedJobs",1,1);
      _jobLock.notifyAll();
      return;
    }
    if (!alreadyExists) {
      if (job.getTiming().getStartAfter() <= _context.clock().now()) {
        job.getTiming().setStartAfter(_context.clock().now());
        if (job instanceof JobImpl)         ((JobImpl)job).madeReady();
        _readyJobs.add(job);
        _jobLock.notifyAll();
      }
 else {
        _timedJobs.add(job);
        _jobLock.notifyAll();
      }
    }
 else {
      if (_log.shouldLog(Log.DEBUG))       _log.debug("Not adding already enqueued job " + job.getName());
    }
  }
  return;
}
