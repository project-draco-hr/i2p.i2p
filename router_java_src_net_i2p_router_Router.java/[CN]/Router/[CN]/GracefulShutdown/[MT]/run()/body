{
  while (true) {
    boolean shutdown=(null != _config.getProperty(PROP_SHUTDOWN_IN_PROGRESS));
    if (shutdown) {
      if (_context.tunnelManager().getParticipatingCount() <= 0) {
        if (_log.shouldLog(Log.CRIT))         _log.log(Log.CRIT,"Graceful shutdown progress - no more tunnels, safe to die");
        shutdown(EXIT_GRACEFUL);
        return;
      }
 else {
        try {
synchronized (Thread.currentThread()) {
            Thread.currentThread().wait(10 * 1000);
          }
        }
 catch (        InterruptedException ie) {
        }
      }
    }
 else {
      try {
synchronized (Thread.currentThread()) {
          Thread.currentThread().wait();
        }
      }
 catch (      InterruptedException ie) {
      }
    }
  }
}
