{
  boolean error=false;
  Getopt g=new Getopt("router",args,"");
  int c;
  while ((c=g.getopt()) != -1) {
switch (c) {
default :
      error=true;
  }
}
boolean rebuild=false;
int remaining=args.length - g.getOptind();
if (remaining > 1) {
  error=true;
}
 else if (remaining == 1) {
  rebuild=args[g.getOptind()].equals("rebuild");
  ;
  if (!rebuild)   error=true;
}
if (error) throw new IllegalArgumentException();
System.out.println("Starting I2P " + RouterVersion.FULL_VERSION);
Router r=new Router();
if (rebuild) {
  r.rebuildNewIdentity();
}
 else {
  r.installUpdates();
  r.runRouter();
}
}
