{
  if (_log.shouldLog(Log.INFO))   _log.info("Rebuilding new routerInfo");
  RouterInfo ri=null;
  if (_routerInfo != null)   ri=new RouterInfo(_routerInfo);
 else   ri=new RouterInfo();
  try {
    ri.setPublished(_context.clock().now());
    Properties stats=_context.statPublisher().publishStatistics();
    ri.setOptions(stats);
    ri.setAddresses(_context.commSystem().createAddresses());
    SigningPrivateKey key=_context.keyManager().getSigningPrivateKey();
    if (key == null) {
      _log.log(Log.CRIT,"Internal error - signing private key not known?  wtf");
      return;
    }
    ri.sign(key);
    setRouterInfo(ri);
    _context.netDb().publish(ri);
  }
 catch (  DataFormatException dfe) {
    _log.log(Log.CRIT,"Internal error - unable to sign our own address?!",dfe);
  }
}
