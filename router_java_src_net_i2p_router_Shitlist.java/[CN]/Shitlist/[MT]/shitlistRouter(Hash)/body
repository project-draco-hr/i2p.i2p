{
  if (peer == null)   return false;
  boolean wasAlready=false;
  if (_log.shouldLog(Log.INFO))   _log.info("Shitlisting router " + peer.toBase64(),new Exception("Shitlist cause"));
synchronized (_shitlist) {
    Date oldDate=(Date)_shitlist.put(peer,new Date(Clock.getInstance().now()));
    wasAlready=(null == oldDate);
  }
  NetworkDatabaseFacade.getInstance().fail(peer);
  TunnelManagerFacade.getInstance().peerFailed(peer);
  return wasAlready;
}
