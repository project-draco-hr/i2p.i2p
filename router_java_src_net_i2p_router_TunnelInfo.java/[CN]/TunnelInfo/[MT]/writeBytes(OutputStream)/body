{
  if (_id == null)   throw new DataFormatException("Invalid tunnel ID: " + _id);
  if (_options == null)   throw new DataFormatException("Options are null");
  if (_settings == null)   throw new DataFormatException("Settings are null");
  DataHelper.writeProperties(out,_options);
  if (_destination != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _destination.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  if (_thisHop != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _thisHop.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  if (_nextHop != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _nextHop.writeBytes(out);
    _nextHopId.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  if (_nextHopInfo != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _nextHopInfo.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  _id.writeBytes(out);
  if (_configurationKey != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _configurationKey.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  if (_encryptionKey != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _encryptionKey.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  if (_signingKey != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _signingKey.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  if (_verificationKey != null) {
    DataHelper.writeBoolean(out,Boolean.TRUE);
    _verificationKey.writeBytes(out);
  }
 else {
    DataHelper.writeBoolean(out,Boolean.FALSE);
  }
  _settings.writeBytes(out);
  DataHelper.writeBoolean(out,new Boolean(_ready));
}
