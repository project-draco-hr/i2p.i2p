{
  while (!_dead) {
    I2CPMessage msg=null;
synchronized (_messagesToWrite) {
      if (_messagesToWrite.size() > 0) {
        msg=(I2CPMessage)_messagesToWrite.remove(0);
      }
 else {
        try {
          _messagesToWrite.wait();
        }
 catch (        InterruptedException ie) {
        }
        if (_messagesToWrite.size() > 0)         msg=(I2CPMessage)_messagesToWrite.remove(0);
      }
    }
    if (msg != null)     writeMessage(msg);
  }
}
