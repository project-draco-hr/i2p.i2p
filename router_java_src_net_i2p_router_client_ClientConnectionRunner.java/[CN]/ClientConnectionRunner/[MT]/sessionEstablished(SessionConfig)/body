{
  _destHashCache=config.getDestination().calculateHash();
  if (_log.shouldLog(Log.DEBUG))   _log.debug("SessionEstablished called for destination " + _destHashCache.toBase64());
  _config=config;
  Properties opts=config.getOptions();
  if (opts != null) {
    _dontSendMSM="none".equals(opts.getProperty(I2PClient.PROP_RELIABILITY,"").toLowerCase(Locale.US));
    _dontSendMSMOnReceive=Boolean.parseBoolean(opts.getProperty(I2PClient.PROP_FAST_RECEIVE));
  }
  if (_sessionKeyManager == null) {
    int tags=TransientSessionKeyManager.DEFAULT_TAGS;
    int thresh=TransientSessionKeyManager.LOW_THRESHOLD;
    if (opts != null) {
      String ptags=opts.getProperty(PROP_TAGS);
      if (ptags != null) {
        try {
          tags=Integer.parseInt(ptags);
        }
 catch (        NumberFormatException nfe) {
        }
      }
      String pthresh=opts.getProperty(PROP_THRESH);
      if (pthresh != null) {
        try {
          thresh=Integer.parseInt(pthresh);
        }
 catch (        NumberFormatException nfe) {
        }
      }
    }
    _sessionKeyManager=new TransientSessionKeyManager(_context,tags,thresh);
  }
 else {
    _log.error("SessionEstablished called for twice for destination " + _destHashCache.toBase64().substring(0,4));
  }
  return _manager.destinationEstablished(this);
}
