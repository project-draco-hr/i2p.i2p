{
  if (_log.shouldLog(Log.INFO))   _log.info("Updating options - old: " + _runner.getConfig() + " new: "+ message.getSessionConfig());
  if (!message.getSessionConfig().getDestination().equals(_runner.getConfig().getDestination())) {
    _log.error("Dest mismatch");
    sendStatusMessage(SessionStatusMessage.STATUS_INVALID);
    _runner.stopRunning();
    return;
  }
  _runner.getConfig().getOptions().putAll(message.getSessionConfig().getOptions());
  Hash dest=_runner.getConfig().getDestination().calculateHash();
  ClientTunnelSettings settings=new ClientTunnelSettings(dest);
  Properties props=new Properties();
  props.putAll(_runner.getConfig().getOptions());
  settings.readFromProperties(props);
  _context.tunnelManager().setInboundSettings(dest,settings.getInboundSettings());
  _context.tunnelManager().setOutboundSettings(dest,settings.getOutboundSettings());
  sendStatusMessage(SessionStatusMessage.STATUS_UPDATED);
}
