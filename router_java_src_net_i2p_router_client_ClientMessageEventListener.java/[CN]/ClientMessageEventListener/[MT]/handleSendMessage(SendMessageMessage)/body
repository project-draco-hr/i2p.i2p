{
  SessionId sid=message.getSessionId();
  SessionConfig cfg=_runner.getConfig(sid);
  if (cfg == null) {
    if (_log.shouldLog(Log.ERROR))     _log.error("SendMessage w/o session: " + sid);
    _runner.disconnectClient("SendMessage w/o session: " + sid);
    return;
  }
  if (_log.shouldLog(Log.DEBUG))   _log.debug("handleSendMessage called");
  long beforeDistribute=_context.clock().now();
  MessageId id=_runner.distributeMessage(message);
  long timeToDistribute=_context.clock().now() - beforeDistribute;
  _runner.ackSendMessage(sid,id,message.getNonce());
  _context.statManager().addRateData("client.distributeTime",timeToDistribute);
  if ((timeToDistribute > 50) && (_log.shouldLog(Log.DEBUG)))   _log.debug("Took too long to distribute the message (which holds up the ack): " + timeToDistribute);
}
