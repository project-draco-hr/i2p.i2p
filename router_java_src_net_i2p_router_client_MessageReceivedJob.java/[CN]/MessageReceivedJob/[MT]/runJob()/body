{
  if (_runner.isDead())   return;
  MessageId id=null;
  try {
    long nextID=_runner.getNextMessageId();
    if (_sendDirect) {
      sendMessage(nextID);
    }
 else {
      id=new MessageId(nextID);
      _runner.setPayload(id,_payload);
      messageAvailable(id,_payload.getSize());
    }
  }
 catch (  I2CPMessageException ime) {
    if (_log.shouldLog(Log.WARN))     _log.warn("Error writing out the message",ime);
    if (id != null && !_sendDirect)     _runner.removePayload(id);
  }
}
