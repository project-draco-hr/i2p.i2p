{
  RouterInfo ri=new RouterInfo(Router.getInstance().getRouterInfo());
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Old routerInfo contains " + ri.getAddresses().size() + " addresses and "+ ri.getOptions().size()+ " options");
  Properties stats=StatisticsManager.getInstance().publishStatistics();
  try {
    ri.setPublished(Clock.getInstance().now());
    ri.setOptions(stats);
    ri.setAddresses(CommSystemFacade.getInstance().createAddresses());
    ri.sign(KeyManager.getInstance().getSigningPrivateKey());
    Router.getInstance().setRouterInfo(ri);
    if (_log.shouldLog(Log.INFO))     _log.info("Newly updated routerInfo is published with " + stats.size() + "/"+ ri.getOptions().size()+ " options on "+ new Date(ri.getPublished()));
    NetworkDatabaseFacade.getInstance().publish(ri);
  }
 catch (  DataFormatException dfe) {
    _log.error("Error signing the updated local router info!",dfe);
  }
  requeue(PUBLISH_DELAY + RandomSource.getInstance().nextInt((int)PUBLISH_DELAY));
}
