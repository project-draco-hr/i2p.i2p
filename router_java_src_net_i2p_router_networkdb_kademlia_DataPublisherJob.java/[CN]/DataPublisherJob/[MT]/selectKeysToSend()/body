{
  Set explicit=_facade.getExplicitSendKeys();
  Set toSend=new HashSet(MAX_SEND_PER_RUN);
  if (explicit.size() < MAX_SEND_PER_RUN) {
    toSend.addAll(explicit);
    _facade.removeFromExplicitSend(explicit);
    Set passive=_facade.getPassivelySendKeys();
    Set psend=new HashSet(passive.size());
    for (Iterator iter=passive.iterator(); iter.hasNext(); ) {
      if (toSend.size() >= MAX_SEND_PER_RUN)       break;
      Hash key=(Hash)iter.next();
      toSend.add(key);
      psend.add(key);
    }
    _facade.removeFromPassiveSend(psend);
  }
 else {
    for (Iterator iter=explicit.iterator(); iter.hasNext(); ) {
      if (toSend.size() >= MAX_SEND_PER_RUN)       break;
      Hash key=(Hash)iter.next();
      toSend.add(key);
    }
    _facade.removeFromExplicitSend(toSend);
  }
  return toSend;
}
