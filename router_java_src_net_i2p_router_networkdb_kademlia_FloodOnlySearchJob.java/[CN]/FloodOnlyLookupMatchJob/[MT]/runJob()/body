{
  if ((getContext().netDb().lookupLeaseSetLocally(_search.getKey()) != null) || (getContext().netDb().lookupRouterInfoLocally(_search.getKey()) != null)) {
    if (_log.shouldLog(Log.INFO))     _log.info(_search.getJobId() + ": search match and found locally");
    _search.success();
  }
 else {
    int remaining=_search.getLookupsRemaining();
    if (_log.shouldLog(Log.INFO))     _log.info(_search.getJobId() + ": got a DatabaseSearchReply when we were looking for " + _search.getKey().toBase64()+ ", with "+ remaining+ " outstanding searches");
    if (_search.shouldProcessDSRM() && _dsrm != null) {
      if (_log.shouldLog(Log.INFO))       _log.info(_search.getJobId() + ": Processing DatabaseSearchReply");
      getContext().jobQueue().addJob(new SingleLookupJob(getContext(),_dsrm));
    }
    _search.failed();
  }
}
