{
  if (message == null)   return false;
  if (message instanceof DatabaseStoreMessage) {
    DatabaseStoreMessage dsm=(DatabaseStoreMessage)message;
    if (_search.getKey().equals(dsm.getKey())) {
      _search.decrementRemaining();
      _matchFound=true;
      return true;
    }
  }
 else   if (message instanceof DatabaseSearchReplyMessage) {
    DatabaseSearchReplyMessage dsrm=(DatabaseSearchReplyMessage)message;
    if (_search.getKey().equals(dsrm.getSearchKey())) {
      _search.decrementRemaining(dsrm.getFromHash());
      _context.profileManager().dbLookupReply(dsrm.getFromHash(),0,dsrm.getNumReplies(),0,0,System.currentTimeMillis() - _search.getCreated());
      if (_search.getLookupsRemaining() <= 0)       return true;
 else       return false;
    }
  }
  return false;
}
