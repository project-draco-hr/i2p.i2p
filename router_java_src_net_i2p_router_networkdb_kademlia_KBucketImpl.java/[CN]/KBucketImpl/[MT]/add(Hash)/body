{
synchronized (_entries) {
    if (!_entries.contains(peer))     _entries.add(peer);
    if (_lastShuffle + SHUFFLE_DELAY < _context.clock().now() && !SearchJob.onlyQueryFloodfillPeers((RouterContext)_context)) {
      Collections.shuffle(_entries,_context.random());
      _lastShuffle=_context.clock().now();
    }
    return _entries.size();
  }
}
