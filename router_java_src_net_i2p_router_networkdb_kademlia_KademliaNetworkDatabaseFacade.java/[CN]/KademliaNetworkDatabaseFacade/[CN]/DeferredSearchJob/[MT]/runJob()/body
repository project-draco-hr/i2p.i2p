{
  long remaining=getContext().clock().now() - _expiration;
  if (remaining <= 0) {
    if (_log.shouldLog(Log.WARN))     _log.warn("Deferred search for " + _key.toBase64() + " expired prior to sending");
    if (_onFailed != null)     getContext().jobQueue().addJob(_onFailed);
  }
 else {
    LeaseSet ls=lookupLeaseSetLocally(_key);
    if (ls == null) {
      RouterInfo ri=lookupRouterInfoLocally(_key);
      if (ri == null) {
        search(_key,_onFind,_onFailed,remaining,_isLease);
      }
 else {
        if (_onFind != null)         getContext().jobQueue().addJob(_onFind);
      }
    }
 else {
      if (_onFind != null)       getContext().jobQueue().addJob(_onFind);
    }
  }
}
