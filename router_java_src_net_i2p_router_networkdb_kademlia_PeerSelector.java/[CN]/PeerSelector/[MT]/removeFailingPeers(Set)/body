{
  List failing=new ArrayList(16);
  for (Iterator iter=peerHashes.iterator(); iter.hasNext(); ) {
    Hash cur=(Hash)iter.next();
    if (ProfileManager.getInstance().isFailing(cur)) {
      if (_log.shouldLog(Log.DEBUG))       _log.debug("Peer " + cur.toBase64() + " is failing, don't include them in the peer selection");
      failing.add(cur);
    }
  }
  peerHashes.removeAll(failing);
}
