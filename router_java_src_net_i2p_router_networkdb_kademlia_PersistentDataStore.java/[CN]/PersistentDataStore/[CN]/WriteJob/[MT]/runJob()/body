{
  _log.info("Writing key " + _key);
  FileOutputStream fos=null;
  File dbFile=null;
  try {
    String filename=null;
    File dbDir=getDbDir();
    if (_data instanceof LeaseSet)     filename=getLeaseSetName(_key);
 else     if (_data instanceof RouterInfo)     filename=getRouterInfoName(_key);
 else     throw new IOException("We don't know how to write objects of type " + _data.getClass().getName());
    dbFile=new File(dbDir,filename);
    long dataPublishDate=getPublishDate();
    if (dbFile.lastModified() < dataPublishDate) {
      fos=new FileOutputStream(dbFile);
      try {
        _data.writeBytes(fos);
        fos.close();
        dbFile.setLastModified(dataPublishDate);
      }
 catch (      DataFormatException dfe) {
        _log.error("Error writing out malformed object as " + _key + ": "+ _data,dfe);
        dbFile.delete();
      }
    }
 else {
    }
  }
 catch (  IOException ioe) {
    _log.error("Error writing out the object",ioe);
  }
 finally {
    if (fos != null)     try {
      fos.close();
    }
 catch (    IOException ioe) {
    }
  }
}
