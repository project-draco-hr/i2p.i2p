{
  if (_curIndex >= _msg.getNumReplies()) {
    getContext().profileManager().dbLookupReply(_peer,_newPeers,_seenPeers,_invalidPeers,_duplicatePeers,_duration);
    if (_newPeers > 0)     newPeersFound(_newPeers);
  }
 else {
    Hash peer=_msg.getReply(_curIndex);
    RouterInfo info=getContext().netDb().lookupRouterInfoLocally(peer);
    if (info == null) {
      getContext().netDb().lookupRouterInfo(peer,null,null,_timeoutMs);
    }
    if (_state.wasAttempted(peer)) {
      _duplicatePeers++;
    }
    if (_log.shouldLog(Log.DEBUG))     _log.debug(getJobId() + ": dbSearchReply received on search referencing router " + peer);
    if (_facade.getKBuckets().add(peer))     _newPeers++;
 else     _seenPeers++;
    _curIndex++;
    requeue(0);
  }
}
