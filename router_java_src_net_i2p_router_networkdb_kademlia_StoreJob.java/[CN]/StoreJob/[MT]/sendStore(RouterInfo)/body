{
  DatabaseStoreMessage msg=new DatabaseStoreMessage(getContext());
  msg.setKey(_state.getTarget());
  if (_state.getData() instanceof RouterInfo)   msg.setRouterInfo((RouterInfo)_state.getData());
 else   if (_state.getData() instanceof LeaseSet)   msg.setLeaseSet((LeaseSet)_state.getData());
 else   throw new IllegalArgumentException("Storing an unknown data type! " + _state.getData());
  msg.setMessageExpiration(getContext().clock().now() + _timeoutMs);
  if (router.getIdentity().equals(getContext().router().getRouterInfo().getIdentity())) {
    if (_log.shouldLog(Log.ERROR))     _log.error(getJobId() + ": Dont send store to ourselves - why did we try?");
    return;
  }
 else {
  }
  sendStore(msg,router,getContext().clock().now() + STORE_TIMEOUT_MS);
}
