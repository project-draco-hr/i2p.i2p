{
  double capacity=0;
  RateStat acceptStat=profile.getTunnelCreateResponseTime();
  RateStat rejectStat=profile.getTunnelHistory().getRejectionRate();
  RateStat failedStat=profile.getTunnelHistory().getFailedRate();
  capacity+=estimatePartial(acceptStat,rejectStat,failedStat,10 * 60 * 1000);
  capacity+=estimatePartial(acceptStat,rejectStat,failedStat,30 * 60 * 1000);
  capacity+=estimatePartial(acceptStat,rejectStat,failedStat,60 * 60 * 1000);
  capacity+=estimatePartial(acceptStat,rejectStat,failedStat,24 * 60 * 60* 1000);
  if (tooOld(profile))   capacity=1;
  capacity+=profile.getReliabilityBonus();
  return capacity;
}
