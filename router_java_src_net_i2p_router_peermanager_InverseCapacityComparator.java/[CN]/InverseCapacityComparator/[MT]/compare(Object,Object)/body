{
  if ((lhs == null) || (rhs == null) || (!(lhs instanceof PeerProfile))|| (!(rhs instanceof PeerProfile)))   throw new ClassCastException("Only profiles can be compared - lhs = " + lhs + " rhs = "+ rhs);
  PeerProfile left=(PeerProfile)lhs;
  PeerProfile right=(PeerProfile)rhs;
  double rval=right.getCapacityValue();
  double lval=left.getCapacityValue();
  if (lval == rval) {
    rval=right.getSpeedValue();
    lval=left.getSpeedValue();
    if (lval == rval) {
      return DataHelper.compareTo(right.getPeer().getData(),left.getPeer().getData());
    }
 else {
    }
  }
  boolean rightBigger=rval > lval;
  if (rightBigger)   return 1;
 else   return -1;
}
