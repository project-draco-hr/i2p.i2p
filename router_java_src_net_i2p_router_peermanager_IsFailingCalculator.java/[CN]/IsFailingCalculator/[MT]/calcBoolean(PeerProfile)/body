{
  if ((profile.getCommError().getRate(60 * 1000).getCurrentEventCount() > 0) || (profile.getCommError().getRate(60 * 1000).getLastEventCount() > 0) || (profile.getCommError().getRate(10 * 60 * 1000).getCurrentEventCount() > 0)) {
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Peer " + profile.getPeer().toBase64() + " is failing because it had a comm error recently ");
    return true;
  }
 else {
    Rate rejectRate=profile.getTunnelHistory().getRejectionRate().getRate(10 * 60 * 1000);
    if (rejectRate.getCurrentEventCount() >= 2) {
      if (_log.shouldLog(Log.DEBUG))       _log.debug("Peer " + profile.getPeer().toBase64() + " is failing because they rejected some tunnels recently");
      return true;
    }
    Rate failedRate=profile.getTunnelHistory().getFailedRate().getRate(60 * 1000);
    if (failedRate.getCurrentEventCount() >= 2) {
      if (_log.shouldLog(Log.DEBUG))       _log.debug("Peer " + profile.getPeer().toBase64() + " is failing because too many of their tunnels failed recently");
      return true;
    }
    return false;
  }
}
