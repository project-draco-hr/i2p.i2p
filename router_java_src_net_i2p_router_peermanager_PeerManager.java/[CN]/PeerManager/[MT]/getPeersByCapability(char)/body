{
  if (false) {
synchronized (_capabilitiesByPeer) {
      List peers=locked_getPeers(capability);
      if (peers != null)       return new ArrayList(peers);
    }
    return null;
  }
 else {
    FloodfillNetworkDatabaseFacade f=(FloodfillNetworkDatabaseFacade)_context.netDb();
    List routerInfos=f.getKnownRouterData();
    List rv=new ArrayList();
    for (Iterator iter=routerInfos.iterator(); iter.hasNext(); ) {
      RouterInfo ri=(RouterInfo)iter.next();
      String caps=ri.getCapabilities();
      if (caps.indexOf(capability) >= 0)       rv.add(ri.getIdentity().calculateHash());
    }
    if (_log.shouldLog(Log.WARN))     _log.warn("Peers with capacity " + capability + ": "+ rv.size());
    return rv;
  }
}
