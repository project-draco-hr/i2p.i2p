{
  long responseTime=getContext().clock().now() - _testBegin;
  if (_log.shouldLog(Log.DEBUG))   _log.debug("successful peer test after " + responseTime + " for "+ _peer.getIdentity().getHash().toBase64()+ " using outbound tunnel "+ _sendTunnel.getTunnelId().getTunnelId()+ " and inbound tunnel "+ _replyTunnel.getTunnelId().getTunnelId());
  getContext().profileManager().dbLookupSuccessful(_peer.getIdentity().getHash(),responseTime);
  _sendTunnel.setLastTested(getContext().clock().now());
  _replyTunnel.setLastTested(getContext().clock().now());
  TunnelInfo cur=_replyTunnel;
  while (cur != null) {
    Hash peer=cur.getThisHop();
    if ((peer != null) && (!getContext().routerHash().equals(peer)))     getContext().profileManager().tunnelTestSucceeded(peer,responseTime);
    cur=cur.getNextHopInfo();
  }
  cur=_sendTunnel;
  while (cur != null) {
    Hash peer=cur.getThisHop();
    if ((peer != null) && (!getContext().routerHash().equals(peer)))     getContext().profileManager().tunnelTestSucceeded(peer,responseTime);
    cur=cur.getNextHopInfo();
  }
}
