{
  long responseTime=_context.clock().now() - _testBegin;
  if (_log.shouldLog(Log.DEBUG))   _log.debug("successful peer test after " + responseTime + " for "+ _peer.getIdentity().getHash().toBase64()+ " using outbound tunnel "+ _sendTunnel.getTunnelId().getTunnelId()+ " and inbound tunnel "+ _replyTunnel.getTunnelId().getTunnelId());
  _context.profileManager().dbLookupSuccessful(_peer.getIdentity().getHash(),responseTime);
  _sendTunnel.setLastTested(_context.clock().now());
  _replyTunnel.setLastTested(_context.clock().now());
  TunnelInfo cur=_replyTunnel;
  while (cur != null) {
    Hash peer=cur.getThisHop();
    if ((peer != null) && (!_context.routerHash().equals(peer)))     _context.profileManager().tunnelTestSucceeded(peer,responseTime);
    cur=cur.getNextHopInfo();
  }
  cur=_sendTunnel;
  while (cur != null) {
    Hash peer=cur.getThisHop();
    if ((peer != null) && (!_context.routerHash().equals(peer)))     _context.profileManager().tunnelTestSucceeded(peer,responseTime);
    cur=cur.getNextHopInfo();
  }
}
