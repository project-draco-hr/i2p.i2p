{
  if ((profile == null) || (profile.getPeer() == null))   return null;
  if (_log.shouldLog(Log.DEBUG))   _log.debug("New profile created for " + profile.getPeer().toBase64());
synchronized (_reorganizeLock) {
    PeerProfile old=locked_getProfile(profile.getPeer());
    profile.coallesceStats();
    locked_placeProfile(profile);
    _strictCapacityOrder.add(profile);
    return old;
  }
}
