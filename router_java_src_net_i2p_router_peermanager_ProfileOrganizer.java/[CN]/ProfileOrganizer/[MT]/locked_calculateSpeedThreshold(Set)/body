{
  Set speeds=new TreeSet();
  for (Iterator iter=reordered.iterator(); iter.hasNext(); ) {
    PeerProfile profile=(PeerProfile)iter.next();
    if (profile.getCapacityValue() >= _thresholdCapacityValue) {
      speeds.add(new Double(0 - profile.getSpeedValue()));
    }
 else {
      break;
    }
  }
  int i=0;
  for (Iterator iter=speeds.iterator(); iter.hasNext(); i++) {
    Double speed=(Double)iter.next();
    if (i >= (speeds.size() / 2)) {
      _thresholdSpeedValue=0 - speed.doubleValue();
      break;
    }
  }
  if (_log.shouldLog(Log.INFO))   _log.info("Threshold value for speed: " + _thresholdSpeedValue + " out of speeds: "+ speeds);
}
