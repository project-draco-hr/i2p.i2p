{
  List all=new ArrayList(peers.keySet());
  if (toExclude != null)   all.removeAll(toExclude);
  all.removeAll(matches);
  all.remove(_us);
  Collections.shuffle(all,_random);
  for (int i=0; (matches.size() < howMany) && (i < all.size()); i++) {
    Hash peer=(Hash)all.get(i);
    boolean ok=isSelectable(peer);
    if (ok)     matches.add(peer);
 else     matches.remove(peer);
  }
}
