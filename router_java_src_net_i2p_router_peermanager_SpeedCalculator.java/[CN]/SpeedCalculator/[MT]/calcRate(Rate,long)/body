{
  long events=rate.getCurrentEventCount();
  if (events >= 1) {
    double ms=rate.getCurrentTotalEventTime();
    double bytes=rate.getCurrentTotalValue();
    if (_log.shouldLog(Log.DEBUG))     _log.debug("calculating rate: ms=" + ((int)ms) + " bytes="+ ((int)bytes));
    if ((bytes > 0) && (ms > 0)) {
      if (getUseInstantaneousRates()) {
        return (bytes * 1000.0d) / ms;
      }
 else {
        return (bytes * 1000.0d) / period;
      }
    }
  }
  return 0.0d;
}
