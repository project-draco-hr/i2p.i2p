{
  if (period < 0) {
    Rate dbResponseRate=profile.getDbResponseTime().getRate(60 * 60 * 1000l);
    Rate tunnelResponseRate=profile.getTunnelCreateResponseTime().getRate(60 * 60 * 1000l);
    Rate tunnelTestRate=profile.getTunnelTestResponseTime().getRate(60 * 60 * 1000l);
    long dbResponses=tunnelTestOnly ? 0 : dbResponseRate.getLifetimeEventCount();
    long tunnelResponses=tunnelTestOnly ? 0 : tunnelResponseRate.getLifetimeEventCount();
    long tunnelTests=tunnelTestRate.getLifetimeEventCount();
    return dbResponses + tunnelResponses + tunnelTests;
  }
 else {
    Rate dbResponseRate=profile.getDbResponseTime().getRate(period);
    Rate tunnelResponseRate=profile.getTunnelCreateResponseTime().getRate(period);
    Rate tunnelTestRate=profile.getTunnelTestResponseTime().getRate(period);
    long dbResponses=tunnelTestOnly ? 0 : dbResponseRate.getCurrentEventCount();
    long tunnelResponses=tunnelTestOnly ? 0 : tunnelResponseRate.getCurrentEventCount();
    long tunnelTests=tunnelTestRate.getCurrentEventCount();
    if (_log.shouldLog(Log.DEBUG))     _log.debug("TunnelTests for period " + period + ": "+ tunnelTests+ " last: "+ tunnelTestRate.getLastEventCount()+ " lifetime: "+ tunnelTestRate.getLifetimeEventCount());
    return dbResponses + tunnelResponses + tunnelTests;
  }
}
