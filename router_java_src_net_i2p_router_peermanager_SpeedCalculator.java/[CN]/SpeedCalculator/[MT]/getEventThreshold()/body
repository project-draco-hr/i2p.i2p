{
  if (_context.router() != null) {
    String threshold=_context.router().getConfigSetting(PROP_EVENT_THRESHOLD);
    if (threshold != null) {
      try {
        return Long.parseLong(threshold);
      }
 catch (      NumberFormatException nfe) {
        if (_log.shouldLog(Log.WARN))         _log.warn("Event threshold for speed improperly set in the router config [" + threshold + "]",nfe);
      }
    }
  }
  String threshold=_context.getProperty(PROP_EVENT_THRESHOLD,"" + DEFAULT_EVENT_THRESHOLD);
  if (threshold != null) {
    try {
      return Long.parseLong(threshold);
    }
 catch (    NumberFormatException nfe) {
      if (_log.shouldLog(Log.WARN))       _log.warn("Event threshold for speed improperly set in the router environment [" + threshold + "]",nfe);
    }
  }
  return DEFAULT_EVENT_THRESHOLD;
}
