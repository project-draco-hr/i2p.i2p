{
  Router.clearCaches();
  Log log=_context.logManager().getLog(Router.class);
  log.log(Log.CRIT,"Thread ran out of memory, shutting down I2P",oom);
  if (_context.router().isFinalShutdownInProgress())   return;
  for (int i=0; i < 5; i++) {
    try {
      log.log(Log.CRIT,"free mem: " + Runtime.getRuntime().freeMemory() + " total mem: "+ Runtime.getRuntime().totalMemory());
      break;
    }
 catch (    OutOfMemoryError oome) {
    }
  }
  log.log(Log.CRIT,"To prevent future shutdowns, increase wrapper.java.maxmemory in $I2P/wrapper.config");
  _context.router().shutdown(Router.EXIT_OOM);
}
