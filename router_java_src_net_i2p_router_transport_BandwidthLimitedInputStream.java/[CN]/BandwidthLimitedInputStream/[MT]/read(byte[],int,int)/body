{
  int read=in.read(dest,off,len);
  FIFOBandwidthLimiter.Request req=null;
  if (_pullFromOutbound)   req=_context.bandwidthLimiter().requestOutbound(read,_peerSource);
 else   req=_context.bandwidthLimiter().requestInbound(read,_peerSource);
  while ((req.getPendingInboundRequested() > 0) || (req.getPendingOutboundRequested() > 0)) {
    req.waitForNextAllocation();
  }
  return read;
}
