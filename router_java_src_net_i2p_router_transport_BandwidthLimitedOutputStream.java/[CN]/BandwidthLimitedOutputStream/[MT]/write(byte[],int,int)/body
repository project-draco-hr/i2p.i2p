{
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Writing " + len + " bytes");
  if (src == null)   return;
  if (len <= 0)   return;
  if (len + off > src.length)   throw new IllegalArgumentException("wtf are you thinking?  len=" + len + ", off="+ off+ ", data="+ src.length);
  if (len <= CHUNK_SIZE) {
    _context.bandwidthLimiter().delayOutbound(_peer,len);
    out.write(src,off,len);
  }
 else {
    int i=0;
    while (i + CHUNK_SIZE < len) {
      _context.bandwidthLimiter().delayOutbound(_peer,CHUNK_SIZE);
      out.write(src,off + i,CHUNK_SIZE);
      i+=CHUNK_SIZE;
    }
    int remainder=(len % CHUNK_SIZE);
    if (remainder > 0) {
      _context.bandwidthLimiter().delayOutbound(_peer,remainder);
      out.write(src,i,remainder);
    }
  }
}
