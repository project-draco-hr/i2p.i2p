{
  if (!TransportManager.isNTCPEnabled(ctx))   return null;
  String name=ctx.router().getConfigSetting(PROP_I2NP_NTCP_HOSTNAME);
  String port=ctx.router().getConfigSetting(PROP_I2NP_NTCP_PORT);
  if ((name == null) || (port == null) || (name.trim().length() <= 0)|| ("null".equals(name)))   return null;
  try {
    int p=Integer.parseInt(port);
    if ((p <= 0) || (p > 64 * 1024))     return null;
  }
 catch (  NumberFormatException nfe) {
    return null;
  }
  Properties props=new Properties();
  props.setProperty(NTCPAddress.PROP_HOST,name);
  props.setProperty(NTCPAddress.PROP_PORT,port);
  RouterAddress addr=new RouterAddress();
  addr.setCost(NTCPAddress.DEFAULT_COST);
  addr.setOptions(props);
  addr.setTransportStyle(NTCPTransport.STYLE);
  Map<String,String> changes=new HashMap();
  changes.put(PROP_I2NP_NTCP_HOSTNAME,name);
  changes.put(PROP_I2NP_NTCP_PORT,port);
  ctx.router().saveConfig(changes,null);
  return addr;
}
