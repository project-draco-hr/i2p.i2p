{
  _lastRefillTime=_context.clock().now();
  while (true) {
    long now=_context.clock().now();
    if (now >= _lastCheckConfigTime + _configCheckPeriodMs) {
      checkConfig();
      now=_context.clock().now();
      _lastCheckConfigTime=now;
    }
    boolean updated=updateQueues(now);
    if (updated) {
      _lastRefillTime=now;
    }
    try {
      Thread.sleep(_replenishFrequency);
    }
 catch (    InterruptedException ie) {
    }
  }
}
