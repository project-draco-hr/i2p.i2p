{
  String oldCountry=_context.router().getConfigSetting(PROP_IP_COUNTRY);
  Hash ourHash=_context.routerHash();
  if (ourHash == null)   return;
  String country=_context.commSystem().getCountry(ourHash);
  if (country != null && !country.equals(oldCountry)) {
    _context.router().saveConfig(PROP_IP_COUNTRY,country);
    if (_context.commSystem().isInBadCountry() && _context.getProperty(Router.PROP_HIDDEN_HIDDEN) == null) {
      String name=fullName(country);
      if (name == null)       name=country;
      _log.logAlways(Log.WARN,"Setting hidden mode to protect you in " + name + ", you may override on the network configuration page");
      _context.router().rebuildRouterInfo();
    }
  }
}
