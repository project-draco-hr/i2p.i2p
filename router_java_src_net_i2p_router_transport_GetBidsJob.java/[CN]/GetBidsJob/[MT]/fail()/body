{
  if (_msg.getOnFailedSendJob() != null) {
    _context.jobQueue().addJob(_msg.getOnFailedSendJob());
  }
  if (_msg.getOnFailedReplyJob() != null) {
    _context.jobQueue().addJob(_msg.getOnFailedReplyJob());
  }
  MessageSelector selector=_msg.getReplySelector();
  if (selector != null) {
    _context.messageRegistry().unregisterPending(_msg);
  }
  _context.profileManager().messageFailed(_msg.getTarget().getIdentity().getHash());
  _msg.discardData();
}
