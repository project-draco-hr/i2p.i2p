{
  Log log=context.logManager().getLog(GetBidsJob.class);
  Hash to=msg.getTarget().getIdentity().getHash();
  if (context.shitlist().isShitlisted(to)) {
    if (log.shouldLog(Log.WARN))     log.warn("Attempt to send a message to a shitlisted peer - " + to);
    context.messageRegistry().peerFailed(to);
    fail(context,msg);
    return;
  }
  Hash us=context.routerHash();
  if (to.equals(us)) {
    if (log.shouldLog(Log.ERROR))     log.error("wtf, send a message to ourselves?  nuh uh. msg = " + msg);
    fail(context,msg);
    return;
  }
  TransportBid bid=facade.getBid(msg);
  if (bid == null) {
    if (msg.getFailedTransports().size() <= 0) {
      if (log.shouldLog(Log.WARN))       log.warn("No bids available for the message " + msg);
      context.shitlist().shitlistRouter(to,"No bids");
      context.netDb().fail(to);
    }
    fail(context,msg);
  }
 else {
    bid.getTransport().send(msg);
  }
}
