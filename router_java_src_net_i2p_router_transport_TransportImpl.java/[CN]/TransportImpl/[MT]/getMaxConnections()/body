{
  if (_context.commSystem().isDummy())   return 0;
  String style=getStyle();
  String maxProp;
  if (style.equals("SSU"))   maxProp="i2np.udp.maxConnections";
 else   if (style.equals("NTCP"))   maxProp="i2np.ntcp.maxConnections";
 else   maxProp="i2np." + style.toLowerCase(Locale.US) + ".maxConnections";
  int def=DEFAULT_MAX_CONNECTIONS;
  RouterInfo ri=_context.router().getRouterInfo();
  if (ri != null) {
    char bw=ri.getBandwidthTier().charAt(0);
    if (bw != 'U' && !((FloodfillNetworkDatabaseFacade)_context.netDb()).floodfillEnabled())     def=MAX_CONNECTION_FACTOR * (1 + bw - Router.CAPABILITY_BW12);
  }
  if (style.equals("SSU"))   def*=3;
  return _context.getProperty(maxProp,def);
}
