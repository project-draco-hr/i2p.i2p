{
  if (_log.shouldLog(Log.WARN))   _log.warn("Replacing address with " + address);
  if (address == null) {
    _currentAddresses.clear();
  }
 else {
    byte[] ip=address.getIP();
    if (ip == null) {
      _log.error("WTF null ip for " + address);
      return;
    }
    int len=ip.length;
    for (    RouterAddress ra : _currentAddresses) {
      byte[] ipx=ra.getIP();
      if (ipx != null && ipx.length == len)       _currentAddresses.remove(ra);
    }
    _currentAddresses.add(address);
  }
  if (_listener != null)   _listener.transportAddressChanged();
}
