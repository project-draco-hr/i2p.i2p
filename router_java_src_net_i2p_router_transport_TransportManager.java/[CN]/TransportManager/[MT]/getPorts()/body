{
  Map<String,Integer> rv=new HashMap(_transports.size());
  for (  Transport t : _transports.values()) {
    int port=t.getRequestedPort();
    if (t.getStyle().equals(NTCPTransport.STYLE) && port <= 0 && _context.getBooleanProperty(CommSystemFacadeImpl.PROP_I2NP_NTCP_AUTO_PORT)) {
      Transport udp=getTransport(UDPTransport.STYLE);
      if (udp != null)       port=t.getRequestedPort();
    }
    if (port > 0)     rv.put(t.getStyle(),Integer.valueOf(port));
  }
  return rv;
}
