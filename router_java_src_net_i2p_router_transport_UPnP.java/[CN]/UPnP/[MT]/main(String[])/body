{
  Properties props=new Properties();
  props.setProperty(PROP_ADVANCED,"true");
  I2PAppContext ctx=new I2PAppContext(props);
  UPnP upnp=new UPnP(ctx);
  ControlPoint cp=new ControlPoint();
  System.out.println("Searching for UPnP devices:");
  cp.start();
  cp.search();
  Thread.sleep(10000);
  DeviceList list=cp.getDeviceList();
  System.out.println("Found " + list.size() + " devices!");
  StringBuilder sb=new StringBuilder();
  Iterator<Device> it=list.iterator();
  while (it.hasNext()) {
    Device device=it.next();
    upnp.listSubDev(device.toString(),device,sb);
    System.out.println("Here is the listing for " + device.toString() + " :");
    System.out.println(sb.toString());
    sb.setLength(0);
  }
  System.exit(0);
}
