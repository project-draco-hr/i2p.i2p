{
  UPnP upnp=new UPnP(I2PAppContext.getGlobalContext());
  ControlPoint cp=new ControlPoint();
  System.out.println("Searching for up&p devices:");
  cp.start();
  cp.search();
  while (true) {
    DeviceList list=cp.getDeviceList();
    System.out.println("Found " + list.size() + " devices!");
    StringBuilder sb=new StringBuilder();
    Iterator<Device> it=list.iterator();
    while (it.hasNext()) {
      Device device=it.next();
      upnp.listSubDev(device.toString(),device,sb);
      System.out.println("Here is the listing for " + device.toString() + " :");
      System.out.println(sb.toString());
      sb=new StringBuilder();
    }
    System.out.println("End");
    Thread.sleep(2000);
  }
}
