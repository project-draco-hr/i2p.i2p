{
  _running=true;
  while (_running && !_closed) {
    OutNetMessage nextMessage=getNext();
    if (nextMessage != null) {
      boolean sent=doSend(nextMessage);
      if (!sent) {
        _running=false;
      }
    }
  }
  closeConnection();
}
