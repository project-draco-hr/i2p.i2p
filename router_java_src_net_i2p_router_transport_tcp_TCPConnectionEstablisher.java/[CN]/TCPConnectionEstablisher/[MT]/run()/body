{
  while (true) {
    RouterInfo info=_transport.getNextPeer();
    ConnectionBuilder cb=new ConnectionBuilder(_context,_transport,info);
    TCPConnection con=cb.establishConnection();
    if (con != null) {
      _transport.connectionEstablished(con);
    }
 else {
      _transport.addConnectionErrorMessage(cb.getError());
      Hash peer=info.getIdentity().getHash();
      _context.profileManager().commErrorOccurred(peer);
      _context.shitlist().shitlistRouter(peer,"Unable to contact");
      _context.netDb().fail(peer);
    }
    _transport.establishmentComplete(info);
  }
}
