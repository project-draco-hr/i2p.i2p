{
  RouterAddress routerAddr=addr.toRouterAddress();
  _myAddress=addr;
  _listener.stopListening();
  Set addresses=getCurrentAddresses();
  List toRemove=null;
  for (Iterator iter=addresses.iterator(); iter.hasNext(); ) {
    RouterAddress cur=(RouterAddress)iter.next();
    if (STYLE.equals(cur.getTransportStyle())) {
      if (toRemove == null)       toRemove=new ArrayList(1);
      toRemove.add(cur);
    }
  }
  if (toRemove != null) {
    for (int i=0; i < toRemove.size(); i++) {
      addresses.remove(toRemove.get(i));
    }
  }
  addresses.add(routerAddr);
  _context.router().rebuildRouterInfo();
  if (_log.shouldLog(Log.INFO))   _log.info("Updating our local address to include " + addr.toString() + " and modified our routerInfo to have: "+ _context.router().getRouterInfo().getAddresses());
  _listener.startListening();
}
