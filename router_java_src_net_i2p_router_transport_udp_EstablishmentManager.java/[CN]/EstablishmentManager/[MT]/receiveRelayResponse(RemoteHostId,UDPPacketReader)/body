{
  long nonce=reader.getRelayResponseReader().readNonce();
  OutboundEstablishState state=null;
synchronized (_liveIntroductions) {
    state=(OutboundEstablishState)_liveIntroductions.remove(new Long(nonce));
  }
  if (state == null)   return;
  int sz=reader.getRelayResponseReader().readCharlieIPSize();
  byte ip[]=new byte[sz];
  reader.getRelayResponseReader().readCharlieIP(ip,0);
  InetAddress addr=null;
  try {
    addr=InetAddress.getByAddress(ip);
  }
 catch (  UnknownHostException uhe) {
    if (_log.shouldLog(Log.WARN))     _log.warn("Introducer for " + state + " ("+ bob+ ") sent us an invalid IP for our targer: "+ Base64.encode(ip),uhe);
    state.introductionFailed();
    notifyActivity();
    return;
  }
  _context.statManager().addRateData("udp.receiveIntroRelayResponse",state.getLifetime(),0);
  int port=reader.getRelayResponseReader().readCharliePort();
  if (_log.shouldLog(Log.INFO))   _log.info("Received relay intro for " + state.getRemoteIdentity().calculateHash().toBase64() + " - they are on "+ addr.toString()+ ":"+ port+ " (according to "+ bob.toString(true)+ ")");
  RemoteHostId oldId=state.getRemoteHostId();
  state.introduced(addr,ip,port);
synchronized (_outboundStates) {
    _outboundStates.remove(oldId);
    _outboundStates.put(state.getRemoteHostId(),state);
  }
  notifyActivity();
}
