{
synchronized (_inboundMessages) {
    Map messages=(Map)_inboundMessages.get(fromPeer);
    if (messages == null)     return;
    for (Iterator iter=messages.values().iterator(); iter.hasNext(); ) {
      InboundMessageState state=(InboundMessageState)iter.next();
      if (state.isExpired()) {
        iter.remove();
      }
 else {
        if (!state.isComplete())         ackBitfields.add(state.createACKBitfield());
      }
    }
    if (messages.size() <= 0)     _inboundMessages.remove(fromPeer);
  }
}
