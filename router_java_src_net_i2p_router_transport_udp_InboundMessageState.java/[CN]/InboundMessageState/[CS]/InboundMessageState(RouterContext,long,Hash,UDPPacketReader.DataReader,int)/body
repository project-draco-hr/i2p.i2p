{
  _context=ctx;
  _log=ctx.logManager().getLog(InboundMessageState.class);
  _messageId=messageId;
  _from=from;
  if (data.readMessageIsLast(dataFragment))   _fragments=new ByteArray[1 + data.readMessageFragmentNum(dataFragment)];
 else   _fragments=new ByteArray[MAX_FRAGMENTS];
  _lastFragment=-1;
  _completeSize=-1;
  _receiveBegin=ctx.clock().now();
  if (!receiveFragment(data,dataFragment))   throw new DataFormatException("corrupt");
}
