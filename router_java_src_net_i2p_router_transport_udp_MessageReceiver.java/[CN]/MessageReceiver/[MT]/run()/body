{
  InboundMessageState message=null;
  ByteArray buf=_cache.acquire();
  while (_alive) {
    try {
synchronized (_completeMessages) {
        if (_completeMessages.size() > 0)         message=(InboundMessageState)_completeMessages.remove(0);
 else         _completeMessages.wait();
      }
    }
 catch (    InterruptedException ie) {
    }
    if (message != null) {
      int size=message.getCompleteSize();
      if (_log.shouldLog(Log.INFO))       _log.info("Full message received (" + message.getMessageId() + ") after "+ message.getLifetime());
      I2NPMessage msg=readMessage(buf,message);
      if (msg != null)       _transport.messageReceived(msg,null,message.getFrom(),message.getLifetime(),size);
      message=null;
    }
  }
  _cache.release(buf,false);
}
