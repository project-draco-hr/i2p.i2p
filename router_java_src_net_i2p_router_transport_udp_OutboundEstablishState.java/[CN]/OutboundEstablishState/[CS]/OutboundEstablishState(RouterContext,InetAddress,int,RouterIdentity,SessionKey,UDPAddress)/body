{
  _context=ctx;
  _log=ctx.logManager().getLog(OutboundEstablishState.class);
  if ((remoteHost != null) && (remotePort > 0)) {
    _bobIP=remoteHost.getAddress();
    _bobPort=remotePort;
    _remoteHostId=new RemoteHostId(_bobIP,_bobPort);
  }
 else {
    _bobIP=null;
    _bobPort=-1;
    _remoteHostId=new RemoteHostId(remotePeer.calculateHash().getData());
  }
  _remotePeer=remotePeer;
  _introKey=introKey;
  _keyBuilder=null;
  _queuedMessages=new LinkedBlockingQueue();
  _currentState=STATE_UNKNOWN;
  _establishBegin=ctx.clock().now();
  _remoteAddress=addr;
  _introductionNonce=-1;
  _complete=false;
  prepareSessionRequest();
  if ((addr != null) && (addr.getIntroducerCount() > 0)) {
    if (_log.shouldLog(Log.DEBUG))     _log.debug("new outbound establish to " + remotePeer.calculateHash().toBase64() + ", with address: "+ addr);
    _currentState=STATE_PENDING_INTRO;
  }
}
