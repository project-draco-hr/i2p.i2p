{
  if (_messageBuf == null)   return -1;
  if (fragmentNum + 1 == _fragmentSends.length) {
    int valid=_messageBuf.getValid();
    if (valid <= _fragmentSize)     return valid;
 else     return valid % _fragmentSize;
  }
 else {
    return _fragmentSize;
  }
}
