{
  if (_messageBuf == null)   return -1;
  if (fragmentNum + 1 == _fragmentSends.length) {
    int valid=_messageBuf.getValid();
    if (valid <= _fragmentSize)     return valid;
    int mod=valid % _fragmentSize;
    return mod == 0 ? _fragmentSize : mod;
  }
 else {
    return _fragmentSize;
  }
}
