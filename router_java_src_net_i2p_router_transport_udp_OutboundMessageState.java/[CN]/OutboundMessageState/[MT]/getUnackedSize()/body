{
  short fragmentSends[]=_fragmentSends;
  ByteArray messageBuf=_messageBuf;
  int rv=0;
  if ((messageBuf != null) && (fragmentSends != null)) {
    int totalSize=messageBuf.getValid();
    int lastSize=totalSize % _fragmentSize;
    if (lastSize == 0)     lastSize=_fragmentSize;
    for (int i=0; i < fragmentSends.length; i++) {
      if (fragmentSends[i] >= (short)0) {
        if (i + 1 == fragmentSends.length)         rv+=lastSize;
 else         rv+=_fragmentSize;
      }
    }
  }
  return rv;
}
