{
  long now=_context.clock().now();
  if (_lastSendTime > 0) {
    if (_lastSendTime + 1000 <= now)     _sendWindowBytesRemaining=_sendWindowBytes;
  }
  if (size <= _sendWindowBytesRemaining) {
    _sendWindowBytesRemaining-=size;
    _lastSendTime=now;
    return true;
  }
 else {
    return false;
  }
}
