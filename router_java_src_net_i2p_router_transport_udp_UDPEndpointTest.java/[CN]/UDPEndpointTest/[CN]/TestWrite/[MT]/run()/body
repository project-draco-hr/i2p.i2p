{
  while (!_beginTest) {
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException ie) {
    }
  }
  _log.debug("Beginning to write");
  for (int curPacket=0; curPacket < 10000; curPacket++) {
    byte data[]=new byte[1024];
    _context.random().nextBytes(data);
    int curPeer=(curPacket % _endpoints.length);
    if (_endpoints[curPeer] == _endpoint)     curPeer++;
    if (curPeer >= _endpoints.length)     curPeer=0;
    short priority=1;
    long expiration=-1;
    try {
      UDPPacket packet=UDPPacket.acquire(_context);
      packet.initialize(priority,expiration,InetAddress.getLocalHost(),_endpoints[curPeer].getListenPort());
      packet.writeData(data,0,1024);
      _endpoint.send(packet);
    }
 catch (    UnknownHostException uhe) {
      _log.error("foo!",uhe);
    }
  }
}
