{
  Hash to=toAddress.getIdentity().calculateHash();
  PeerState peer=getPeerState(to);
  if (peer != null) {
    if (_log.shouldLog(Log.DEBUG))     _log.debug("bidding on a message to an established peer: " + peer);
    if (preferUDP())     return _fastPreferredBid;
 else     return _fastBid;
  }
 else {
    if (null == toAddress.getTargetAddress(STYLE))     return null;
    if (_log.shouldLog(Log.DEBUG))     _log.debug("bidding on a message to an unestablished peer: " + to.toBase64());
    if (alwaysPreferUDP())     return _slowPreferredBid;
 else     if (preferUDP())     return _slowBid;
 else     return _slowestBid;
  }
}
