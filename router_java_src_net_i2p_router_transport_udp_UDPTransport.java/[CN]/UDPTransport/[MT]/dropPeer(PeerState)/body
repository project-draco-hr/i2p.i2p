{
  if (_log.shouldLog(Log.WARN))   _log.debug("Dropping remote peer: " + peer);
  if (peer.getRemotePeer() != null) {
    long now=_context.clock().now();
    _context.statManager().addRateData("udp.droppedPeer",now - peer.getLastReceiveTime(),now - peer.getKeyEstablishedTime());
    _context.shitlist().shitlistRouter(peer.getRemotePeer(),"dropped after too many retries");
synchronized (_peersByIdent) {
      _peersByIdent.remove(peer.getRemotePeer());
    }
  }
  String remoteString=peer.getRemoteHostString();
  if (remoteString != null) {
synchronized (_peersByRemoteHost) {
      _peersByRemoteHost.remove(remoteString);
    }
  }
  _activeThrottle.unchoke(peer.getRemotePeer());
  if (SHOULD_FLOOD_PEERS)   _flooder.removePeer(peer);
}
