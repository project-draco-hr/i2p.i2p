{
  List<PeerState> peers=null;
synchronized (_peersByIdent) {
    peers=new ArrayList(_peersByIdent.values());
  }
  Collections.shuffle(peers,_context.random());
  for (int i=0; i < peers.size(); i++) {
    PeerState peer=peers.get(i);
    if ((dontInclude != null) && (dontInclude.equals(peer.getRemoteHostId())))     continue;
    RouterInfo peerInfo=_context.netDb().lookupRouterInfoLocally(peer.getRemotePeer());
    if (peerInfo == null)     continue;
    RouterAddress addr=peerInfo.getTargetAddress(STYLE);
    if (addr != null)     return peer;
  }
  return null;
}
