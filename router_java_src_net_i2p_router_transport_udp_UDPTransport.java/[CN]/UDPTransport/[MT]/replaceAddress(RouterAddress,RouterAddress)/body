{
  replaceAddress(address);
  if (oldAddress != null) {
    UDPAddress old=new UDPAddress(oldAddress);
    InetAddress oldHost=old.getHostAddress();
    UDPAddress newAddr=new UDPAddress(address);
    InetAddress newHost=newAddr.getHostAddress();
    if ((old.getPort() > 0) && (oldHost != null) && (isValid(oldHost.getAddress()))&& (newAddr.getPort() > 0)&& (newHost != null)&& (isValid(newHost.getAddress()))) {
      if ((old.getPort() != newAddr.getPort()) || (!oldHost.equals(newHost))) {
        if (_context.getBooleanProperty(Router.PROP_DYNAMIC_KEYS)) {
          if (_log.shouldLog(Log.ERROR))           _log.error("SSU address updated. new address: " + newAddr.getHostAddress() + ":"+ newAddr.getPort()+ ", old address: "+ old.getHostAddress()+ ":"+ old.getPort());
          _context.router().shutdown(Router.EXIT_HARD_RESTART);
        }
      }
    }
  }
}
