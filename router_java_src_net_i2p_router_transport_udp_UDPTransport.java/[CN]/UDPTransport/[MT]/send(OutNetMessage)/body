{
  Hash to=msg.getTarget().getIdentity().calculateHash();
  if (getPeerState(to) != null) {
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Sending outbound message to an established peer: " + to.toBase64());
    _outboundMessages.add(msg);
  }
 else {
    if (_log.shouldLog(Log.DEBUG))     _log.debug("Sending outbound message to an unestablished peer: " + to.toBase64());
    _establisher.establish(msg);
  }
}
