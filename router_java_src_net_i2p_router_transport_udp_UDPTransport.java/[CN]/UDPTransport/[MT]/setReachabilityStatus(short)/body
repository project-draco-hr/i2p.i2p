{
  short old=_reachabilityStatus;
  long now=_context.clock().now();
switch (status) {
case CommSystemFacade.STATUS_OK:
    _context.statManager().addRateData("udp.statusOK",1,0);
  _reachabilityStatus=status;
_reachabilityStatusLastUpdated=now;
break;
case CommSystemFacade.STATUS_DIFFERENT:
_context.statManager().addRateData("udp.statusDifferent",1,0);
_reachabilityStatus=status;
_reachabilityStatusLastUpdated=now;
break;
case CommSystemFacade.STATUS_REJECT_UNSOLICITED:
_context.statManager().addRateData("udp.statusReject",1,0);
case CommSystemFacade.STATUS_HOSED:
_reachabilityStatus=status;
_reachabilityStatusLastUpdated=now;
break;
case CommSystemFacade.STATUS_UNKNOWN:
default :
_context.statManager().addRateData("udp.statusUnknown",1,0);
break;
}
if ((status != old) && (status != CommSystemFacade.STATUS_UNKNOWN)) {
if (_log.shouldLog(Log.INFO)) _log.info("Old status: " + old + " New status: "+ status+ " from: ",new Exception("traceback"));
if (needsRebuild()) rebuildExternalAddress();
}
}
