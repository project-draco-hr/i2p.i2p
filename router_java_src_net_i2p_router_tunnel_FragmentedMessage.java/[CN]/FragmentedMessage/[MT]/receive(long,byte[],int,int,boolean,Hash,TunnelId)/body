{
  if (payload == null) {
    if (_log.shouldLog(Log.ERROR))     _log.error("Payload is null for messageId " + messageId);
    return false;
  }
  if (length <= 0) {
    if (_log.shouldLog(Log.WARN))     _log.warn("Length is impossible (" + length + ") for messageId "+ messageId);
    return false;
  }
  if (offset + length > payload.length) {
    if (_log.shouldLog(Log.WARN))     _log.warn("Length is impossible (" + length + "/"+ offset+ " out of "+ payload.length+ ") for messageId "+ messageId);
    return false;
  }
  if (_log.shouldLog(Log.DEBUG))   _log.debug("Receive message " + messageId + " with "+ length+ " bytes (last? "+ isLast+ ") targetting "+ toRouter+ " / "+ toTunnel+ " offset="+ offset);
  _messageId=messageId;
  ByteArray ba=_cache.acquire();
  System.arraycopy(payload,offset,ba.getData(),0,length);
  ba.setValid(length);
  ba.setOffset(0);
  _fragments[0]=ba;
  _lastReceived=_lastReceived || isLast;
  _toRouter=toRouter;
  _toTunnel=toTunnel;
  if (_highFragmentNum < 0)   _highFragmentNum=0;
  return true;
}
