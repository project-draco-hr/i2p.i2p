{
  byte target[]=_dataCache.acquire().getData();
  int offset=0;
  if (msg.getOffset() <= 0)   offset=writeFirstFragment(msg,target,offset);
 else   offset=writeSubsequentFragment(msg,target,offset);
  preprocess(target,offset);
  return target;
}
