{
  HopConfig cur=null;
  Long nextTime=null;
  long now=getContext().clock().now() + LEAVE_BATCH_TIME;
  while (true) {
synchronized (LeaveTunnel.this) {
      if (_configs.size() <= 0)       return;
      nextTime=_times.get(0);
      if (nextTime.longValue() <= now) {
        cur=_configs.remove(0);
        _times.remove(0);
        if (_times.size() > 0)         nextTime=_times.get(0);
 else         nextTime=null;
      }
 else {
        cur=null;
      }
    }
    if (cur != null)     remove(cur);
 else     break;
  }
  if (nextTime != null) {
synchronized (LeaveTunnel.this) {
      getTiming().setStartAfter(nextTime.longValue());
      getContext().jobQueue().addJob(LeaveTunnel.this);
    }
  }
}
