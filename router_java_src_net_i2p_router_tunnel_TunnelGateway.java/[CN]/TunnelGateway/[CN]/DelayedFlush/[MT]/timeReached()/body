{
  long now=_context.clock().now();
synchronized (_queue) {
    if ((_queue.size() > 0) && (_lastFlush + _flushFrequency < now)) {
      _preprocessor.preprocessQueue(_queue,_sender,_receiver);
      _lastFlush=_context.clock().now();
    }
  }
}
