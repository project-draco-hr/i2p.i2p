{
  long now=getContext().clock().now();
  getContext().profileManager().tunnelJoined(_currentPeer.getIdentity().calculateHash(),now - _lastSendTime);
  if (_isExploratory)   getContext().statManager().addRateData("tunnel.buildExploratoryPartialTime",now - _lastSendTime,0);
 else   getContext().statManager().addRateData("tunnel.buildPartialTime",now - _lastSendTime,0);
  if (_currentHop > 0) {
    RequestTunnelJob j=new RequestTunnelJob(getContext(),_config,_onCreated,_onFailed,_currentHop - 1,_isFake,_isExploratory);
    getContext().jobQueue().addJob(j);
  }
 else {
    if (_onCreated != null)     getContext().jobQueue().addJob(_onCreated);
    if (_isExploratory) {
      int i=_config.getLength();
      getContext().statManager().addRateData("tunnel.buildExploratorySuccess",1,0);
      if (i == 2)       getContext().statManager().addRateData("tunnel.buildExploratorySuccess1Hop",1,0);
 else       if (i == 3)       getContext().statManager().addRateData("tunnel.buildExploratorySuccess2Hop",1,0);
 else       if (i == 4)       getContext().statManager().addRateData("tunnel.buildExploratorySuccess3Hop",1,0);
    }
 else     getContext().statManager().addRateData("tunnel.buildSuccess",1,0);
  }
}
