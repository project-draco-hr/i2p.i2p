{
  if (!pool.keepBuilding(poolToken))   return;
  pool.refreshSettings();
  PooledTunnelCreatorConfig cfg=configTunnel(ctx,pool,fake);
  if ((cfg == null) && (!fake)) {
    RetryJob j=new RetryJob(ctx,pool,poolToken);
    j.getTiming().setStartAfter(ctx.clock().now() + ctx.random().nextInt(30 * 1000));
    ctx.jobQueue().addJob(j);
    return;
  }
  OnCreatedJob onCreated=new OnCreatedJob(ctx,pool,cfg,fake,poolToken);
  RetryJob onFailed=(fake ? null : new RetryJob(ctx,pool,poolToken));
  RequestTunnelJob req=new RequestTunnelJob(ctx,cfg,onCreated,onFailed,cfg.getLength() - 1,fake);
  if (fake)   req.runJob();
 else   ctx.jobQueue().addJob(req);
}
