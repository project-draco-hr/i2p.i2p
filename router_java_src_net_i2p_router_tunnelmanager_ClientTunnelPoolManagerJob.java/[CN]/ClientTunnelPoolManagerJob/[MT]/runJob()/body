{
  try {
    if (_clientPool.isStopped()) {
      handleStopped();
      return;
    }
    if (!getContext().clientManager().isLocal(_clientPool.getDestination())) {
      if (_log.shouldLog(Log.INFO))       _log.info("Client " + _clientPool.getDestination().calculateHash() + " is no longer connected, stop the pool");
      _clientPool.stopPool();
      requeue(POOL_CHECK_DELAY);
      return;
    }
    int requestedPoolSize=_clientPool.getClientSettings().getNumInboundTunnels();
    int safePoolSize=_clientPool.getSafePoolSize(POOL_CHECK_DELAY);
    if (safePoolSize < requestedPoolSize) {
      requestMoreTunnels(requestedPoolSize - safePoolSize);
    }
  }
 catch (  Exception t) {
    _log.log(Log.CRIT,"Unhandled exception managing the client tunnel pool",t);
  }
  requeue(POOL_CHECK_DELAY);
}
