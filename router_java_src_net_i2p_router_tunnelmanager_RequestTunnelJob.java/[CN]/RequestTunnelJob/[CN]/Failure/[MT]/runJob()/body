{
  if (_log.shouldLog(Log.ERROR)) {
    _log.error("Tunnel creation timed out for tunnel " + _tunnel.getTunnelId() + " at router "+ _tunnel.getThisHop().toBase64()+ " from router "+ _context.routerHash().toBase64()+ " after waiting "+ (_context.clock().now() - _started)+ "ms",_by);
    _log.error("Added by",Failure.this.getAddedBy());
  }
synchronized (_failedTunnelParticipants) {
    _failedTunnelParticipants.add(_tunnel.getThisHop());
    _failedTunnelParticipants.add(_replyThrough);
  }
  Failure.this._context.messageHistory().tunnelRequestTimedOut(_tunnel.getThisHop(),_tunnel.getTunnelId(),_replyThrough);
  _context.profileManager().tunnelRejected(_tunnel.getThisHop(),_context.clock().now() - _started);
  _context.profileManager().messageFailed(_tunnel.getThisHop());
  Failure.this._context.statManager().updateFrequency("tunnel.buildFailFrequency");
  fail();
}
