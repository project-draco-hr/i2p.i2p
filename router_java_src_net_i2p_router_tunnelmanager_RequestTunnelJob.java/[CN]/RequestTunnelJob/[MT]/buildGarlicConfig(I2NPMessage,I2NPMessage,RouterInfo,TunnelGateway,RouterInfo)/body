{
  GarlicConfig config=new GarlicConfig();
  PayloadGarlicConfig dataClove=buildDataClove(data,target,_expiration);
  config.addClove(dataClove);
  PayloadGarlicConfig ackClove=buildAckClove(status,replyPeer,replyTunnel,_expiration);
  config.addClove(ackClove);
  DeliveryInstructions instructions=new DeliveryInstructions();
  instructions.setDeliveryMode(DeliveryInstructions.DELIVERY_MODE_ROUTER);
  instructions.setDelayRequested(false);
  instructions.setDelaySeconds(0);
  instructions.setEncrypted(false);
  instructions.setEncryptionKey(null);
  instructions.setRouter(target.getIdentity().getHash());
  instructions.setTunnelId(null);
  _log.info("Setting the expiration on the garlic config to " + (new Date(_expiration)));
  config.setCertificate(new Certificate(Certificate.CERTIFICATE_TYPE_NULL,null));
  config.setDeliveryInstructions(instructions);
  config.setId(_context.random().nextInt(Integer.MAX_VALUE));
  config.setExpiration(_expiration);
  config.setRecipientPublicKey(target.getIdentity().getPublicKey());
  config.setRequestAck(false);
  return config;
}
