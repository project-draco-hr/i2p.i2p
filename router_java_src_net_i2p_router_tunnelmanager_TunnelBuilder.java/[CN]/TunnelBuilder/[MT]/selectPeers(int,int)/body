{
  PeerSelectionCriteria criteria=new PeerSelectionCriteria();
  int maxNeeded=numTunnels * numPerTunnel;
  int minNeeded=numPerTunnel;
  criteria.setMaximumRequired(maxNeeded);
  criteria.setMinimumRequired(minNeeded);
  criteria.setPurpose(PeerSelectionCriteria.PURPOSE_TUNNEL);
  List peers=_context.peerManager().selectPeers(criteria);
  List rv=new ArrayList(peers.size());
  for (Iterator iter=peers.iterator(); iter.hasNext(); ) {
    Hash peer=(Hash)iter.next();
    if (null != _context.netDb().lookupRouterInfoLocally(peer))     rv.add(peer);
 else {
      _log.warn("peer manager selected a peer we don't know about - drop it");
    }
  }
  return rv;
}
