{
  int found=0;
  Set ids=getOutboundTunnels();
  long mustExpireAfter=Clock.getInstance().now();
  for (Iterator iter=ids.iterator(); iter.hasNext(); ) {
    TunnelId id=(TunnelId)iter.next();
    TunnelInfo info=getOutboundTunnel(id);
    if ((info != null) && (info.getIsReady())) {
      if (info.getSettings().getExpiration() > mustExpireAfter) {
        found++;
      }
    }
  }
  return found;
}
