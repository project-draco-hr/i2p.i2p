{
  ServiceData data=getServiceData();
  Node scpdNode=data.getSCPDNode();
  if (scpdNode != null)   return scpdNode;
  String scpdURLStr=getSCPDURL();
  try {
    URL scpdUrl=new URL(scpdURLStr);
    scpdNode=getSCPDNode(scpdUrl);
  }
 catch (  Exception e1) {
    Device rootDev=getRootDevice();
    String urlBaseStr=rootDev.getURLBase();
    if (urlBaseStr == null || urlBaseStr.length() <= 0) {
      String location=rootDev.getLocation();
      String locationHost=HTTP.getHost(location);
      int locationPort=HTTP.getPort(location);
      urlBaseStr=HTTP.getRequestHostURL(locationHost,locationPort);
    }
    scpdURLStr=HTTP.toRelativeURL(scpdURLStr);
    String newScpdURLStr=urlBaseStr + scpdURLStr;
    try {
      URL newScpdURL=new URL(newScpdURLStr);
      scpdNode=getSCPDNode(newScpdURL);
    }
 catch (    Exception e2) {
      newScpdURLStr=HTTP.getAbsoluteURL(urlBaseStr,scpdURLStr);
      try {
        URL newScpdURL=new URL(newScpdURLStr);
        scpdNode=getSCPDNode(newScpdURL);
      }
 catch (      Exception e3) {
        newScpdURLStr=rootDev.getDescriptionFilePath() + scpdURLStr;
        try {
          scpdNode=getSCPDNode(new File(newScpdURLStr));
        }
 catch (        Exception e4) {
          Debug.warning(e4);
        }
      }
    }
  }
  data.setSCPDNode(scpdNode);
  return scpdNode;
}
