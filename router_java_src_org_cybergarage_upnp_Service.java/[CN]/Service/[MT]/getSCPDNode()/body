{
  ServiceData data=getServiceData();
  Node scpdNode=data.getSCPDNode();
  if (scpdNode != null)   return scpdNode;
  Device rootDev=getRootDevice();
  if (rootDev == null)   return null;
  String scpdURLStr=getSCPDURL();
  String rootDevPath=rootDev.getDescriptionFilePath();
  if (rootDevPath != null) {
    File f;
    f=new File(rootDevPath.concat(scpdURLStr));
    if (f.exists()) {
      try {
        scpdNode=getSCPDNode(f);
      }
 catch (      ParserException e) {
        e.printStackTrace();
      }
      if (scpdNode != null) {
        data.setSCPDNode(scpdNode);
        return scpdNode;
      }
    }
  }
  try {
    URL scpdUrl=new URL(rootDev.getAbsoluteURL(scpdURLStr));
    scpdNode=getSCPDNode(scpdUrl);
    if (scpdNode != null) {
      data.setSCPDNode(scpdNode);
      return scpdNode;
    }
  }
 catch (  Exception e) {
  }
  String newScpdURLStr=rootDev.getDescriptionFilePath() + HTTP.toRelativeURL(scpdURLStr);
  try {
    scpdNode=getSCPDNode(new File(newScpdURLStr));
    return scpdNode;
  }
 catch (  Exception e) {
    Debug.warning(e);
  }
  return null;
}
